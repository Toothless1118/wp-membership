!function(a){var b,c=400,d=200,e="Sorry, no posts were found.",f="",g=!1,h=!1,i=function(){a(".op-live-search-form").each(function(b){var c,d=a(this);h?c=a("#"+d.find(".op-live-search-input").attr("data-results-id")):(d.find(".op-live-search-input").attr("data-results-id","op-live-search-results-"+b),c=a('<ul class="op-live-search-results" id="op-live-search-results-'+b+'"></ul>').appendTo("body"),h=!0),c.css({top:d.offset().top+d.outerHeight()+"px",left:d.offset().left+"px",width:d.width()+"px"}),g&&c.css({height:"auto"})})},j=function(b,c){var d=(c.parentsUntil(".op-live-search-form").parent(),a("body").find("#"+c.attr("data-results-id"))),b=a.trim(b);""===b&&(b='<li class="op-live-search-results-item op-live-search-results-item--empty">'+e+"</li>"),d.html(b),g?d.css({height:"auto"}):k(d)},k=function(a){g||(i(),a.addClass("op-live-search-results--shown"),currentHeight=a.height(),tempHeight=a.css({height:"auto"}).height(),a.css({height:currentHeight}),a.animate({height:tempHeight},d),g=!0)},l=function(b,c){var b=a.trim(b);if(!b||f===b)return!1;f=b;var d={action:"optimizepress-live-search",all_pages:c.parent().find(".op_live_search_all_pages").val(),product:c.parent().find(".op_live_search_product").val(),category:c.parent().find(".op_live_search_category").val(),subcategory:c.parent().find(".op_live_search_subcategory").val(),searchTerm:c.val()};a.ajax({url:ajaxUrl,type:"POST",data:d,cache:!1}).done(function(a){j(a,c)})},m=function(){a(".op-live-search-results").animate({height:0},d).removeClass("op-live-search-results--shown"),a(".op-live-search-results-item--focused").removeClass("op-live-search-results-item--focused"),g=!1};i(),a(".op-live-search-input").off(),a(".op-live-search-input").each(function(d,e){var f,g=a(e),h=a("#"+g.attr("data-results-id"));a(this).on("blur",function(a){setTimeout(function(){m()},100),i()}),a(this).on("keyup",function(d){var e=a(this);clearTimeout(b),b=setTimeout(function(){l(e.val(),e)},c)}),a(this).on("keydown",function(b){var c=a(this);switch(b.keyCode){case 40:k(h),f=h.find(".op-live-search-results-item--focused").removeClass("op-live-search-results-item--focused"),$focusItem=f.next(),$focusItem=$focusItem.length>0?$focusItem:h.find(".op-live-search-results-item").eq(0),$focusItem.addClass("op-live-search-results-item--focused"),b.stopPropagation(),b.preventDefault();break;case 38:k(h),f=h.find(".op-live-search-results-item--focused").removeClass("op-live-search-results-item--focused"),$focusItem=f.prev(),$focusItem=$focusItem.length>0?$focusItem:h.find(".op-live-search-results-item:last-child"),$focusItem.addClass("op-live-search-results-item--focused"),b.stopPropagation(),b.preventDefault();break;case 27:m(),b.stopPropagation(),b.preventDefault();break;case 13:f=h.find(".op-live-search-results-item--focused"),f.length&&f.find("a").length?window.location=f.find("a").attr("href"):c.parent().parent().submit(),b.stopPropagation(),b.preventDefault()}}),h.on("hover",".op-live-search-results-item",function(){a(this).parent().find(".op-live-search-results-item--focused").removeClass("op-live-search-results-item--focused"),a(this).addClass("op-live-search-results-item--focused")})}),a("body").on("click",function(b){a(b.target).hasClass("op-live-search-input")&&a("#"+a(b.target).attr("data-results-id")).hasClass("op-live-search-results--shown")||m(),a("#"+a(b.target).attr("data-results-id")).hasClass("op-live-search-results--shown")||""===a.trim(a(b.target).val())||k(a("#"+a(b.target).attr("data-results-id")))}),a(window).on("resize",i)}(opjq);