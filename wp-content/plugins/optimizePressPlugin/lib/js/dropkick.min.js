/*!
 * DropKick 2.0.2
 *
 * Highly customizable <select> lists
 * https://github.com/robdel12/DropKick
 *
*/
!function(a,b,c,d){b.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),b.isIframe=b.parent!=b.self&&location.host===parent.location.host;var e={},f=0,g=function(a,d){var f;return b.isMobile&&!d.mobile?!1:this===b?new g(a,d):("string"==typeof a&&"#"===a[0]&&(a=c.getElementById(a.substr(1))),(f=a.getAttribute("data-dkcacheid"))?(k.extend(e[f].data.settings,d),e[f]):"SELECT"===a.nodeName?this.init(a,d):void 0)},h=function(){},j={initialize:h,change:h,open:h,close:h,search:"strict"},k={hasClass:function(a,b){var c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");return a&&c.test(a.className)},addClass:function(a,b){a&&!k.hasClass(a,b)&&(a.className+=" "+b)},removeClass:function(a,b){var c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");a&&(a.className=a.className.replace(c," "))},toggleClass:function(a,b){var c=k.hasClass(a,b)?"remove":"add";k[c+"Class"](a,b)},extend:function(a){return Array.prototype.slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)a[c]=b[c]}),a},offset:function(a){var d=a.getBoundingClientRect()||{top:0,left:0},e=c.documentElement;return{top:d.top+b.pageYOffset-e.clientTop,left:d.left+b.pageXOffset-e.clientLeft}},position:function(a,b){for(var c={top:0,left:0};a!==b;)c.top+=a.offsetTop,c.left+=a.offsetLeft,a=a.parentNode;return c},closest:function(a,b){for(;a;){if(a===b)return a;a=a.parentNode}return!1},create:function(a,b){var d,e=c.createElement(a);b||(b={});for(d in b)b.hasOwnProperty(d)&&("innerHTML"==d?e.innerHTML=b[d]:e.setAttribute(d,b[d]));return e}};g.prototype={add:function(a,b){var d,e,f;"string"==typeof a&&(d=a,a=c.createElement("option"),a.text=d),"OPTION"===a.nodeName&&(e=k.create("li",{"class":"dk-option","data-value":a.value,innerHTML:a.text,role:"option","aria-selected":"false",id:"dk"+this.data.cacheID+"-"+(a.id||a.value.replace(" ","-"))}),k.addClass(e,a.className),this.length+=1,a.disabled&&(k.addClass(e,"dk-option-disabled"),e.setAttribute("aria-disabled","true")),this.data.select.add(a,b),"number"==typeof b&&(b=this.item(b)),this.options.indexOf(b)>-1?b.parentNode.insertBefore(e,b):this.data.elem.lastChild.appendChild(e),e.addEventListener("mouseover",this),f=this.options.indexOf(b),this.options.splice(f,0,e),a.selected&&this.select(f))},item:function(a){return a=0>a?this.options.length+a:a,this.options[a]||null},remove:function(a){var b=this.item(a);b.parentNode.removeChild(b),this.options.splice(a,1),this.data.select.remove(a),this.select(this.data.select.selectedIndex),this.length-=1},init:function(a,d){var h,i=g.build(a,"dk"+f);if(this.data={},this.data.select=a,this.data.elem=i.elem,this.data.settings=k.extend({},j,d),this.disabled=a.disabled,this.form=a.form,this.length=a.length,this.multiple=a.multiple,this.options=i.options.slice(0),this.selectedIndex=a.selectedIndex,this.selectedOptions=i.selected.slice(0),this.value=a.value,a.parentNode.insertBefore(this.data.elem,a),this.data.elem.addEventListener("click",this),this.data.elem.addEventListener("keydown",this),this.data.elem.addEventListener("keypress",this),this.form&&this.form.addEventListener("reset",this),!this.multiple)for(h=0;h<this.options.length;h++)this.options[h].addEventListener("mouseover",this);return 0===f&&(c.addEventListener("click",g.onDocClick),b.isIframe&&parent.document.addEventListener("click",g.onDocClick)),this.data.cacheID=f,a.setAttribute("data-dkCacheId",this.data.cacheID),e[this.data.cacheID]=this,this.data.settings.initialize.call(this),f+=1,this},close:function(){var a=this.data.elem;if(!this.isOpen||this.multiple)return!1;for(i=0;i<this.options.length;i++)k.removeClass(this.options[i],"dk-option-highlight");a.lastChild.setAttribute("aria-expanded","false"),k.removeClass(a.lastChild,"dk-select-options-highlight"),k.removeClass(a,"dk-select-open-(up|down)"),this.isOpen=!1,this.data.settings.close.call(this)},open:function(){var a,c,d,e=this.data.elem,f=e.lastChild,g=k.offset(e).top-b.scrollY,h=b.innerHeight-(g+e.offsetHeight);return this.isOpen||this.multiple?!1:(f.style.display="block",a=f.offsetHeight,f.style.display="",c=g>a,d=h>a,direction=c&&!d?"-up":"-down",this.isOpen=!0,k.addClass(e,"dk-select-open"+direction),f.setAttribute("aria-expanded","true"),this._scrollTo(this.options.length-1),this._scrollTo(this.selectedIndex),void this.data.settings.open.call(this))},disable:function(a,b){var c="dk-option-disabled";(0==arguments.length||"boolean"==typeof a)&&(b=a===d?!0:!1,a=this.data.elem,c="dk-select-disabled",this.disabled=b),b==d&&(b=!0),"number"==typeof a&&(a=this.item(a)),k[b?"addClass":"removeClass"](a,c)},select:function(a,b){var c,d,e,f,g=this.data.select;if("number"==typeof a&&(a=this.item(a)),"string"==typeof a)for(c=0;c<this.length;c++){if(this.options[c].getAttribute("data-value")!=a)return!1;a=this.options[c]}return!b&&k.hasClass(a,"dk-option-disabled")?!1:k.hasClass(a,"dk-option")?(d=this.options.indexOf(a),e=g.options[d],this.multiple?(k.toggleClass(a,"dk-option-selected"),e.selected=!e.selected,k.hasClass(a,"dk-option-selected")?(a.setAttribute("aria-selected","true"),this.selectedOptions.push(a)):(a.setAttribute("aria-selected","false"),d=this.selectedOptions.indexOf(a),this.selectedOptions.splice(d,1))):(f=this.data.elem.firstChild,this.selectedOptions.length&&(k.removeClass(this.selectedOptions[0],"dk-option-selected"),this.selectedOptions[0].setAttribute("aria-selected","false")),k.addClass(a,"dk-option-selected"),a.setAttribute("aria-selected","true"),f.setAttribute("aria-activedescendant",a.id),f.innerHTML=e.text,this.selectedOptions[0]=a,e.selected=!0),this.selectedIndex=g.selectedIndex,this.value=g.value,this.data.settings.change.call(this),a):void 0},selectOne:function(a,b){return this.reset(!0),this._scrollTo(a),this.select(a,b)},search:function(a,b){var c,d,e,f,g,h,i,j,k=this.data.select.options,l=[];if(!a)return this.options;for(b=b?b.toLowerCase():"strict",b="fuzzy"==b?2:"partial"==b?1:0,j=new RegExp((b?"":"^")+a,"i"),c=0;c<k.length;c++)if(e=k[c].text.toLowerCase(),2==b){for(d=a.toLowerCase().split(""),f=g=h=i=0;g<e.length;)e[g]===d[f]?(h+=1+h,f++):h=0,i+=h,g++;f==d.length&&l.push({e:this.options[c],s:i,i:c})}else j.test(e)&&l.push(this.options[c]);return 2==b&&(l=l.sort(function(a,b){return b.s-a.s||a.i-b.i}).reduce(function(a,b){return a[a.length]=b.e,a},[])),l},reset:function(a){var b,c=this.data.select;for(this.selectedOptions.length=0,b=0;b<c.options.length;b++)c.options[b].selected=!1,k.removeClass(this.options[b],"dk-option-selected"),this.options[b].setAttribute("aria-selected","false"),!a&&c.options[b].defaultSelected&&this.select(b,!0);this.selectedOptions.length||this.multiple||this.select(0,!0)},refresh:function(){this.dispose().init(this.data.select,this.data.settings)},dispose:function(){return delete e[this.data.cachID],this.data.elem.parentNode.removeChild(this.data.elem),this.data.select.removeAttribute("data-dkCacheId"),this},handleEvent:function(a){if(!this.disabled)switch(a.type){case"click":this._delegate(a);break;case"keydown":this._keyHandler(a);break;case"keypress":this._searchOptions(a);break;case"mouseover":this._highlight(a);break;case"reset":this.reset()}},_delegate:function(a){var c,d,e,f,g=a.target;if(k.hasClass(g,"dk-option-disabled"))return!1;if(this.multiple){if(k.hasClass(g,"dk-option"))if(c=b.getSelection(),"Range"==c.type&&c.collapseToStart(),a.shiftKey)if(e=this.options.indexOf(this.selectedOptions[0]),f=this.options.indexOf(this.selectedOptions[this.selectedOptions.length-1]),d=this.options.indexOf(g),d>e&&f>d&&(d=e),d>f&&f>e&&(f=e),this.reset(!0),f>d)for(;f+1>d;)this.select(d++);else for(;d>f-1;)this.select(d--);else a.ctrlKey||a.metaKey?this.select(g):(this.reset(!0),this.select(g))}else this[this.isOpen?"close":"open"](),k.hasClass(g,"dk-option")&&this.select(g)},_highlight:function(a){var b,c=a.target;if(!this.multiple){for(b=0;b<this.options.length;b++)k.removeClass(this.options[b],"dk-option-highlight");k.addClass(this.data.elem.lastChild,"dk-select-options-highlight"),k.addClass(c,"dk-option-highlight")}},_keyHandler:function(a){var b,c=this.selectedOptions,d=this.options,e=1,f={tab:9,enter:13,esc:27,space:32,up:38,down:40};switch(a.keyCode){case f.up:e=-1;case f.down:a.preventDefault(),b=c[c.length-1],e=d.indexOf(b)+e,e>d.length-1?e=d.length-1:0>e&&(e=0),this.data.select.options[e].disabled||(this.reset(!0),this.select(e),this._scrollTo(e));break;case f.space:if(!this.isOpen){a.preventDefault(),this.open();break}case f.tab:case f.enter:for(e=0;e<d.length;e++)k.hasClass(d[e],"dk-option-highlight")&&this.select(e);case f.esc:this.isOpen&&(a.preventDefault(),this.close())}},_searchOptions:function(a){var b,c=this,e=String.fromCharCode(a.keyCode||a.which),f=function(){c.data.searchTimeout&&clearTimeout(c.data.searchTimeout),c.data.searchTimeout=setTimeout(function(){c.data.searchString=""},1e3)};this.data.searchString===d&&(this.data.searchString=""),f(),this.data.searchString+=e,b=this.search(this.data.searchString,this.data.settings.search),b.length&&(k.hasClass(b[0],"dk-option-disabled")||this.selectOne(b[0]))},_scrollTo:function(a){var b,c,d,e=this.data.elem.lastChild;return this.isOpen||this.multiple?("number"==typeof a&&(a=this.item(a)),b=k.position(a,e).top,c=b-e.scrollTop,d=c+a.offsetHeight,void(d>e.offsetHeight?(b+=a.offsetHeight,e.scrollTop=b-e.offsetHeight):0>c&&(e.scrollTop=b))):!1}},g.build=function(a,b){var c,d,e=[],f={elem:null,options:[],selected:[]},g=function(a){var c,d,e,h,i=[];switch(a.nodeName){case"OPTION":c=k.create("li",{"class":"dk-option","data-value":a.value,innerHTML:a.text,role:"option","aria-selected":"false",id:b+"-"+(a.id||a.value.replace(" ","-"))}),k.addClass(c,a.className),a.disabled&&(k.addClass(c,"dk-option-disabled"),c.setAttribute("aria-disabled","true")),a.selected&&(k.addClass(c,"dk-option-selected"),c.setAttribute("aria-selected","true"),f.selected.push(c)),f.options.push(this.appendChild(c));break;case"OPTGROUP":for(d=k.create("li",{"class":"dk-optgroup"}),a.label&&d.appendChild(k.create("div",{"class":"dk-optgroup-label",innerHTML:a.label})),e=k.create("ul",{"class":"dk-optgroup-options"}),h=a.children.length;h--;i.unshift(a.children[h]));i.forEach(g,e),this.appendChild(d).appendChild(e)}};for(f.elem=k.create("div",{"class":"dk-select"+(a.multiple?"-multi":"")}),c=k.create("ul",{"class":"dk-select-options",id:b+"-listbox",role:"listbox"}),a.disabled&&k.addClass(f.elem,"dk-select-disabled"),f.elem.id=b+(a.id?"-"+a.id:""),k.addClass(f.elem,a.className),a.multiple?(f.elem.setAttribute("tabindex",a.getAttribute("tabindex")||"0"),c.setAttribute("aria-multiselectable","true")):(f.elem.appendChild(k.create("div",{"class":"dk-selected",tabindex:a.tabindex||0,innerHTML:a.options[a.selectedIndex].text,id:b+"-combobox","aria-live":"assertive","aria-owns":c.id,role:"combobox"})),c.setAttribute("aria-expanded","false")),d=a.children.length;d--;e.unshift(a.children[d]));return e.forEach(g,f.elem.appendChild(c)),f},g.onDocClick=function(a){var b,d,f;(b=c.getElementById(a.target.htmlFor))&&null!==(d=b.getAttribute("data-dkcacheid"))&&e[d].data.elem.focus();for(f in e)k.closest(a.target,e[f].data.elem)||e[f].disabled||e[f].close()};var l="onwheel"in b?"wheel":"onmousewheel"in c?"mousewheel":"MouseScrollEvent"in b?"DOMMouseScroll MozMousePixelScroll":!1;l&&a(c).on(l,".dk_options_inner",function(a){var b=a.originalEvent.wheelDelta||-a.originalEvent.deltaY||-a.originalEvent.detail;return msie?(this.scrollTop-=Math.round(b/10),!1):b>0&&this.scrollTop<=0||0>b&&this.scrollTop>=this.scrollHeight-this.offsetHeight?!1:!0}),b.Dropkick=g}(opjq,window,document),opjq.fn.dropkick=function(){var a=Array.prototype.slice.call(arguments);return opjq(this).each(function(){a[0]&&"object"!=typeof a[0]?"string"==typeof a[0]&&Dropkick.prototype[a[0]].apply(new Dropkick(this),a.slice(1)):new Dropkick(this,a[0]||{})})};