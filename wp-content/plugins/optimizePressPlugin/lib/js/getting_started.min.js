!function(a){function b(){var b=a(this).val(),c="";c=b.replace(/\s/g,"-").replace(/[^a-zA-Z0-9\-]/g,"").replace(RegExp("-{2,}","g"),"-"),l.val(c.toLowerCase())}function c(){k.removeClass("error").val(""),l.removeClass("error").val(""),a(".op-msg").hide()}function d(b){var c=a(".op-msg-success"),d=a(".op-msg-error"),e=a("#op_ajax_checker"),f=e.find("img"),g=e.find(".op-check-availability"),i=e.find(".op-check-availability-cancel");return""===a.trim(l.val())?!1:(b.preventDefault(),m.addClass("op-loading"),g.fadeOut("fast",function(){d.add(c).hide(),f.add(i).fadeIn("fast")}),void(h=a.ajax(OptimizePress.ajaxurl,{data:{action:OptimizePress.SN+"-page-builder-slug",slug:l.val(),post_id:0},type:"post",dataType:"json",success:function(a){i.add(f).fadeOut("fast",function(){g.fadeIn("fast")}),a.valid===!0?(l.removeClass("error"),p=!0,o?(window.parent.OptimizePress.reload_page=!0,j.submit()):m.removeClass("op-loading"),d.hide(),c.show()):(l.addClass("error"),m.removeClass("op-loading"),o&&(alert(OptimizePress.getting_started.slug_message),l.focus()),p=!1,o=!1,c.hide(),d.show())}})))}function e(){var b=a(this).data("template-id"),d=a("#op_page_preset_option"),e="";i=b,0!==b?(d.val("content_layout"),a("#op_theme_type, #op_theme_id").remove()):(e='<input type="hidden" name="theme_type" id="op_theme_type" value="marketing" />',e+='<input type="hidden" name="theme_id" id="op_theme_id" value="'+a(this).data("themeId")+'" />',j.append(e),d.val("blank")),r="5",c(),a("#content_layout_id").val(b),a.fancybox(a("#op-content-preview-container"),n)}function f(b,c,d){return op_show_loading(),c&&""!==c?(g(c,d),!1):void a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-preview-content-layout",template:b},function(a){g(a)})}function g(b,c){OptimizePress.disable_alert=!0,a.fancybox({href:b},a.extend({},OptimizePress.fancybox_defaults,{autoSize:!1,type:c?"image":"iframe"})),op_hide_loading()}var h,i,j,k,l,m,n={padding:0,autoSize:!0,wrapCSS:"op-content-preview-container",keys:!1},o=!1,p=!1,q=!1,r="2";a(document).ready(function(){var c=a("body");k=a("#op_page_name"),l=a("#op_page_slug"),m=a("#op-create-page-btn"),j=a("#op_asset_browser_container"),c.on("click",".op-info-box-list-icons .op-icon",function(){var b=a(a(this).attr("href"));return b.length>0&&a("html, body").animate({scrollTop:b.offset().top},"normal"),!1}),c.on("click",".op-template-section-template-img-btn-alt",function(){var b=a(this);return f(b.data("template-id"),b.data("preview-url"),b.data("is-image")),!1}),c.on("click",".op-template-section-template-img-btn",e),c.on("click",".check-availability",function(a){o=!1,d(a)}),k.keyup(b).change(b),m.on("click",function(a){q=a.shiftKey?!0:!1});var g,h=a("#op-js-back-to-top"),i=a(window),n=0,s=0,t=!1;i.on("scroll",function(){return t?!1:(clearTimeout(g),s=i.scrollTop(),s>750&&n>s?h.addClass("op-getting-started-back-to-top--shown op-getting-started-back-to-top--pointer-events"):g=setTimeout(function(){h.removeClass("op-getting-started-back-to-top--shown"),setTimeout(function(){h.removeClass("op-getting-started-back-to-top--pointer-events")},400)},600),void(n=i.scrollTop()))}),c.on("click","#op-js-back-to-top",function(){return t=!0,a("html, body").animate({scrollTop:0},"normal",function(){t=!1}),h.removeClass("op-getting-started-back-to-top--shown"),!1}),j.submit(function(b){m.addClass("op-loading"),""==a.trim(k.val())?(alert(OptimizePress.getting_started.name_message),k.addClass("error").focus(),m.removeClass("op-loading"),b.preventDefault()):p?(k.removeClass("error"),a.ajax({type:"POST",url:j.attr("action"),data:j.serialize(),success:function(b){q?(window.location=OptimizePress.OP_PAGE_BUILDER_URL+"&step="+r+"&page_id="+b,a.fancybox.close(),op_show_loading()):(a.fancybox.close(),a.fancybox({type:"iframe",href:OptimizePress.OP_PAGE_BUILDER_URL+"&step="+r+"&page_id="+b},OptimizePress.fancybox_defaults)),m.removeClass("op-loading")}}),b.preventDefault()):(k.removeClass("error"),o=!0,d(b),b.preventDefault())}),a("#js-op-info-box-getting-started-link").on("click",function(){return a(this).parent().next().toggleClass("op-video-container--opened"),!1})}),window.op_refresh_content_layouts=function(){a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-getting-started-content-layouts",_wpnonce:a("#op_le_wpnonce").val()},function(b){a("#op_template_sections_container").html(b)})}}(opjq);