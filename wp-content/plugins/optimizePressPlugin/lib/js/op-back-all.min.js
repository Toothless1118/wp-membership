opjq(document).ready(function(a){var b=a('.op_live_editor .op-pagebuilder, .op_page_builder .op-pagebuilder,#toplevel_page_optimizepress a[href$="page=optimizepress-page-builder"],#op-pagebuilder-container a.op-pagebuilder, form.op-bsw-settings a.op-pagebuilder'),c=a("body"),d={width:"98%",height:"98%",padding:0,closeClick:!1,type:"iframe",helpers:{overlay:{closeClick:!1,showEarly:!1,css:{opacity:0},speedOut:200}},openEffect:"none",closeEffect:"fade",openSpeed:0,closeSpeed:200,openOpacity:!1,closeOpacity:!0,scrollOutside:!1,beforeLoad:function(){op_show_loading()},beforeShow:function(){OptimizePress.fancyboxBeforeShowAnimation(this)},afterShow:function(){op_hide_loading(),OptimizePress._pageRevisionsActive&&a(document).trigger("pageRevisionsFancyboxOpen")},beforeClose:function(){var a=!1;return OptimizePress.disable_alert||OptimizePress._pageRevisionsActive?(OptimizePress.fancyboxBeforeCloseAnimation(this),void(OptimizePress.disable_alert=!1)):(a=confirm(OptimizePress.pb_unload_alert),a&&OptimizePress.fancyboxBeforeCloseAnimation(this),a)},afterClose:function(){OptimizePress._pageRevisionsActive&&(OptimizePress._pageRevisionsActive=!1,a("#op-current-iframe").attr("src",""),a("#op-revisions-iframe").attr("src",""),a(document).off("pageRevisionsFancyboxOpen"),a(window).off("resize",OptimizePress._repositionRevisionsPopup)),a(window.parent.document).find(".fancybox-close").css({display:"block"}),window.location.pathname.indexOf("wp-admin/edit.php")>=0&&window.location.search.indexOf("post_type=page")>=0&&"undefined"!=typeof OptimizePress.reload_page&&OptimizePress.reload_page===!0&&setTimeout(function(){window.location=window.location.href},0)}};b.fancybox(d),"object"==typeof window.OptimizePress&&(window.OptimizePress.fancybox_defaults=d),a("body.widgets-php").find("#available-widgets #widget-list .widget .widget-description").each(function(){a(this).html(a(this).text())}),OptimizePress.fancyboxBeforeCloseAnimation=function(b){var c=a(".fancybox-overlay"),d=a(b.content||b.inner[0]).parentsUntil(".fancybox-wrap").parent();c.addClass("op-transform-fast"),d.addClass("op-transform-fast"),setTimeout(function(){d.css({transform:"translate3d(0,0,0) scale(0)"}),c.addClass("op-opacity-zero")},100)},OptimizePress.fancyboxBeforeShowAnimation=function(b){var c=a(".fancybox-overlay"),d=a(b.content||b.inner[0]).parentsUntil(".fancybox-wrap").parent();c.removeClass("op-transform-1 op-transform-1-end").addClass("op-transform-1-start"),d.removeClass("op-transform op-transform-end").addClass("op-transform-start"),setTimeout(function(){c.addClass("op-transform-1 op-transform-1-end"),d.addClass("op-transform op-transform-end")},100)},a.Deferred(function(b){a(b.resolve),a.ready.promise=b.promise}),a.ready.promise().done(function(){if(window.location.hash){var b=window.location.hash.split("--");$tab=a('.op-bsw-grey-panel-tabs a[href="'+b[0]+'"]'),$tab.length>0&&($tab.trigger("click"),2==b.length&&($provider=a(".tab-"+b[0].substring(1)+" .section-"+b[1]+" .op-bsw-grey-panel-header h3 a"),$provider.trigger("click")))}}),OptimizePress._pageRevisionsActive=!1,OptimizePress._repositionRevisionsPopup=function(){var b=a(".fancybox-outer"),c=b.height(),d=b.find("#op-revisions-dialog"),e=d.find("> h1").outerHeight(),f=d.find(".dialog-content"),g=parseInt(f.css("paddingTop"),10)+parseInt(f.css("paddingBottom"),10),h=d.find(".op-revisions-list"),i=f.find(".op-diff-th").outerHeight()+3;revisionsListHeight=h.outerHeight()+parseInt(h.css("marginBottom"),10),d.find(".op-diff").height(c-e-g-revisionsListHeight),d.find(".op-revisions-iframe").height(c-e-g-revisionsListHeight-i)},OptimizePress._initPageRevisions=function(b,d){var e={action:OptimizePress.SN+"-op_ajax_get_page_revisions",page_id:a("#page_id").val()||d.getAttribute("data-post_id")};OptimizePress._pageRevisionsActive=!0,"undefined"!=typeof op_show_loading&&op_show_loading(),a("#op-revisions-dialog").remove(),a.post(OptimizePress.ajaxurl,e,function(d){var e;c.append(d),OptimizePress._renderPageRevisions(b),e=a("#op-current-iframe"),e.attr("src",e.attr("data-src")),op_hide_loading()})},OptimizePress._renderPageRevisions=function(b){a(document).on("pageRevisionsFancyboxOpen",OptimizePress._repositionRevisionsPopup),a(document).on("pageRevisionsFancyboxOpen",function(){a(".op-revisions-iframe").each(function(){a(this).on("load",function(b){var c="op-revisions-iframe"===this.getAttribute("id")?"op-current-iframe":"op-revisions-iframe";a(b.target.contentWindow).on("scroll",function(){a(document.getElementById(c).contentWindow).scrollTop(a(this).scrollTop())})})})}),a(window).on("resize",OptimizePress._repositionRevisionsPopup),a.fancybox(a.extend({},b,{type:"inline",wrapCSS:"fancybox-revisions",href:"#op-revisions-dialog"})),OptimizePress.disable_alert=!1},c.on("click","#op-revisions-button",function(a){a.preventDefault(),OptimizePress._initPageRevisions(d,a.target)}),c.on("click",".op-revision-preview",function(b){b.preventDefault();var c=a(this).attr("href");a("#op-revisions-iframe").attr("src",c)}),c.on("change",".op-revisions-radio",function(b){b.preventDefault();var c=a(this).val();a("#op-revisions-dialog").find(".op-revisions-list-item").removeClass("op-revisions-list-item--selected"),a(this).parent().parent().addClass("op-revisions-list-item--selected"),a("#op-revisions-iframe").attr("src",c),a("#op-open-revision-new-tab").css({display:"inline"}).attr("href",c)}),c.on("click",".op-revision-restore",function(b){var c={action:OptimizePress.SN+"-restore-page-revision",postID:a(this).data("postid"),revisionID:a(this).data("revisionid")};b.preventDefault(),OptimizePress.disable_alert=!0,a.post(OptimizePress.ajaxurl,c,function(b){"undefined"!=typeof b.error?alert(b.error):(a.fancybox.close(),"undefined"!=typeof op_show_loading&&op_show_loading(),window.location.reload(!0))},"json")}),c.on("click",".op-disable-all-css, .op-disable-all-js",function(b){var c=a(this).attr("data-type"),d=a(this).closest("table.op-disable-compat").find("input[data-type="+c+"]");return"checked"===a(this).attr("checked")?(a(this).attr("checked",!1),d.attr("checked",!1)):(a(this).attr("checked",!0),d.attr("checked",!0)),!1}),function(){var b=a(".op-opleads-sitewide-section"),c=!1,d=a("#optimizeleads_sitewide_uid"),e=a("#optimizeleads_api_key");return!e.val()||e.hasClass("optimizeleads-api-key-error")?!1:b.length<1||d.length<1?!1:void b.prev().find(".show-hide-panel a").on("click",function(){b.is(":hidden")&&!c&&a.ajax({type:"POST",url:OptimizePress.ajaxurl,data:{action:OptimizePress.SN+"-get-optimizeleads-auto-boxes"},dataType:"json",success:function(b){var e="",f="",g=0;for(c=!0,g=0;g<b.length;g+=1)f=b[g].uid===d.attr("data-current-value")?' selected="selected" ':"",e+='<option value="'+b[g].uid+'"'+f+">"+b[g].title+"</option>";d.append(e),a("#optimizeleads-sitewide-options").removeClass("hidden"),a("#optimizeleads-sitewide-loader").addClass("hidden")}})})}(),function(a){var b=function(){YoastSEO.app.registerPlugin("OPYoastPlugin",{status:"loading"}),this.getData()};b.prototype.getData=function(){var b=this;if(b.custom_content="",0===a("#wp-content-editor-container").length){var c=a("#sample-permalink").find("a").attr("href");c.length>0&&a.ajax({url:c,dataType:"html",success:function(c){var d=a("<html />").html(c);b.custom_content=a(d).find("#content_area").html()}}),setTimeout(function(){YoastSEO.app.pluginReady("OPYoastPlugin"),YoastSEO.app.registerModification("content",a.proxy(b.getCustomContent,b),"OPYoastPlugin",5),YoastSEO.app.pluginReloaded("OPYoastPlugin")},500)}},b.prototype.getCustomContent=function(a){return this.custom_content+a},a(window).on("YoastSEO:ready",function(){new b})}(opjq)}),/*!
 * iButton jQuery Plug-in
 *
 * Copyright 2011 Giva, Inc. (http://www.givainc.com/labs/)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * 	http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Date: 2011-07-26
 * Rev:  1.0.03
 */
!function(a){a.iButton={version:"1.0.03",setDefaults:function(b){a.extend(d,b)}},a.fn.iButton=function(b){var d="string"==typeof arguments[0]&&arguments[0],e=d&&Array.prototype.slice.call(arguments,1)||arguments,f=0==this.length?null:a.data(this[0],"iButton");if(f&&d&&this.length){if("object"==d.toLowerCase())return f;if(f[d]){var g;return this.each(function(b){var c=a.data(this,"iButton")[d].apply(f,e);if(0==b&&c){if(!c.jquery)return g=c,!1;g=a([]).add(c)}else c&&c.jquery&&(g=g.add(c))}),g||this}return this}return this.each(function(){new c(this,b)})};var b=0;a.browser.iphone=navigator.userAgent.toLowerCase().indexOf("iphone")>-1;var c=function(c,g){var h=this,i=a(c),j=++b,k=!1,l={},m={dragging:!1,clicked:null},n={position:null,offset:null,time:null},g=a.extend({},d,g,a.metadata?i.metadata():{}),o=g.labelOn==e&&g.labelOff==f,p=":checkbox, :radio";if(!i.is(p))return i.find(p).iButton(g);if(!a.data(i[0],"iButton")){a.data(i[0],"iButton",h),"auto"==g.resizeHandle&&(g.resizeHandle=!o),"auto"==g.resizeContainer&&(g.resizeContainer=!o),this.toggle=function(a){var b=arguments.length>0?a:!i[0].checked;i.attr("checked",b).trigger("change")},this.disable=function(b){var c=arguments.length>0?b:!k;k=c,i.attr("disabled",c),q[c?"addClass":"removeClass"](g.classDisabled),a.isFunction(g.disable)&&g.disable.apply(h,[k,i,g])},this.repaint=function(){x()},this.destroy=function(){a([i[0],q[0]]).unbind(".iButton"),a(document).unbind(".iButton_"+j),q.after(i).remove(),a.data(i[0],"iButton",null),a.isFunction(g.destroy)&&g.destroy.apply(h,[i,g])},i.wrap('<div class="'+a.trim(g.classContainer+" "+g.className)+'" />').after('<div class="'+g.classHandle+'"><div class="'+g.classHandleRight+'"><div class="'+g.classHandleMiddle+'" /></div></div><div class="'+g.classLabelOff+'"><span><label>'+g.labelOff+'</label></span></div><div class="'+g.classLabelOn+'"><span><label>'+g.labelOn+'</label></span></div><div class="'+g.classPaddingLeft+'"></div><div class="'+g.classPaddingRight+'"></div>');var q=i.parent(),r=i.siblings("."+g.classHandle),s=i.siblings("."+g.classLabelOff),t=s.children("span"),u=i.siblings("."+g.classLabelOn),v=u.children("span");(g.resizeHandle||g.resizeContainer)&&(l.onspan=v.outerWidth(),l.offspan=t.outerWidth()),g.resizeHandle?(l.handle=Math.min(l.onspan,l.offspan),r.css("width",l.handle)):l.handle=r.width(),g.resizeContainer?(l.container=Math.max(l.onspan,l.offspan)+l.handle+20,q.css("width",l.container),s.css("width",l.container-5)):l.container=q.width();var w=l.container-l.handle-6,x=function(a){var b=i[0].checked,c=b?w:0,a=arguments.length>0?arguments[0]:!0;a&&g.enableFx?(r.stop().animate({left:c},g.duration,g.easing),u.stop().animate({width:c+4},g.duration,g.easing),v.stop().animate({marginLeft:c-w},g.duration,g.easing),t.stop().animate({marginRight:-c},g.duration,g.easing)):(r.css("left",c),u.css("width",c+4),v.css("marginLeft",c-w),t.css("marginRight",-c))};x(!1);var y=function(a){return a.pageX||(a.originalEvent.changedTouches?a.originalEvent.changedTouches[0].pageX:0)};q.bind("mousedown.iButton touchstart.iButton",function(b){return a(b.target).is(p)||k||!g.allowRadioUncheck&&i.is(":radio:checked")?void 0:(b.preventDefault(),m.clicked=r,n.position=y(b),n.offset=n.position-(parseInt(r.css("left"),10)||0),n.time=(new Date).getTime(),!1)}),g.enableDrag&&a(document).bind("mousemove.iButton_"+j+" touchmove.iButton_"+j,function(a){if(m.clicked==r){a.preventDefault();var b=y(a);b!=n.offset&&(m.dragging=!0,q.addClass(g.classHandleActive));var c=Math.min(1,Math.max(0,(b-n.offset)/w));return r.css("left",c*w),u.css("width",c*w+4),t.css("marginRight",-c*w),v.css("marginLeft",-(1-c)*w),!1}}),a(document).on("mouseup.iButton_"+j+" touchend.iButton_"+j,".ibutton-container",function(b){if(m.clicked!=r)return!1;b.preventDefault();var c=!0;if(!m.dragging||(new Date).getTime()-n.time<g.clickOffset){var d=i[0].checked;i.attr("checked",!d),a.isFunction(g.click)&&g.click.apply(h,[!d,i,g])}else{var e=y(b),f=(e-n.offset)/w,d=f>=.5;i[0].checked==d&&(c=!1),i.attr("checked",d)}return q.removeClass(g.classHandleActive),m.clicked=null,m.dragging=null,c?i.trigger("change"):x(),!1}),i.bind("change.iButton",function(){if(x(),i.is(":radio")){var b=i[0],c=a(b.form?b.form[b.name]:":radio[name="+b.name+"]");c.filter(":not(:checked)").iButton("repaint")}a.isFunction(g.change)&&g.change.apply(h,[i,g])}).bind("focus.iButton",function(){q.addClass(g.classFocus)}).bind("blur.iButton",function(){q.removeClass(g.classFocus)}),a.isFunction(g.click)&&i.bind("click.iButton",function(){g.click.apply(h,[i[0].checked,i,g])}),i.is(":disabled")&&this.disable(!0),a.browser.msie&&(q.find("*").andSelf().attr("unselectable","on"),i.bind("click.iButton",function(){i.triggerHandler("change.iButton")})),a.isFunction(g.init)&&g.init.apply(h,[i,g])}},d={duration:200,easing:"swing",labelOn:"ON",labelOff:"OFF",resizeHandle:"auto",resizeContainer:"auto",enableDrag:!0,enableFx:!0,allowRadioUncheck:!1,clickOffset:120,className:"",classContainer:"ibutton-container",classDisabled:"ibutton-disabled",classFocus:"ibutton-focus",classLabelOn:"ibutton-label-on",classLabelOff:"ibutton-label-off",classHandle:"ibutton-handle",classHandleMiddle:"ibutton-handle-middle",classHandleRight:"ibutton-handle-right",classHandleActive:"ibutton-active-handle",classPaddingLeft:"ibutton-padding-left",classPaddingRight:"ibutton-padding-right",init:null,change:null,click:null,disable:null,destroy:null},e=d.labelOn,f=d.labelOff}(opjq);var qq=qq||{};qq.extend=function(a,b){for(var c in b)a[c]=b[c]},qq.indexOf=function(a,b,c){if(a.indexOf)return a.indexOf(b,c);c=c||0;var d=a.length;for(0>c&&(c+=d);d>c;c++)if(c in a&&a[c]===b)return c;return-1},qq.getUniqueId=function(){var a=0;return function(){return a++}}(),qq.attach=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},qq.detach=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.attachEvent&&a.detachEvent("on"+b,c)},qq.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},qq.insertBefore=function(a,b){b.parentNode.insertBefore(a,b)},qq.remove=function(a){a.parentNode.removeChild(a)},qq.contains=function(a,b){return a==b?!0:a.contains?a.contains(b):!!(8&b.compareDocumentPosition(a))},qq.toElement=function(){var a=document.createElement("div");return function(b){return a.innerHTML=b,b=a.firstChild,a.removeChild(b),b}}(),qq.css=function(a,b){null!=b.opacity&&"string"!=typeof a.style.opacity&&"undefined"!=typeof a.filters&&(b.filter="alpha(opacity="+Math.round(100*b.opacity)+")"),qq.extend(a.style,b)},qq.hasClass=function(a,b){return RegExp("(^| )"+b+"( |$)").test(a.className)},qq.addClass=function(a,b){qq.hasClass(a,b)||(a.className+=" "+b)},qq.removeClass=function(a,b){a.className=a.className.replace(RegExp("(^| )"+b+"( |$)")," ").replace(/^\s+|\s+$/g,"")},qq.setText=function(a,b){a.innerText=b,a.textContent=b},qq.children=function(a){var b=[];for(a=a.firstChild;a;)1==a.nodeType&&b.push(a),a=a.nextSibling;return b},qq.getByClass=function(a,b){if(a.querySelectorAll)return a.querySelectorAll("."+b);for(var c=[],d=a.getElementsByTagName("*"),e=d.length,f=0;e>f;f++)qq.hasClass(d[f],b)&&c.push(d[f]);return c},qq.obj2url=function(a,b,c){var d=[],e="&",f=function(a,c){var e=b?/\[\]$/.test(b)?b:b+"["+c+"]":c;"undefined"!=e&&"undefined"!=c&&d.push("object"==typeof a?qq.obj2url(a,e,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(e)+"="+encodeURIComponent(a()):encodeURIComponent(e)+"="+encodeURIComponent(a))};if(!c&&b)e=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",d.push(b),d.push(qq.obj2url(a));else if("[object Array]"===Object.prototype.toString.call(a)&&"undefined"!=typeof a){var g=0;for(c=a.length;c>g;++g)f(a[g],g)}else if("undefined"!=typeof a&&null!==a&&"object"==typeof a)for(g in a)f(a[g],g);else d.push(encodeURIComponent(b)+"="+encodeURIComponent(a));return d.join(e).replace(/^&/,"").replace(/%20/g,"+")},qq=qq||{},qq.FileUploaderBasic=function(a){this._options={debug:!1,action:"/server/upload",params:{},button:null,multiple:!0,maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(a,b){},onProgress:function(a,b,c,d){},onComplete:function(a,b,c){},onCancel:function(a,b){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(a){alert(a)}},qq.extend(this._options,a),this._filesInProgress=0,this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._preventLeaveInProgress()},qq.FileUploaderBasic.prototype={setParams:function(a){this._options.params=a},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(a){var b=this;return new qq.UploadButton({element:a,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(a){b._onInputChange(a)}})},_createUploadHandler:function(){var a,b=this;return a=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm",new qq[a]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(a,c,d,e){b._onProgress(a,c,d,e),b._options.onProgress(a,c,d,e)},onComplete:function(a,c,d){b._onComplete(a,c,d),b._options.onComplete(a,c,d)},onCancel:function(a,c){b._onCancel(a,c),b._options.onCancel(a,c)}})},_preventLeaveInProgress:function(){var a=this;qq.attach(window,"beforeunload",function(b){return a._filesInProgress?(b=b||window.event,b.returnValue=a._options.messages.onLeave):void 0})},_onSubmit:function(a,b){this._filesInProgress++},_onProgress:function(a,b,c,d){},_onComplete:function(a,b,c){this._filesInProgress--,c.error&&this._options.showMessage(c.error)},_onCancel:function(a,b){this._filesInProgress--},_onInputChange:function(a){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(a.files):this._validateFile(a)&&this._uploadFile(a),this._button.reset()},_uploadFileList:function(a){for(var b=0;b<a.length;b++)if(!this._validateFile(a[b]))return;for(b=0;b<a.length;b++)this._uploadFile(a[b])},_uploadFile:function(a){a=this._handler.add(a);var b=this._handler.getName(a);!1!==this._options.onSubmit(a,b)&&(this._onSubmit(a,b),this._handler.upload(a,this._options.params))},_validateFile:function(a){var b,c;return a.value?b=a.value.replace(/.*(\/|\\)/,""):(b=null!=a.fileName?a.fileName:a.name,c=null!=a.fileSize?a.fileSize:a.size),this._isAllowedExtension(b)?0===c?(this._error("emptyError",b),!1):c&&this._options.sizeLimit&&c>this._options.sizeLimit?(this._error("sizeError",b),!1):c&&c<this._options.minSizeLimit?(this._error("minSizeError",b),!1):!0:(this._error("typeError",b),!1)},_error:function(a,b){var c=this._options.messages[a],d=this._formatFileName(b),c=c.replace("{file}",d),d=this._options.allowedExtensions.join(", "),c=c.replace("{extensions}",d),d=this._formatSize(this._options.sizeLimit),c=c.replace("{sizeLimit}",d),d=this._formatSize(this._options.minSizeLimit),c=c.replace("{minSizeLimit}",d);this._options.showMessage(c)},_formatFileName:function(a){return 33<a.length&&(a=a.slice(0,19)+"..."+a.slice(-13)),a},_isAllowedExtension:function(a){a=-1!==a.indexOf(".")?a.replace(/.*[.]/,"").toLowerCase():"";var b=this._options.allowedExtensions;if(!b.length)return!0;for(var c=0;c<b.length;c++)if(b[c].toLowerCase()==a)return!0;return!1},_formatSize:function(a){var b=-1;do a/=1024,b++;while(a>99);return Math.max(a,.1).toFixed(1)+"kB MB GB TB PB EB".split(" ")[b]}},qq.FileUploader=function(a){qq.FileUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>Drop files here to upload</span></div><div class="qq-upload-button">Upload a file</div><ul class="qq-upload-list"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"}}),qq.extend(this._options,a),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button=this._createUploadButton(this._find(this._element,"button")),this._bindCancelEvent(),this._setupDragDrop()},qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype),qq.extend(qq.FileUploader.prototype,{_find:function(a,b){var c=qq.getByClass(a,this._options.classes[b])[0];if(!c)throw Error("element not found "+b);return c},_setupDragDrop:function(){var a=this,b=this._find(this._element,"drop"),c=new qq.UploadDropZone({element:b,onEnter:function(c){qq.addClass(b,a._classes.dropActive),c.stopPropagation()},onLeave:function(a){a.stopPropagation()},onLeaveNotDescendants:function(c){qq.removeClass(b,a._classes.dropActive)},onDrop:function(c){b.style.display="none",qq.removeClass(b,a._classes.dropActive),a._uploadFileList(c.dataTransfer.files)}});b.style.display="none",qq.attach(document,"dragenter",function(a){c._isValidFileDrag(a)&&(b.style.display="block")}),qq.attach(document,"dragleave",function(a){c._isValidFileDrag(a)&&(a=document.elementFromPoint(a.clientX,a.clientY),a&&"HTML"!=a.nodeName||(b.style.display="none"))})},_onSubmit:function(a,b){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(a,b)},_onProgress:function(a,b,c,d){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var e=this._getItemByFileId(a),e=this._find(e,"size");e.style.display="inline";var f;f=c!=d?Math.round(100*(c/d))+"% from "+this._formatSize(d):this._formatSize(d),qq.setText(e,f)},_onComplete:function(a,b,c){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var d=this._getItemByFileId(a);qq.remove(this._find(d,"cancel")),qq.remove(this._find(d,"spinner")),c.success?qq.addClass(d,this._classes.success):qq.addClass(d,this._classes.fail)},_addToList:function(a,b){var c=qq.toElement(this._options.fileTemplate);c.qqFileId=a;var d=this._find(c,"file");qq.setText(d,this._formatFileName(b)),this._find(c,"size").style.display="none",this._listElement.appendChild(c)},_getItemByFileId:function(a){for(var b=this._listElement.firstChild;b;){if(b.qqFileId==a)return b;b=b.nextSibling}},_bindCancelEvent:function(){var a=this;qq.attach(this._listElement,"click",function(b){b=b||window.event;var c=b.target||b.srcElement;qq.hasClass(c,a._classes.cancel)&&(qq.preventDefault(b),b=c.parentNode,a._handler.cancel(b.qqFileId),qq.remove(b))})}}),qq.UploadDropZone=function(a){this._options={element:null,onEnter:function(a){},onLeave:function(a){},onLeaveNotDescendants:function(a){},onDrop:function(a){}},qq.extend(this._options,a),this._element=this._options.element,this._disableDropOutside(),this._attachEvents()},qq.UploadDropZone.prototype={_disableDropOutside:function(a){qq.UploadDropZone.dropOutsideDisabled||(qq.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var a=this;qq.attach(a._element,"dragover",function(b){if(a._isValidFileDrag(b)){var c=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"==c||"linkMove"==c?"move":"copy",b.stopPropagation(),b.preventDefault()}}),qq.attach(a._element,"dragenter",function(b){a._isValidFileDrag(b)&&a._options.onEnter(b)}),qq.attach(a._element,"dragleave",function(b){if(a._isValidFileDrag(b)){a._options.onLeave(b);var c=document.elementFromPoint(b.clientX,b.clientY);qq.contains(this,c)||a._options.onLeaveNotDescendants(b)}}),qq.attach(a._element,"drop",function(b){a._isValidFileDrag(b)&&(b.preventDefault(),a._options.onDrop(b))})},_isValidFileDrag:function(a){a=a.dataTransfer;var b=-1<navigator.userAgent.indexOf("AppleWebKit");return a&&"none"!=a.effectAllowed&&(a.files||!b&&a.types.contains&&a.types.contains("Files"))}},qq.UploadButton=function(a){this._options={element:null,multiple:!1,name:"file",onChange:function(a){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},qq.extend(this._options,a),this._element=this._options.element,qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"}),this._input=this._createInput()},qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input),qq.removeClass(this._element,this._options.focusClass),this._input=this._createInput()},_createInput:function(){var a=document.createElement("input");this._options.multiple&&a.setAttribute("multiple","multiple"),a.setAttribute("type","file"),a.setAttribute("name",this._options.name),qq.css(a,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(a);var b=this;return qq.attach(a,"change",function(){b._options.onChange(a)}),qq.attach(a,"mouseover",function(){qq.addClass(b._element,b._options.hoverClass)}),qq.attach(a,"mouseout",function(){qq.removeClass(b._element,b._options.hoverClass)}),qq.attach(a,"focus",function(){qq.addClass(b._element,b._options.focusClass)}),qq.attach(a,"blur",function(){qq.removeClass(b._element,b._options.focusClass)}),window.attachEvent&&a.setAttribute("tabIndex","-1"),a}},qq.UploadHandlerAbstract=function(a){this._options={debug:!1,action:"/upload.php",maxConnections:999,onProgress:function(a,b,c,d){},onComplete:function(a,b,c){},onCancel:function(a,b){}},qq.extend(this._options,a),this._queue=[],this._params=[]},qq.UploadHandlerAbstract.prototype={log:function(a){this._options.debug&&window.console&&console.log("[uploader] "+a)},add:function(a){},upload:function(a,b){var c=this._queue.push(a),d={};qq.extend(d,b),this._params[a]=d,c<=this._options.maxConnections&&this._upload(a,this._params[a])},cancel:function(a){this._cancel(a),this._dequeue(a)},cancelAll:function(){for(var a=0;a<this._queue.length;a++)this._cancel(this._queue[a]);this._queue=[]},getName:function(a){},getSize:function(a){},getQueue:function(){return this._queue},_upload:function(a){},_cancel:function(a){},_dequeue:function(a){a=qq.indexOf(this._queue,a),this._queue.splice(a,1);var b=this._options.maxConnections;this._queue.length>=b&&b>a&&(a=this._queue[b-1],this._upload(a,this._params[a]))}},qq.UploadHandlerForm=function(a){qq.UploadHandlerAbstract.apply(this,arguments),this._inputs={}},qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerForm.prototype,{add:function(a){a.setAttribute("name","qqfile");var b="qq-upload-handler-iframe"+qq.getUniqueId();return this._inputs[b]=a,a.parentNode&&qq.remove(a),b},getName:function(a){return this._inputs[a].value.replace(/.*(\/|\\)/,"")},_cancel:function(a){this._options.onCancel(a,this.getName(a)),delete this._inputs[a],(a=document.getElementById(a))&&(a.setAttribute("src","javascript:false;"),qq.remove(a))},_upload:function(a,b){var c=this._inputs[a];if(!c)throw Error("file with passed id was not added, or already uploaded or cancelled");var d=this.getName(a),e=this._createIframe(a),f=this._createForm(e,b);f.appendChild(c);var g=this;return this._attachLoadEvent(e,function(){g.log("iframe loaded");var b=g._getIframeContentJSON(e);g._options.onComplete(a,d,b),g._dequeue(a),delete g._inputs[a],setTimeout(function(){qq.remove(e)},1)}),f.submit(),qq.remove(f),a},_attachLoadEvent:function(a,b){qq.attach(a,"load",function(){a.parentNode&&(a.contentDocument&&a.contentDocument.body&&"false"==a.contentDocument.body.innerHTML||b())})},_getIframeContentJSON:function(a){a=a.contentDocument?a.contentDocument:a.contentWindow.document;var b;this.log("converting iframe's innerHTML to JSON"),this.log("innerHTML = "+a.body.innerHTML);try{b=eval("("+a.body.innerHTML+")")}catch(c){b={}}return b},_createIframe:function(a){var b=qq.toElement('<iframe src="javascript:false;" name="'+a+'" />');return b.setAttribute("id",a),b.style.display="none",document.body.appendChild(b),b},_createForm:function(a,b){var c=qq.toElement('<form method="post" enctype="multipart/form-data"></form>'),d=qq.obj2url(b,this._options.action);return c.setAttribute("action",d),c.setAttribute("target",a.name),c.style.display="none",document.body.appendChild(c),c}}),qq.UploadHandlerXhr=function(a){qq.UploadHandlerAbstract.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},qq.UploadHandlerXhr.isSupported=function(){var a=document.createElement("input");return a.type="file","multiple"in a&&"undefined"!=typeof File&&"undefined"!=typeof(new XMLHttpRequest).upload},qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerXhr.prototype,{add:function(a){if(!(a instanceof File))throw Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(a)-1},getName:function(a){return a=this._files[a],null!=a.fileName?a.fileName:a.name},getSize:function(a){return a=this._files[a],null!=a.fileSize?a.fileSize:a.size},getLoaded:function(a){return this._loaded[a]||0},_upload:function(a,b){var c=this._files[a],d=this.getName(a);this.getSize(a),this._loaded[a]=0;var e=this._xhrs[a]=new XMLHttpRequest,f=this;e.upload.onprogress=function(b){b.lengthComputable&&(f._loaded[a]=b.loaded,f._options.onProgress(a,d,b.loaded,b.total))},e.onreadystatechange=function(){4==e.readyState&&f._onComplete(a,e)},b=b||{},b.qqfile=d;var g=qq.obj2url(b,this._options.action);e.open("POST",g,!0),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("X-File-Name",encodeURIComponent(d)),e.setRequestHeader("Content-Type","application/octet-stream"),e.send(c)},_onComplete:function(a,b){if(this._files[a]){var c=this.getName(a),d=this.getSize(a);if(this._options.onProgress(a,c,d,d),200==b.status){this.log("xhr - server response received"),this.log("responseText = "+b.responseText);var e;try{e=eval("("+b.responseText+")")}catch(f){e={}}this._options.onComplete(a,c,e)}else this._options.onComplete(a,c,{});this._files[a]=null,this._xhrs[a]=null,this._dequeue(a)}},_cancel:function(a){this._options.onCancel(a,this.getName(a)),this._files[a]=null,this._xhrs[a]&&(this._xhrs[a].abort(),this._xhrs[a]=null)}}),function(a){function b(){a("a.op-help-vid").each(function(){var b=a(this),c=parseInt(b.attr("data-width"),10),d=parseInt(b.attr("data-height"),10);b.on("click",function(e){e.preventDefault(),a("#op-video-help").length<1&&a("body").append('<div id="op-video-help"></div>'),a("#op-video-help").html('<video src="'+b.attr("href")+'" width="'+c+'" height="'+d+'" controls></video>'),a.fancybox.open({padding:0,autoSize:!1,keys:!1,openEffect:"none",closeEffect:"fade",openSpeed:0,closeSpeed:200,openOpacity:!0,closeOpacity:!0,scrollOutside:!1,width:c,height:d,href:"#op-video-help",beforeClose:function(){OptimizePress.fancyboxBeforeCloseAnimation(this),a("#op-video-help").find("video")[0].pause()},beforeShow:function(){OptimizePress.fancyboxBeforeShowAnimation(this),a("#op-video-help").find("video")[0].play()}})})})}function c(){var b=900,c=10;"undefined"!=typeof op_footer_prefs&&(b=op_footer_prefs.full_width||b,c=op_footer_prefs.column_margin||c),a(".img-radio-selector.footer-columns :radio").change(function(){var d=a(this),e=d.val(),f=d.closest(".op-bsw-grey-panel-content").find(".column-container");if(d.is(":checked"))if(e>1){var g=Math.floor(b-(e-1)*c),h=Math.floor(g/e);f.show(),f=f.find(".column-editor").find("div").hide().end(),e++;for(var i=1;e>i;i++){var j=f.find("div.width-"+i).show().find(":input"),k=j.val();(""==k||y)&&j.val(h)}}else f.css("display","none")})}function d(b){var c,d,e=a(b),f='<ul><li><a href="#">Theme Default</a></li></ul>';return 0==e.length?!1:(e.filter(":first").find("optgroup").each(function(){f+="<p>"+a(this).attr("label")+"</p><ul>",a(this).find("option").each(function(){d=a(this).val(),c=d.replace(/\s+/g,"-").toLowerCase(),f+='<li><a href="#"><span class="op-font op-font-'+c+'" data-font="'+d+'" alt="'+d+'" ></span></a></li>'}),f+="</ul>"}),f='<div class="select-font"><a href="#" class="selected-font">Theme Default</a><div class="font-dropdown">'+f+"</div></div>",e.change(function(){var b=a(this),c=b.val(),d=b.siblings(".select-font");d=""==c?d.find("li a:first"):d.find('li a .op-font[alt="'+c+'"]'),d.trigger("click")}),void e.each(function(){a(this).hide().after(f).siblings(".select-font").find('li .op-font[alt="'+a(this).val()+'"]').parent().trigger("click")}))}function e(){var b=a("body");b.on("click",".selected-font",function(b){a(this).closest(".select-font").find(".font-dropdown").toggle(),b.preventDefault()}),b.on("click",".select-font li a",function(b){var c=a(this),d=c.find(".op-font"),e="";d.length>0&&(e=d.attr("data-font")),c.closest(".select-font").find(".font-dropdown").hide().end().siblings(".font-selector").val(e).end().find(".selected-font").html(c.html()),b.preventDefault()}),b.on("click",'a[href$="#reset"]',function(b){a(this).parent().find(":input").focus().blur().val("").trigger("change").end().find(".op-asset-dropdown-list a:first").trigger("click"),a(this).prev().find(".pick-color").length>0&&a("#op-color-picker-1").data("openedColorPicker",!1),b.preventDefault()}),d(".font-selector")}function f(){a("select.style-selector").next().find("a.selected-item").click(function(b){a(this).next().toggle(),b.preventDefault()}).next().find("li a").click(function(b){var c=a(this);b.preventDefault(),A=!0;var d=a(this).closest(".op-asset-dropdown").find("li.selected").removeClass("selected").end().find("a.selected-item").html(c.html()).next().hide().end().end().prev().val(c.find("img").attr("alt"));c.parent().addClass("selected"),y&&d.trigger("change"),A=!1}).end().end().end().end().change(function(){A===!1&&a(this).next().find('li img[alt="'+a(this).val()+'"]').trigger("click")}).trigger("change")}function g(){a(".slider-item").each(function(b,c){var d=a(c).closest(".submit-button-container").attr("id");a(c).slider({disabled:"true"==a(c).attr("data-disabled")?!0:!1,min:parseInt(a(c).attr("data-min")),max:parseInt(a(c).attr("data-max")),value:parseInt(a(c).attr("data-value")),stop:function(b,c){var e;e="undefined"!=typeof c.handle?a(c.handle).parent().attr("id"):c.id,a.event.trigger({type:"update_button_preview",value:c.value,id:e,owner:d,element_type:"slider",element:c})},slide:function(b,c){var e,f,g="";e="undefined"!=typeof c.handle?a(c.handle).parent().attr("id"):c.id,f=a(d?"#"+d+" #output_"+e:"#output_"+e),g=f.attr("data-unit")||"",f.length>0&&f.html(""+c.value+g),d?a("#"+d+" #input_"+e).val(c.value):a("#input_"+e).val(c.value)}})})}function h(){var b=a("body");0==a("#op-color-picker-1").length&&b.append('<div id="op-color-picker-1" />');var c,d=a("#op-color-picker-1");w=a.farbtastic("#op-color-picker-1",j),b.on("focus",".color-picker-container input",function(){c=a(this),a(this).next().trigger("click")}),b.on("blur",".color-picker-container input",function(){d.hide(),a("#op-color-picker-1").data("openedColorPicker",!1)}),b.on("change",".color-picker-container input",function(){var b=a(this),e=k(b.val());b||(b=c),b.data("cp_link").css("background-color","#"==e?"transparent":e),e="#"===e?"":e,x&&x[1]&&a(x[1]).is(":visible")&&j(e),d.is(":visible")&&"#"!=e&&w.setColor(e)}),a(".color-picker-container input").each(function(){var b=a(this).siblings("a.pick-color");b.data("input",a(this)),a(this).data("cp_link",b).data("cp_link").css("background-color",k(a(this).val()))}),b.on("click","a.pick-color",function(b){x=[a(this),a(this).data("input")],d.data("openedColorPicker")&&x[1].attr("name")===d.data("openedColorPicker")?d.data("openedColorPicker",!1):(j(x[1].val()),d.position({of:x[0],my:"left top",at:"center center"}).show(),d.data("openedColorPicker",x[1].attr("name"))),b.preventDefault()})}function i(b){a(b).find(".color-picker-container :input").each(function(){var b=a(this).siblings("a.pick-color");b.data("input",a(this)),a(this).data("cp_link",b).data("cp_link").css("background-color",k(a(this).val()))})}function j(b){w.setColor(b),x[1].val(b),x[0].css("background-color",b),a.event.trigger({type:"update_button_preview",id:x[1].attr("id"),owner:x[1].closest(".submit-button-container").attr("id"),value:b})}function k(a){return"#"+a.replace(/[^a-fA-F0-9]/,"")}function l(){"undefined"!=typeof op_color_schemes&&a('.section-color_scheme .color-schemes .img-radio-item input[type="radio"]').change(function(){var b=op_color_schemes[a(this).val()].colors||{};a.each(b,function(b,c){var d=a("#op_sections_color_scheme_field_"+b);(""!=d.val()&&y||""==d.val())&&d.val(c).trigger("change")})}).filter(":checked").trigger("change")}function m(){var b=a(".column-layout .column-container"),c=a(".column-layout .column-editor");a(".column-layout :radio").change(function(){var d={},e=a(this).val();if("undefined"!=typeof op_column_widths.widths[e]){b.show(),d=op_column_widths.widths[e],c.find("div").hide();var f,g,h,i=null;a.each(d,function(a,b){f=c.find("div.width-"+a),0==f.length&&(null!==i?g.after(n(a,b.title)):c.prepend(n(a,b.title))),i=a,f=c.find("div.width-"+a),g=f,f.show(),h=f.find(":input"),(""==h.val()||y)&&h.val(b.width)})}else b.hide()}).filter(":checked").trigger("change")}function n(a,b){var c="op_sections_column_layout_widths_"+a;return'<p class="width-'+a+'"><label for="'+c+'">'+b+'</label><input type="text" name="op[sections][column_layout][widths]['+a+']" id="'+c+'" /></p>'}function o(){a(".op-bsw-blog-enabler").iButton({change:function(b){var c=b.closest("p").find(".op-bsw-waiting");c.fadeIn("fast"),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-enable-blog",enabled:b.is(":checked")?"Y":"N",_wpnonce:a("#_wpnonce").val()},function(a){c.fadeOut("fast"),"undefined"!=typeof a.error&&alert(a.errror)},"json")}})}function p(){a("body").on("click",'.op-multirow .file-preview a[href$="#remove"]',function(b){var c=a(this),d=c.parent(),e=d.find(".op-removefile");0==e.length&&(e=c.closest(".op-type").find(".op-removefile")),e.val("Y"),d.hide(),b.preventDefault()}),a("body").on("click",".op-multirow .add-new-row",function(b){var c=a(this).closest(".op-multirow"),d=c.find(".op-multirow-list"),e=d.find("> li"),f=c.find(".op-max-entries"),g=!1;f.length>0&&e.length<f.val()&&(g=!0),0==f.length&&(g=!0),g&&(e.filter(":first").clone().find(".op-multirow-remove").remove().end().find(":input").val("").end().appendTo(d).find(".op-type-switcher").trigger("change"),d.find('> li:last .file-preview a[href$="#remove"]').trigger("click")),b.preventDefault()}),a("body").on("click",".op-multirow .op-multirow-controls a",function(b){var c=a(this).attr("href").split("#")[1],d=a(this).closest(".op-multirow-list").find("> li"),e=a(this).closest(".op-multirow-list > li"),f=d.index(e);switch(c){case"move-up":f>0&&u(e,"prev");break;case"move-down":f<d.length-1&&u(e,"next");break;case"remove":d.length>1?e.remove():e.find(":input").val("").trigger("change").end().find(".op-multirow-remove").remove()}b.preventDefault()})}function q(){a("ul.op-bsw-grey-panel-tabs").op_tabs()}function r(){a("body").on("change",'.img-radio-selector input[type="radio"]',function(){"alongside"===a(this).val()?(a(".op-header-layout-alongside").show(),a(".op-header-layout-below").hide()):"below"===a(this).val()&&(a(".op-header-layout-alongside").hide(),a(".op-header-layout-below").show()),a(this).closest(".img-radio-selector").parent().find(".img-radio-selected").removeClass("img-radio-selected"),a(this).closest(".img-radio-item").addClass("img-radio-selected")}),a("body").on("click",".img-radio-label",function(){
a(this).closest(".img-radio-item").find(":radio").attr("checked",!0).trigger("change")}),a(".img-radio-selector.menu-position .img-radio-selected .img-radio-label").trigger("click")}function s(b){var b=b||"#not-existent-div";a(b).iButton({change:function(a){var b=a.closest(".op-bsw-grey-panel"),c=b.find(".op-bsw-grey-panel-content:first"),d=b.find(".show-hide-panel a:first"),e=c.is(":visible"),f=a.is(":checked");!e&&f===!0&&d.trigger("click"),e&&f===!1&&d.trigger("click")}})}function t(){s(".panel-controlx:not(.op-bsw-blog-enabler):not(.op-disable-ibutton-load)"),a("body").on("click",".op-bsw-grey-panel-header h3 a",function(b){b.preventDefault(),a(this).closest("div").find(".show-hide-panel a").trigger("click")}),a("body").on("click",".show-hide-panel a",function(b){b.preventDefault();var c=a(this),d="addClass",e="show",f=c.closest(".op-bsw-grey-panel"),g=f.find(".op-bsw-grey-panel-content:first");g.is(":visible")&&(d="removeClass",e="hide"),c[d]("op-bsw-visible"),g[e](),"show"==e&&f.find(".op-type-switcher").trigger("change"),f.find(".op-bsw-grey-panel-hide")[e]()}),a(".op-bsw-grey-panel.has-error .show-hide-panel a").trigger("click")}function u(b,c){var d=b.clone(!0);d.find(":input").each(function(c){a(this).val(b.find(":input:eq("+c+")").val())}),b[c]()["next"==c?"after":"before"](d),b.remove()}function v(){a("body").on("click",".op-file-uploader a.button",function(b){b.preventDefault(),z=[a(this).next()];var c=z[0].parent();z.push(c.find(".file-preview")),z.push(c.find(".op-uploader-path"))}),a("body").on("click",".op-file-uploader a.remove-file",function(b){b.preventDefault(),a(this).closest(".content").html("").parent().prev().val(""),a.isFunction(a.fancybox.update)&&a.fancybox.update()})}var w,x,y=!1,z=null,A=!1;a(document).ready(function(){function d(b){return b?void b.find(".op-asset-dropdown-list-item:not(.op-asset-dropdown-list-item--loaded)").find("img").one("load",function(){a(this).parent().addClass("op-asset-img-loaded").parent().addClass("op-asset-dropdown-list-item--loaded")}).each(function(){this.complete&&a(this).load()}):!1}function d(b){return b?void b.find(".op-asset-dropdown-list-item:not(.op-asset-dropdown-list-item--loaded)").find("img").one("load",function(){a(this).parent().addClass("op-asset-img-loaded").parent().addClass("op-asset-dropdown-list-item--loaded")}).each(function(){this.complete&&a(this).load()}):!1}var i=a("body");i.on("change",".op-type-switcher:visible",function(){a(this).closest(".op-type-switcher-container").find(".op-type:first").hide().siblings(".op-type").hide().end().end().find(".op-type-"+a(this).val()).show().find(".op-bsw-grey-panel-content:not(:visible)").show().end().find(".op-type-switcher:visible").trigger("change")}).trigger("change"),i.on("click",".op-notify",function(b){var c,d,e=a(b.target),f=2;e.is("a")||(a(this).fadeThenSlideToggle(),e.hasClass("op-notify-close")&&a(this).hasClass("js-remember-choice")&&(c=new Date,c.setTime(c.getTime()+24*f*60*60*1e3),d="; expires="+c.toGMTString(),document.cookie=a(this).attr("id")+"=notification_hidden"+d+"; path=/"),b.preventDefault())}),a(".default-val-link").click(function(b){var c=a(this).attr("href").split("#")[1];a("#"+c).val(a("#"+c+"_default").val()),b.preventDefault()}),a(document).mousedown(function(b){a(b.target).hasClass("pick-color")||a(b.target).next().hasClass("pick-color")||a("#op-color-picker-1").hide().data("openedColorPicker",!1),a("#op-color-picker-1").css({top:"auto",left:"auto",display:"none"}),0==a(b.target).closest(".select-font").length&&a(".font-dropdown").hide(),0==a(b.target).closest(".op-asset-dropdown-list").length&&a(".op-asset-dropdown-list:not(.op-disable-selected .op-asset-dropdown-list)").hide()}),a(".img-radio-selector.menu-position :radio").change(function(){var b=a(this),c="hide",d=b.closest(".op-bsw-grey-panel-content");"undefined"!=typeof op_menu_link_colors&&"undefined"!=typeof op_menu_link_colors[b.val()]&&(c="show"),d.find(".layout-settings").hide(),d.find("#layout-settings-"+b.val()).show()}),a("a.fancybox").fancybox({openEffect:"elastic",openOpacity:!1,beforeShow:function(){a("html").css({overflow:"hidden",height:"100%"}),a(window.parent.document).find(".fancybox-close").css({display:"none"})},afterClose:function(){a("html").css({overflow:"auto",height:"auto"}),a(window.parent.document).find(".fancybox-close").css({display:"block"})}}),c(),t(),r(),l(),q(),p(),o(),m(),h(),g(),e(),v(),f(),b(),y=!0,a(".op-js-item-layout-delete").click(function(){var b=a(this);return a.ajax({type:"POST",url:OptimizePress.ajaxurl,data:{action:OptimizePress.SN+"-content-layout-delete",layout:b.attr("data-id"),nonce:b.attr("data-nonce")},success:function(a){"boolean"==typeof a.success&&a.success===!0?b.parent().remove():alert("Error occured!")},dataType:"json"}),!1}),d(a("#op_sidebar_optin_submit_button")),d(a("#op_home_feature_video_optin_submit_button_button_type_container")),d(a("#op_home_feature_image_hover_optin_submit_button")),d(a("#op_home_feature_video_optin_submit_button")),d(a("#op_sidebar_optin_submit_button")),d(a("#op_home_feature_video_optin_submit_button_button_type_container")),d(a("#op_home_feature_image_hover_optin_submit_button"))}),OptimizePress.generate_font_pickers=d,OptimizePress.init_hidden_color_pickers=i,OptimizePress.init_hidden_ibuttons=s,OptimizePress.init_hidden_panels=t,a.fn.fadeThenSlideToggle=function(a,b,c){return this.is(":hidden")?this.slideDown(a,b).fadeTo(a,1,b,c):this.fadeTo(a,0,b).slideUp(a,b,c)},OptimizePress.arrayObjectDifference=function(a,b){for(var c=0;c<a.length;c++)a[c]in b&&delete b[a[c]],decodeURI(a[c])in b&&delete b[decodeURI(a[c])];return b},window.op_attach_file=function(){if(null!==z){tb_remove();var b=z[1].find(".content").html(""),c=z[1].find(".op-show-waiting").fadeIn("fast"),d={action:OptimizePress.SN+"-file-attachment",attach_type:arguments[0]};"url"==arguments[0]?d.media_url=arguments[1]:(d.media_item=arguments[1],d.media_size=arguments[2]),a.post(OptimizePress.ajaxurl,d,function(d){c.fadeOut("fast",function(){z[2].length>0&&z[2].val(d.file),z[0].val(d.url).trigger("change");var c=a(d.html),e=c.find("img");e.length>0&&e.load(function(){a(window).trigger("resize")}),b.html(c).fadeIn("fast")})},"json")}},window.op_wpautop=function(a){var b="table|thead|tfoot|tbody|tr|td|th|caption|col|colgroup|div|dl|dd|dt|ul|ol|li|pre|select|form|blockquote|address|math|p|h[1-6]|fieldset|legend|hr|noscript|menu|samp|header|footer|article|section|hgroup|nav|aside|details|summary";return a?(a=a.replace(/(\r\n|\n)([\&nbsp\;|\s])(\r\n|\n)/g,"<p>&nbsp;</p>"),-1!=a.indexOf("<object")&&(a=a.replace(/<object[\s\S]+?<\/object>/g,function(a){return a.replace(/[\r\n]+/g,"")})),a=a.replace(/<[^<>]+>/g,function(a){return a.replace(/[\r\n]+/g," ")}),(-1!=a.indexOf("<pre")||-1!=a.indexOf("<script"))&&(a=a.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(a){return a.replace(/(\r\n|\n)/g,"<wp_temp_br>")})),a+="\n\n",a=a.replace(/<br \/>\s*<br \/>/gi,"\n\n"),a=a.replace(new RegExp("(<(?:"+b+")(?: [^>]*)?>)","gi"),"\n$1"),a=a.replace(new RegExp("(</(?:"+b+")>)","gi"),"$1\n\n"),a=a.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),a=a.replace(/\r\n|\r/g,"\n"),a=a.replace(/\n\s*\n+/g,"\n\n"),a=a.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),a=a.replace(/<p>\s*?<\/p>/gi,""),a=a.replace(new RegExp("<p>\\s*(</?(?:"+b+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),a=a.replace(/<p>(<li.+?)<\/p>/gi,"$1"),a=a.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),a=a.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),a=a.replace(new RegExp("<p>\\s*(</?(?:"+b+")(?: [^>]*)?>)","gi"),"$1"),a=a.replace(new RegExp("(</?(?:"+b+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),a=a.replace(/\s*\n/gi,"<br />\n"),a=a.replace(new RegExp("(</?(?:"+b+")[^>]*>)\\s*<br />","gi"),"$1"),a=a.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),a=a.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),a=a.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(a,b,c){return c.match(/<p( [^>]*)?>/)?a:b+"<p>"+c+"</p>"}),a=a.replace(/<wp_temp_br>/g,"\n")):""},window.op_unautop=function(a){var b,c;return(-1!=a.indexOf("<pre")||-1!=a.indexOf("<script"))&&(a=a.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(a){return a=a.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp_temp>"),a.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp_temp>")})),a=a.replace(/<p>\s*<\/p>/g,"<op_temp>"),a=a.replace(/<p>\s*<br ?\/?>/g,"<op_temp>"),b="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|div|h[1-6]|p|fieldset",a=a.replace(new RegExp("\\s*</("+b+")>\\s*","g"),"</$1>\n"),a=a.replace(new RegExp("\\s*<((?:"+b+")(?: [^>]*)?)>","g"),"\n<$1>"),a=a.replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>"),a=a.replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n"),a=a.replace(/\s*<p>/gi,""),a=a.replace(/\s*<\/p>\s*/gi,"\n\n"),a=a.replace(/\n[\s\u00a0]+\n/g,"\n\n"),a=a.replace(/\s*<br ?\/?>\s*/gi,"\n"),a=a.replace(/\s*<div/g,"\n<div"),a=a.replace(/<\/div>\s*/g,"</div>\n"),a=a.replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n"),a=a.replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption"),c="blockquote|ul|ol|li|table|thead|tbody|tfoot|tr|th|td|h[1-6]|pre|fieldset",a=a.replace(new RegExp("\\s*<((?:"+c+")(?: [^>]*)?)\\s*>","g"),"\n<$1>"),a=a.replace(new RegExp("\\s*</("+c+")>\\s*","g"),"</$1>\n"),a=a.replace(/<li([^>]*)>/g,"	<li$1>"),-1!=a.indexOf("<hr")&&(a=a.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!=a.indexOf("<object")&&(a=a.replace(/<object[\s\S]+?<\/object>/g,function(a){return a.replace(/[\r\n]+/g,"")})),a=a.replace(/<\/p#>/g,"</p>\n"),a=a.replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1"),a=a.replace(/^\s+/,""),a=a.replace(/[\s\u00a0]+$/,""),a=a.replace(/<wp_temp>/g,"\n"),a=a.replace(/<op_temp>/g,"<p>&nbsp;</p>")},a.fn.op_tabs=function(){return this.each(function(){var b="op-bsw-grey-panel-tabs-selected",c=a(this).find("li").find("a").off().click(function(c){var d=a(this).attr("href").split("#")[1];a(this).parent().parent().find("."+b).removeClass(b).end().end().addClass(b).closest(".op-bsw-grey-panel-content").find("> .op-bsw-grey-panel-tab-content-container").find("> .op-bsw-grey-panel-tab-content:visible").hide().end().find("> .tab-"+d).show().find(".op-type-switcher").trigger("change"),c.preventDefault()}).end(),d=c.filter(".has-error").length>0?c.filter(".has-error:first"):c.filter(":first");d.find("a:first").trigger("click")})},window.hexToRgb=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},window.generateCssColor=function(a,b){return 100!=b?(a=hexToRgb(a),a?"rgba("+a.r+", "+a.g+", "+a.b+", "+parseFloat(b/100)+")":a):a},window.op_decodeURIComponent=function(a){var b;try{b=decodeURIComponent(a||"")}catch(c){b=a||""}return b},window.b64ToUint6=function(a){return a>64&&91>a?a-65:a>96&&123>a?a-71:a>47&&58>a?a+4:43===a?62:47===a?63:0},window.base64DecToArr=function(a,b){for(var c,d,a=a||"",e=a.replace(/[^A-Za-z0-9\+\/]/g,""),f=e.length,g=b?Math.ceil((3*f+1>>2)/b)*b:3*f+1>>2,h=new Uint8Array(g),i=0,j=0,k=0;f>k;k++)if(d=3&k,i|=b64ToUint6(e.charCodeAt(k))<<18-6*d,3===d||f-k===1){for(c=0;3>c&&g>j;c++,j++)h[j]=i>>>(16>>>c&24)&255;i=0}return h},window.uint6ToB64=function(a){return 26>a?a+65:52>a?a+71:62>a?a-4:62===a?43:63===a?47:65},window.base64EncArr=function(a){for(var b=2,c="",d=a.length,e=0,f=0;d>f;f++)b=f%3,e|=a[f]<<(16>>>b&24),(2===b||a.length-f===1)&&(c+=String.fromCharCode(uint6ToB64(e>>>18&63),uint6ToB64(e>>>12&63),uint6ToB64(e>>>6&63),uint6ToB64(63&e)),e=0);return c.substr(0,c.length-2+b)+(2===b?"":1===b?"=":"==")},window.UTF8ArrToStr=function(a){for(var b,c="",d=a.length,e=0;d>e;e++)b=a[e],c+=String.fromCharCode(b>251&&254>b&&d>e+5?1073741824*(b-252)+(a[++e]-128<<24)+(a[++e]-128<<18)+(a[++e]-128<<12)+(a[++e]-128<<6)+a[++e]-128:b>247&&252>b&&d>e+4?(b-248<<24)+(a[++e]-128<<18)+(a[++e]-128<<12)+(a[++e]-128<<6)+a[++e]-128:b>239&&248>b&&d>e+3?(b-240<<18)+(a[++e]-128<<12)+(a[++e]-128<<6)+a[++e]-128:b>223&&240>b&&d>e+2?(b-224<<12)+(a[++e]-128<<6)+a[++e]-128:b>191&&224>b&&d>e+1?(b-192<<6)+a[++e]-128:b);return c},window.strToUTF8Arr=function(a){for(var b,c,d=a.length,e=0,f=0;d>f;f++)c=a.charCodeAt(f),e+=128>c?1:2048>c?2:65536>c?3:2097152>c?4:67108864>c?5:6;b=new Uint8Array(e);for(var g=0,h=0;e>g;h++)c=a.charCodeAt(h),128>c?b[g++]=c:2048>c?(b[g++]=192+(c>>>6),b[g++]=128+(63&c)):65536>c?(b[g++]=224+(c>>>12),b[g++]=128+(c>>>6&63),b[g++]=128+(63&c)):2097152>c?(b[g++]=240+(c>>>18),b[g++]=128+(c>>>12&63),b[g++]=128+(c>>>6&63),b[g++]=128+(63&c)):67108864>c?(b[g++]=248+(c>>>24),b[g++]=128+(c>>>18&63),b[g++]=128+(c>>>12&63),b[g++]=128+(c>>>6&63),b[g++]=128+(63&c)):(b[g++]=252+c/1073741824,b[g++]=128+(c>>>24&63),b[g++]=128+(c>>>18&63),b[g++]=128+(c>>>12&63),b[g++]=128+(c>>>6&63),b[g++]=128+(63&c));return b},window.op_base64encode=function(a){return base64EncArr(strToUTF8Arr(a||""))},window.op_base64decode=function(a){return UTF8ArrToStr(base64DecToArr(a))},function(){var a,b,c=localStorage.getItem("OptimizePressVersion"),d=""===OptimizePress.script_debug?!1:!0;"1"===OptimizePress.localStorageEnabled?d=!0:"0"===OptimizePress.localStorageEnabled&&(d=!1);try{localStorage.setItem("op_test","op_test"),localStorage.removeItem("op_test")}catch(e){d=!1}if(OptimizePress.localStorage={},c!==OptimizePress.version){if(a=localStorage.getItem("OptimizePressVersion"))for(b in localStorage)localStorage.hasOwnProperty(b)&&0===b.indexOf("op_")&&localStorage.removeItem(b);localStorage.setItem("OptimizePressVersion",OptimizePress.version)}OptimizePress.localStorage.clearAll=function(){for(b in localStorage)localStorage.hasOwnProperty(b)&&0===b.indexOf("op_")&&localStorage.removeItem(b)},OptimizePress.localStorage.setItem=function(a,b){if(!d)return null;var c="op_"+a+"_"+OptimizePress.version;return"undefined"!=typeof OptimizePress.oppp&&"undefined"!=typeof OptimizePress.oppp.version&&(c+="-oppp_"+OptimizePress.oppp.version),localStorage.setItem(c,b),!0},OptimizePress.localStorage.getItem=function(a){if(!d)return null;var b="op_"+a+"_"+OptimizePress.version;return"undefined"!=typeof OptimizePress.oppp&&"undefined"!=typeof OptimizePress.oppp.version&&(b+="-oppp_"+OptimizePress.oppp.version),localStorage.getItem(b)}}(),function(){OptimizePress.ajax={},OptimizePress.ajax.clearElementsCache=function(){return a.ajax({url:OptimizePress.ajaxurl+"?action="+OptimizePress.SN+"-clear-elements-cache",type:"GET"})}}()}(opjq);var op_cur_html,cur=[];!function(a){function b(){localStorage.getItem("op_row")?a(".paste-row").show():a(".paste-row").hide()}function c(b){var c,d=a(b?b:".op-content-slider-button");d.each(function(){c=a(this);var b=a("#"+a(this).data("target"));a(this).unbind("click").click(function(a){b.css({top:0}),a.preventDefault()}),b.find(".hide-the-panda").unbind("click").click(function(a){b.css({top:"-100%"}),a.preventDefault()}),b.on("click","ul.op-image-slider-content li a",function(d){var e=c.next("input.op-gallery-value"),f=(e.next(".file-preview").find(".content"),a(this).attr("src")),g='<a class="preview-image" target="_blank" href="'+f+'"><img alt="uploaded-image" src="'+f+'"></a><a class="remove-file button" href="#remove">Remove Image</a>';e.val(f),e.parent().next(".op-file-uploader").find(".file-preview .content").empty().html(g).find(".remove-file").click(function(){a(this).parent().empty().parent(".file-preview").prev(".op-uploader-value").val("")}),a("#op_page_thumbnail").val(f),b.css({top:"-100%"}),setTimeout(function(){a.fancybox.reposition()},301),d.preventDefault()})})}function d(){G.on("click","#le-layouts-dialog ul.op-bsw-grey-panel-tabs a",function(b){var c=a("#le-layouts-dialog .op-insert-button");b.preventDefault(),"predefined"==a(this).get_hash()?c.show():c.hide()}),G.on("click","#le-layouts-dialog .op-insert-button button",function(a){return confirm(OP_AB.translate("page_overwritten_continue"))}),G.on("click","#export_layout_category_create_new",function(b){b.preventDefault(),a("#export_layout_category_select_container:visible").fadeOut("fast",function(){a("#export_layout_category_new_container").fadeIn("fast")})}),G.on("click","#export_layout_category_select",function(b){b.preventDefault(),a("#export_layout_category_new_container:visible").fadeOut("fast",function(){a("#export_layout_category_select_container").fadeIn("fast")})}),G.on("click","#export_layout_category_new_submit",function(b){b.preventDefault();var c=a(this).next().find("img").fadeIn("fast"),d=a(this).prev().val(),e={action:OptimizePress.SN+"-live-editor-create-category",_wpnonce:a("#op_le_wpnonce").val(),category_name:d};a.post(OptimizePress.ajaxurl,e,function(b){c.fadeOut("fast"),"undefined"!=typeof b.error?alert(b.error):(a("#export_layout_category").html(b.html),a("#export_layout_category_select").trigger("click"))},"json")}),G.on("submit","#le-membership-dialog",function(b){b.preventDefault(),a.fancybox.close(),a.fancybox.showLoading();var c={action:OptimizePress.SN+"-live-editor-membership",_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val()};a.extend(c,x(a(this))),t(),a.post(OptimizePress.ajaxurl,c,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OptimizePress.disable_alert=!0,window.location.reload())},"json")}),G.on("submit","#le-headers-dialog",function(b){b.preventDefault();a(this).find(":radio:checked").val();a.fancybox.close();var c={action:OptimizePress.SN+"-live-editor-headers",_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val()};a.extend(c,x(a(this))),t(),a.post(OptimizePress.ajaxurl,c,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OptimizePress.disable_alert=!0,window.location.reload())},"json")}),G.on("submit","#le-colours-dialog",function(b){b.preventDefault();a(this).find(":radio:checked").val();a.fancybox.close();var c={action:OptimizePress.SN+"-live-editor-colours",_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val()};a.extend(c,x(a(this))),t(),a.post(OptimizePress.ajaxurl,c,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OptimizePress.disable_alert=!0,window.location.reload())},"json")}),G.on("submit","#le-layouts-dialog",function(b){b.preventDefault();var c=a(this).find(":radio:checked").val();a.fancybox.close(),a.fancybox.showLoading();var d={action:OptimizePress.SN+"-live-editor-get-layout",_wpnonce:a("#op_le_wpnonce").val(),layout:c,page_id:a("#page_id").val(),keep_options:[]};a("#content_layout_keep_options :checkbox:checked").each(function(){d.keep_options.push(a(this).val())}),a.post(OptimizePress.ajaxurl,d,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OptimizePress.disable_alert=!0,window.location.reload())},"json")}),G.on("click","#op_export_content a.delete-file",function(b){b.preventDefault();var c=a(this).parent().prev().fadeIn("fast"),d={action:OptimizePress.SN+"-live-editor-deleted-exported-layout",_wpnonce:a("#op_le_wpnonce").val(),filename:a("#zip_filename").val()};a.post(OptimizePress.ajaxurl,d,function(b){c.fadeOut("fast"),"undefined"!=typeof b.error&&alert(b.error),a("#op_export_content").html("")},"json")}),G.on("click","#export_layout_submit",function(b){b.preventDefault(),a("#op_export_content").html("");var c=a(this).next().fadeIn("fast"),d={action:OptimizePress.SN+"-live-editor-export-layout",status:a("#op-live-editor-status").val(),_wpnonce:a("#op_le_wpnonce").val(),layout_name:a("#export_layout_name").val(),layout_description:a("#export_layout_description").val(),layout_category:a("#export_layout_category").val(),image:a("#export_layout_image_path").val(),page_id:a("#page_id").val(),preview_url:a("#export_layout_preview_url").val()||"",op:{},layouts:{}};a("div.editable-area").each(function(){var b=a(this).data("layout");d.layouts[b]=s(a(this))}),"undefined"!=typeof OP_Feature_Area&&(d.feature_area=OP_Feature_Area);for(var e=["typography","settings"],f=0,g=e.length;g>f;f++)a.extend(d.op,x(a("#le-"+e[f]+"-dialog")).op||{});a.post(OptimizePress.ajaxurl,d,function(b){c.fadeOut("fast"),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.output&&a("#op_export_content").html(b.output)},"json")}),G.on("click",".op-download-file",function(a){OptimizePress.disable_alert=!0,setTimeout(function(){OptimizePress.disable_alert=!1},100)}),a("#op_header_layout_nav_bar_alongside_enabled").change(function(){a("#advanced_colors_nav_bar_alongside").toggle(a(this).is(":checked"))}).trigger("change"),a("#op_footer_area_enabled").change(function(){a("#advanced_colors_footer").toggle(a(this).is(":checked"))}).trigger("change"),a("#op_footer_area_enabled").parentsUntil(".section-footer_area",".op-bsw-grey-panel-header").next().hide(),a("#op_header_layout_nav_bar_below_enabled").change(function(){a("#advanced_colors_nav_bar_below").toggle(a(this).is(":checked"))}).trigger("change"),a("#op_header_layout_nav_bar_above_enabled").change(function(){a("#advanced_colors_nav_bar_above").toggle(a(this).is(":checked"))}).trigger("change")}function e(){G.on("click","#op-save-preset",function(b){b.preventDefault(),a.fancybox.open(a.extend({},H,{type:"inline",href:"#le-presets-dialog"}))}),a("#le-presets-dialog").submit(function(b){b.preventDefault();var c={action:OptimizePress.SN+"-live-editor-save-preset",status:a("#op-live-editor-status").val(),_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val(),op:{},preset:x(a("#le-presets-dialog")),layouts:{}};a("div.editable-area").each(function(){var b=a(this).data("layout");c.layouts[b]=s(a(this))}),"undefined"!=typeof OP_Feature_Area&&(c.feature_area=OP_Feature_Area);for(var d=["typography","settings"],e=0,f=d.length;f>e;e++)a.extend(c.op,x(a("#le-"+d[e]+"-dialog")).op||{});a.post(OptimizePress.ajaxurl,c,function(b){"undefined"!=typeof b.error?alert(b.error):("undefined"!=typeof b.preset_dropdown&&(a("#preset_save").html(b.preset_dropdown),a("#preset_type").val("overwrite").trigger("change")),alert(OP_AB.translate("saved")),a.fancybox.close())},"json")})}function f(){for(var b=a('.row[id^="le_body_row_"]'),c=0;c<b.length;c++){var d=a(b[c]).attr("data-style");if(d&&"undefined"!==d){var e=JSON.parse(atob(d));e.elementId=a(b[c]).attr("id");var f=btoa(JSON.stringify(e));a(b[c]).attr("data-style",f)}}}function g(){for(var b=a('.row[id^="le_body_row_"]'),c=a('style[id^="section-separator-style-"]'),d=0;d<c.length;d++)c[d].remove();for(var d=0;d<b.length;d++){var e=b[d].getAttribute("data-style");if(e){var f=JSON.parse(atob(e));b[d].id.split("_")[3];if("undefined"!=typeof f.sectionSeparatorType||"none"!==f.sectionSeparatorType){var g=b[d].getAttribute("id"),i=h(g,f),j=a(i);j.insertBefore("#"+g),f.sectionSeparatorStyle=i;var k=btoa(JSON.stringify(f));b[d].setAttribute("data-style",k)}}}}function h(b,c){var d="",e=c.sectionSeparatorType,f="rgba(0,0,0,0)",g=c.backgroundColorStart,h=c.backgroundColorEnd,i=b.split("_"),j=parseInt(i[3])+1,l="le_body_row_"+j,m=0,n=(c.paddingTop,0);switch("undefined"!=typeof c.paddingBottom&&(m=c.paddingBottom,n+=parseInt(m)),a("#"+b).hasClass("section")===!0&&"undefined"==typeof c.paddingBottom&&(n+=parseInt(40)),"undefined"!=typeof g&&"undefined"==typeof h?f=g:"undefined"!=typeof g&&"undefined"!=typeof h&&(f=h),e){case"wide_triangle":n+=30,d+='<style id="section-separator-style-'+i[3]+'">#'+b+"::after{width:0px; height:0px; border-left: 500px solid transparent; border-right: 500px solid transparent; border-top: 30px solid "+f+'; display: block; position: relative; content: ""; bottom: -'+n+"px; margin: 0 auto; visibility: inherit; }@media only screen and (max-width: 960px) {#"+b+"::after{border-left: 400px solid transparent; border-right: 400px solid transparent; }}@media only screen and (max-width: 767px) {#"+b+"::after{border-left: 250px solid transparent; border-right: 250px solid transparent; }}@media only screen and (max-width: 767px) {#"+b+"::after{border-left: 150px solid transparent; border-right: 150px solid transparent; }}#"+l+" .fixed-width {margin-top: 30px;}";break;case"thin_triangle":n+=20,d+='<style id="section-separator-style-'+i[3]+'">#'+b+"::after{width:0px; height:0px;border-left: 20px solid transparent; border-right: 20px solid transparent; border-top: 20px solid "+f+'; display: block; position: relative; content: ""; bottom: -'+n+"px; left: 50%; transform: translateX(-50%); visibility: inherit; }#"+l+" .fixed-width {margin-top: 20px;}"}("wide_triangle"==e||"thin_triangle"==e)&&(d+="#"+b+"{margin-bottom: 0px !important;} #"+l+"{border-top: none !important;margin-top: 0px !important;} </style>");var o=k();return a("head").append(o),d}function i(){return a("style").is('[id*="section-separator-style"]')}function j(){return a(".row").is('[class*="bg-parallax"]')}function k(){a("#op-decreasing-row-zindex").length&&a("#op-decreasing-row-zindex").remove();for(var b=a('.row[id^="le_body_row_"]'),c='<style id="op-decreasing-row-zindex">',d=0;d<b.length;d++)c+="#le_body_row_"+(d+1)+"{z-index: "+(parseInt(50)-parseInt(d+1))+" !important;}";return c+="</style>"}function l(){E&&E[1]&&E[2]&&E[3]&&(E[1].height(E[3].outerHeight()),E[2].height(E[1].height()),E[1].css("margin-top","-"+E[1].innerHeight()/2+"px"))}function m(){G.on("click",".element-container a.add-new-element",function(b){var c,d,e,f,g=a(this),h=parseInt(g.closest(".cols").width(),10)+40,i=!1;a(".op-content-liveeditor-title");b.preventDefault(),(g.parent().hasClass("op-popup")||g.parent().parent().hasClass("op-popup"))&&(i=!0),g.parent().parent().hasClass("op-popup")&&(h=parseInt(g.parent().parent().data("width"),10)||700,h+=40,h=h>=a(window).width()?a(window).width()-40:h),l(),E[3].html(""),E[2].css("background","url(images/wpspin_light.gif) no-repeat center center"),E[0].add(E[1]),E[1].width(h).css("margin-left",-(h/2)+"px"),400>h&&E[1].addClass("epicbox-narrow"),F=g.closest(".element").find("textarea.op-le-child-shortcode"),op_cur_html=E[3],op_show_loading(),e=F.val(),i&&e&&(c=/(\[custom_html\])([\s\S]*?)(\[\/custom_html\])/gi,d=/(<)(textarea)([\s\S]*?)(>)([\s\S]*?)(<)(\/textarea)(>)/gi,e=e.replace(c,function(a,b,c,e){var f=c.replace(d,function(a,b,c,d,e,f,g,h,i){return"&lt;"+c+d+"&gt;"+f+"&lt;"+h+"&gt;"});return""+b+f+e})),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-parse",_wpnonce:a("#op_le_wpnonce").val(),shortcode:e,depth:1,page_id:a("#page_id").val()},function(b){"undefined"!=typeof b.output&&("undefined"!=typeof b.font&&""!==b.font&&"google"===b.font[0]&&WebFont.load({google:{families:[b.font[1]+b.font[2].properties]}}),E[2].css("background","none").addClass("op_no_outline").attr("tabindex",0).focus(),E[3].html(b.output+b.js),E[4]=a(".epicbox-actual-content",E[3]),Q.addClass("epicbox-lock"),op_hide_loading(!0),E[0].css({display:"block"}),OptimizePress.epicboxBeforeShowAnimation(!1,E[1]),l(),n(),o()),f=g.parent(),""===R&&(R=a(".op-content-liveeditor-title").text()),a(".op-content-liveeditor-title").text(f.data("epicbox-title")||R),a(document).trigger("op.afterLiveEditorParse")},"json")}),E[3].on("click",".op-element-links a.element-delete",function(b){b.preventDefault(),confirm("Are you sure you wish to remove this element?")&&a(this).closest(".row").remove()&&l()}),E[3].on("click","a.add-new-element",function(b){b.preventDefault(),OptimizePress.currentEditElement=!1,a("#op_asset_browser_container").addClass("hide-elements-with-child-elements"),K=!0;a(this).prev();cur=[a(this),"before"],L=null,OP_AB.open_dialog(),a("#op_assets_filter").val("").trigger("keyup")}),E[3].on("click",".op-element-links a.element-settings",function(b){b.preventDefault();var c=a(this).closest(".row");cur=[c,"replaceWith"],K=!0,w(c,!1)}),E[3].on("dblclick",".element-container",function(){return a(this).find(".op-element-links > .element-settings").trigger("click"),!1}),E[1].on("click",".close",function(b){b.preventDefault(),K=!1,a("#op_asset_browser_container").removeClass("hide-elements-with-child-elements"),E[0].add(E[1]),OptimizePress.epicboxBeforeCloseAnimation(E[0],E[1])}),a("#op_child_elements_form").submit(function(b){b.preventDefault();var c="",d="",e=!1,f="",g="",h="";a(this).find(".op_popup_element_present").length>0&&(e=!0),g="[op_liveeditor_elements] ",e&&(g="[op_popup_elements]",f="[op_popup_elements]"),a(this).find("textarea.op-le-child-shortcode").each(function(){var b=0===a(this).val().indexOf("[op_popup_button]")?!0:!1;b?d+=a(this).val():e?a(this).val().indexOf("[op_popup_elements]")<0?(c+='[op_popup_content_element data-style="'+(a(this).parent().parent().attr("data-style")||"")+'"]',c+=a(this).val(),c+="[/op_popup_content_element]"):h=a(this):(g+='[op_liveeditor_element data-style="'+(a(this).parent().parent().attr("data-style")||"")+'"]',g+=a(this).val(),g+="[/op_liveeditor_element] ")}),e||(g+="[/op_liveeditor_elements] "),e?(f+=c,f+="[/op_popup_elements]",h.val(f),g+="[op_popup_button]",d=d.split(/\[op_popup_button\](.*)\[\/op_popup_button\]/gi),d=d[1],g+=d,g+="[/op_popup_button]",g+="[op_popup_content]",g+=c,g+="[/op_popup_content]",g+="[/op_popup_elements]",F.closest(".element-container").find(".op-le-child-shortcode").val(f),entireShortcode=F.closest(".element-container").find(".op-le-shortcode").val(),entireShortcode=entireShortcode.replace(/\[op_popup_content[ d|\]][\s\S]*\[\/op_popup_content\]/gi,"[op_popup_content]"+c+"[/op_popup_content]"),F.closest(".element-container").find(".op-le-shortcode").val(entireShortcode).text(entireShortcode)):(F.val(g),q(F)),K=!1,a(".close",E[1]).trigger("click")})}function n(b){var b=b||!1;b?E[4].sortable("refresh").disableSelection():E[4].sortable(a.extend({},M,{handle:".op-element-links .element-move",items:"div.row",update:null})).disableSelection()}function o(){OptimizePress.initCountdownElements()}function p(b){var c=b.find("textarea.op-le-shortcode"),d=c.text();d||(d=c.val()),d||(d="");var e=new RegExp("#OP_CHILD_ELEMENTS#");return b.find("textarea.op-le-child-shortcode").each(function(){d=d.replace(e,a(this).val())}),d}function q(b){b.text("");var c,d=b.closest(".element-container"),e=p(d),f=d.find(".element:first"),g=d.find(".op-waiting");op_cur_html=d,f.fadeOut("fast").html(""),g.fadeIn("fast").end().find(".op-show-waiting").fadeIn("fast"),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-parse",_wpnonce:a("#op_le_wpnonce").val(),shortcode:e,depth:0,page_id:a("#page_id").val()},function(e){if("undefined"!=typeof f&&"undefined"!=typeof e.output){"undefined"!=typeof e.font&&""!==e.font&&"google"===e.font[0]&&WebFont.load({google:{families:[e.font[1]+e.font[2].properties]}}),c=op_cur_html.attr("data-style")?JSON.parse(atob(op_cur_html.attr("data-style"))):{},c.codeBefore=c.codeBefore||"",c.codeAfter=c.codeAfter||"",f.html(c.codeBefore+e.output+e.js+c.codeAfter);var h=d.closest(".editable-area");A(h),"undefined"!=typeof e.shortcode&&b.val(e.shortcode),g.fadeOut("fast",function(){f.fadeIn("fast")}),r(h),o()}a(document).trigger("op.afterLiveEditorParse")},"json")}function r(b){b.each(function(b){var c=a(this),d=c.attr("id"),e="le_"+("footer_area"==d?"footer":"content_area"==d?"body":d)+"_row_",f=1;a(this).find("> .row").each(function(){var b=1;a(this).attr("id",e+f).find("> .cols").each(function(){var c=1;a(this).attr("id",e+f+"_col_"+b).find("> .element-container:not(.sort-disabled)").each(function(){a(this).attr("id",e+f+"_col_"+b+"_el_"+c),c++}),b++}),f++})})}function s(b){var c=[];return b.length>0&&(c=[]),b.find("> .row").each(function(){var b=a(this),d={row_class:b.attr("class"),row_style:b.attr("style"),row_data_style:b.attr("data-style"),children:[]};b.find("> > .cols:not(.sort-diabled)").each(function(){var b=a(this),c={col_class:b.attr("class"),type:"column",children:[]},e={type:"",object:{}};b.find("> div:not(.sort-disabled, .add-element-container)").each(function(){var b={type:"",object:{}};if(a(this).hasClass("element-container"))b.type="element",b.object=p(a(this)),b.element_class=a(this).attr("class"),a(this).hasClass("cf")||a(this).addClass("cf"),b.element_data_style=a(this).attr("data-style"),c.children.push(b);else if(a(this).hasClass("subcol")){
var d=a(this),e={subcol_class:a(this).attr("class"),type:"subcolumn",children:[]};d.find("> div:not(.sort-disabled, .add-element-container)").each(function(){var b=a(this),c={type:"",object:{}};c.type="element",c.object=p(b),c.element_class=a(this).attr("class"),c.element_data_style=a(this).attr("data-style"),e.children.push(c)}),c.children.push(e)}}),e.type="column",e.object=c,d.children.push(e)}),c.push(d)}),c}function t(b){var c={action:OptimizePress.SN+"-live-editor-save",status:a("#op-live-editor-status").val(),_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val(),op:{},layouts:{}};op_show_loading(),a("div.editable-area").each(function(){var b=a(this).data("layout");c.layouts[b]=s(a(this))}),"undefined"!=typeof OP_Feature_Area&&(c.feature_area=OP_Feature_Area);for(var d=["typography","settings"],e=0,f=d.length;f>e;e++)a.extend(c.op,x(a("#le-"+d[e]+"-dialog")).op||{});a.post(OptimizePress.ajaxurl,c,function(c){op_hide_loading(),"undefined"!=typeof c.error?(alert(c.error),window.op_dont_hide_loading=!1,op_hide_loading()):a.isFunction(b)?(OptimizePress.disable_alert||alert(OP_AB.translate("saved")),b()):(OptimizePress.disable_alert||alert(OP_AB.translate("saved")),OptimizePress.disable_alert=!1,window.op_dont_hide_loading=!1,op_hide_loading()),window.op_dont_show_loading=!1},"json")}function u(c,d){if(d=d||"",d=""==d?"":d+"-","N"==c.data("one_col")){c.append('<div id="'+d+'add-new-row" class="cf"><div class="'+d+'add-new-row-link"><div class="add-new-row-content"><a href="#op-le-row-select" class="add-new-button"><span>'+B("add_new_row")+"</span></a></div></div></div>");var e=a("#"+d+"add-new-row");e.fancybox(a.extend({},H,{type:"inline",href:"#op-le-row-select",beforeLoad:function(){cur=[a("#"+d+"add-new-row"),"before"]}})),c.on("click",".add-new-row",function(b){b.preventDefault(),cur=[a(this).closest(".row"),"before"],a.fancybox.open(a.extend({},H,{type:"inline",href:"#op-le-row-select"}))}),G.on("click",".split-column",function(b){b.preventDefault();var c=a(this).attr("href");switch(c=c.substring(1),a("#op-le-split-column ul li").each(function(b){a(this).hide()}),c){case"one-half":a("#op-le-split-column ul li a.split-half").parent().show();break;case"two-thirds":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show(),a("#op-le-split-column ul li a.one-fourth-first").parent().show(),a("#op-le-split-column ul li a.one-fourth-second").parent().show();break;case"two-fourths":a("#op-le-split-column ul li a.split-half").parent().show();break;case"three-fourths":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show(),a("#op-le-split-column ul li a.one-fourth-first").parent().show(),a("#op-le-split-column ul li a.one-fourth-second").parent().show(),a("#op-le-split-column ul li a.one-fourths").parent().show();break;case"three-fifths":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show();break;case"four-fifths":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show(),a("#op-le-split-column ul li a.one-fourth-first").parent().show(),a("#op-le-split-column ul li a.one-fourth-second").parent().show(),a("#op-le-split-column ul li a.one-fourths").parent().show()}cur=[a(this).closest(".column"),"append"],a.fancybox.open(a.extend({},H,{type:"inline",href:"#op-le-split-column"}))}),G.on("click",".banner",function(b){b.preventDefault(),b.stopPropagation(),a(".op-icn-le_layouts > a").trigger("click")}),G.on("click",".edit-row",function(b){if(b.preventDefault(),cur=[a(this).closest(".row"),"before"],cur[0].hasClass("section")?a('input[name="op_full_width_row"]').prop("checked",!0):a('input[name="op_full_width_row"]').prop("checked",!1),cur_style=cur[0].attr("style"),cur_data_style=cur[0].attr("data-style"),a("#op_section_row_options_bgcolor_start").val("").trigger("change"),a("#op_section_row_options_bgcolor_end").val("").trigger("change"),a("#op_row_top_padding").val(""),a("#op_row_before").val(""),a("#op_row_after").val(""),a("#op_row_css_class").val(""),a("#op_row_bottom_padding").val(""),a("#op_row_border_width").val(""),a("#op_row_border_top_width").val(""),a("#op_row_border_bottom_width").val(""),a("#op_section_row_options_borderColor").val("").trigger("change"),a("#op_section_row_options_borderTopColor").val("").trigger("change"),a("#op_section_row_options_borderBottomColor").val("").trigger("change"),a("#op_row_options_backgroundImageColor").val("").trigger("change"),a("#op_paralax_background_image").prop("checked",!1),a(".op_row_advanced_options_extras:checkbox").prop("checked",!1),a(".op_row_advanced_options_extras:not(:checkbox)").val(""),cur_data_style){a.each(a('[id^="op_row_addon_"]'),function(b,c){a(c).is(":checkbox")?a(c).prop("checked",!1):a(c).hasClass("op-uploader-value")?OP_AB.set_uploader_value(a(c).prop("id"),""):"number"==a(c).prop("type")?a(c).val(a(c).val()):a(c).hasClass("slider-item")?(a(c).find("input").val(0),a(c).slider("value",0),a(c).prev().find("span").text("0"+a(c).prev().find("span").data("unit")).attr("id","output_"+a(c).attr("id"))):a(c).val("")}),OP_AB.set_uploader_value("op_row_background",""),a(".op_row_bg_options option").each(function(){a(this).attr("selected",!1)}),a(".op-section-separator-type option").each(function(){a(this).attr("selected",!1)}),a(".op_scroll_fixed_position option").each(function(){a(this).attr("selected",!1)});var c=JSON.parse(atob(cur_data_style));for(var d in c)switch(d){case"cssClass":a("#op_row_css_class").val(c[d]);break;case"codeBefore":a("#op_row_before").val(c[d]);break;case"codeAfter":a("#op_row_after").val(c[d]);break;case"paddingTop":a("#op_row_top_padding").val(c[d]);break;case"paddingBottom":a("#op_row_bottom_padding").val(c[d]);break;case"backgroundImage":var e=c[d].slice(4,-1);OP_AB.set_uploader_value("op_row_background",e);break;case"backgroundPosition":a('.op_row_bg_options option[value="'+c[d]+'"]').attr("selected","selected");break;case"borderWidth":a("#op_row_border_top_width").val(c[d]),a("#op_row_border_bottom_width").val(c[d]);break;case"borderColor":a("#op_section_row_options_borderTopColor").val(c[d]).trigger("change"),a("#op_section_row_options_borderBottomColor").val(c[d]).trigger("change");break;case"borderTopWidth":a("#op_row_border_top_width").val(c[d]);break;case"borderTopColor":a("#op_section_row_options_borderTopColor").val(c[d]).trigger("change");break;case"borderBottomWidth":a("#op_row_border_bottom_width").val(c[d]);break;case"borderBottomColor":a("#op_section_row_options_borderBottomColor").val(c[d]).trigger("change");break;case"backgroundColorStart":a("#op_section_row_options_bgcolor_start").val(c[d]).trigger("change");break;case"backgroundColorEnd":a("#op_section_row_options_bgcolor_end").val(c[d]).trigger("change");break;case"backgroundImageColor":a("#op_row_options_backgroundImageColor").val(c[d]).trigger("change");break;case"backgroundImageColorOpacity":a("#input_op_section_row_options_backgroundImageOpacity").val(c[d]).trigger("change"),a("#output_op_section_row_options_backgroundImageOpacity").text(c[d]+"%"),a("#op_section_row_options_backgroundImageOpacity").slider("value",c[d]);break;case"rowScrollFixedPosition":a('#op_scroll_fixed_position option[value="'+c[d]+'"]').attr("selected","selected");break;case"sectionSeparatorType":a('#op_row_section_separator_option option[value="'+c[d]+'"]').attr("selected","selected");break;case"extras":for(var f in c[d]){var g=a('.op_row_advanced_options_extras[data-name="'+f+'"]');g.length>0&&g.val(c[d][f])}break;case"backgroundParalax":g=a("#op_paralax_background_image"),c[d]===!0?g.prop("checked",!0):g.val(c[d]);break;case"addon":a.each(c[d],function(b,c){var d=a("#op_row_addon_"+b);d.is(":checkbox")?d.prop("checked",c):d.hasClass("op-uploader-value")?OP_AB.set_uploader_value(d.prop("id"),c):d.hasClass("slider-item")?(d.slider("value",c),d.find("input").val(c),d.prev().find("span").text(c+d.prev().find("span").data("unit"))):d.val(c).trigger("change")})}}else a.each(a('[id^="op_row_addon_"]'),function(b,c){a(c).is(":checkbox")?a(c).prop("checked",!1):a(c).hasClass("op-uploader-value")?OP_AB.set_uploader_value(a(c).prop("id"),""):"number"==a(c).prop("type")?a(c).val(a(c).val()):a(c).hasClass("slider-item")?(a(c).find("input").val(0),a(c).slider("value",0),a(c).prev().find("span").text("0"+a(c).prev().find("span").data("unit")).attr("id","output_"+a(c).attr("id"))):a(c).val("")}),OP_AB.set_uploader_value("op_row_background",""),a(".op_row_bg_options option").each(function(){a(this).attr("selected",!1)}),a(".op-section-separator-type option").each(function(){a(this).attr("selected",!1)});a.fancybox.open(a.extend({},H,{type:"inline",href:"#op-le-row-options"}))}),a(window).on("focus",function(){b()}),c.on("click",".paste-row",function(b){b.preventDefault();var d=localStorage.getItem("op_row")||"";a(this).closest(".row").before(d),r(c),A(c),i()&&g(),j()&&a.stellar("refresh"),f(),a(".paste-row").show()}),c.on("click",".copy-row",function(b){b.preventDefault();var c=a(this).closest(".row"),d=c.clone().attr("id",""),e=0,f=0;c.find("textarea.op-le-shortcode").each(function(){var b=a(d.find("textarea.op-le-shortcode")),c=a(this).val();a(b[e]).val(c),a(b[e]).text(c),e++}),c.find("textarea.op-le-child-shortcode").each(function(){var b=a(d.find("textarea.op-le-child-shortcode")),c=a(this).val();a(b[f]).val(c),a(b[f]).text(c),f++}),d.find(".element-container, .column").each(function(){a(this).attr("id","")});try{localStorage.setItem("op_row",d[0].outerHTML),a(".paste-row").show(),alert("Row succesfully copied")}catch(g){alert("Session Storage not supported or you tried to copy row that is too big")}}),c.on("click",".clone-row",function(b){var d=a(this).closest(".row"),e=d.clone().attr("id",""),h=0,k=0;d.find("textarea.op-le-shortcode").each(function(){var b=a(e.find("textarea.op-le-shortcode")),c=a(this).val();a(b[h]).val(c),h++}),d.find("textarea.op-le-child-shortcode").each(function(){var b=a(e.find("textarea.op-le-child-shortcode")),c=a(this).val();a(b[k]).val(c),k++}),e.find(".element-container, .column").each(function(){a(this).attr("id","")}),d.after(e),r(c),A(c),i()&&g(),j()&&a.stellar("refresh"),f()}),c.on("click","a.delete-row",function(b){if(b.preventDefault(),confirm("Are you sure you wish to remove this row and all its elements?")){var d=a(this).closest(".row"),e=d.attr("id").split("_");d.prev(".op-row-code-before").remove(),d.next(".op-row-code-after").remove(),a("#section-separator-style-"+e[3]).remove(),d.remove(),r(c),A(c),i()&&g(),j()&&a.stellar("refresh"),f()}})}r(c),A(c),c.on("click","a.move-row,a.element-move",function(a){a.preventDefault()}),c.on("click",".cols > .add-element-container > a.add-new-element",function(b){OptimizePress.currentEditElement=!1,b.preventDefault(),K=!1,cur=[a(this).parent().prev(),"before"],L=null,OP_AB.open_dialog(),a("#op_assets_filter").trigger("keydown")}),c.on("click",".op-element-links a.element-delete",function(b){b.preventDefault(),confirm("Are you sure you wish to remove this element?")&&a(this).closest(".element-container").remove(),j()&&a.stellar("refresh")}),c.on("click",".op-element-links a.element-settings",function(b){b.preventDefault();var c=a(this).closest(".element-container"),d=c.find("> .element a.add-new-element");d.length?d.trigger("click"):(cur=[c,"replaceWith"],L=c.find("textarea.op-le-shortcode"),w(L.closest(".element-container")))}),c.on("dblclick",".element-container",function(){return a(this).hasClass("row")?void 0:(a(this).find(".op-element-links > .element-settings").trigger("click"),!1)}),G.off("click",".op-element-links a.element-advanced"),G.on("click",".op-element-links a.element-advanced",function(b){if(b.preventDefault(),cur=[a(this).closest(".element-container")],cur[0].hasClass("hide-mobile")?a('input[name="op_hide_phones"]').prop("checked",!0):a('input[name="op_hide_phones"]').prop("checked",!1),cur[0].hasClass("hide-tablet")?a('input[name="op_hide_tablets"]').prop("checked",!0):a('input[name="op_hide_tablets"]').prop("checked",!1),cur_data_style=cur[0].attr("data-style"),a("#op_advanced_fadein").val(""),a("#op_advanced_code_before").val(""),a("#op_advanced_code_after").val(""),a("#op_advanced_class").val(""),a(".op_element_advanced_options_extras:checkbox").prop("checked",!1),a(".op_element_advanced_options_extras:not(:checkbox)").val(""),cur_data_style&&"undefined"!==cur_data_style){var c=JSON.parse(atob(cur_data_style));for(var d in c)switch(d){case"codeBefore":a("#op_advanced_code_before").val(c[d]);break;case"codeAfter":a("#op_advanced_code_after").val(c[d]);break;case"fadeIn":a("#op_advanced_fadein").val(c[d]);break;case"advancedClass":a("#op_advanced_class").val(c[d]);break;case"extras":for(var e in c[d]){var f=a('.op_element_advanced_options_extras[data-name="'+e+'"]');f.length>0&&(f.is(":checkbox")&&"1"==c[d][e]?f.prop("checked",!0):f.val(c[d][e]))}}}a.fancybox.open(a.extend({},H,{type:"inline",href:a(this).attr("href")}))}),G.off("click","#op-le-advanced-update"),G.on("click","#op-le-advanced-update",function(b){var c={},d="",e="",f="",g="";cur[0].hasClass("hide-mobile"),cur[0].hasClass("hide-tablet");b.preventDefault(),cur[0].hasClass("row")?cur[0].removeClass().addClass("row element-container cf"):cur[0].removeClass().addClass("element-container cf"),a("#op_advanced_class").val()&&(cur[0].addClass(a("#op_advanced_class").val()),c.advancedClass=a("#op_advanced_class").val()),a('input[name="op_hide_phones"]:checked').length>0?(cur[0].addClass("hide-mobile"),c.hideMobile=1):cur[0].removeClass("hide-mobile"),a('input[name="op_hide_tablets"]:checked').length>0?(cur[0].addClass("hide-tablet"),c.hideTablet=1):cur[0].removeClass("hide-tablet"),a("#op_advanced_fadein").val()&&(c.fadeIn=a("#op_advanced_fadein").val()),a("#op_advanced_code_before").val()&&(d=a("#op_advanced_code_before").val()),a("#op_advanced_code_after").val()&&(e=a("#op_advanced_code_after").val()),a(".op_element_advanced_options_extras").length>0&&a.each(a(".op_element_advanced_options_extras"),function(b,d){var e=a(d);c.extras=c.extras||{},e.is(":checkbox")?e.is(":checked")&&(c.extras[e.attr("data-name")]=1):c.extras[e.attr("data-name")]=e.val()}),""!==d&&""!==e?(g=d+"---OP-BEFORE-AFTER---"+e,g=HTMLtoXML(g),g=g.split(/---OP-BEFORE-AFTER---/),d=g[0],e=g[1]):(d=d?HTMLtoXML(d):d,e=e?HTMLtoXML(e):e),a("#op_advanced_code_before").val(d),a("#op_advanced_code_after").val(e),cur[0].find(".element, .op-hidden, .op-element-links, .op-waiting").each(function(b,c){var g,h,i,j=a(c);j.hasClass("element")?(h=a("<div>").append(a(j[0].innerHTML).clone()).html(),h=d+h+e,f+=j.find("> .op-popup").length>0?'<div class="element">'+h:'<div class="element">'+h+"</div>"):j.hasClass("op-hidden")&&!j.hasClass("op-waiting")?(g=j.find(" > textarea").hasClass("op-le-child-shortcode")?"op-le-child-shortcode":"op-le-shortcode",i=j.find("> textarea").val(),f+='<div class="op-hidden">',f+='<textarea name="shortcode[]" class="'+g+'">',f+=i,f+="</textarea>",f+="</div>",j.prev().hasClass("op-popup")&&(f+="</div>")):f+=j[0].outerHTML}),cur[0].html(f),a("#op_advanced_code_before").val()&&(c.codeBefore=a("#op_advanced_code_before").val()),a("#op_advanced_code_after").val()&&(c.codeAfter=a("#op_advanced_code_after").val());var h=btoa(JSON.stringify(c));cur[0].attr("data-style",h),a.fancybox.close()}),c.on("click",".op-element-links a.element-parent-settings",function(b){b.preventDefault();var c=a(this).closest(".element-container");cur=[c,"replaceWith"],L=c.find("textarea.op-le-shortcode"),w(L.closest(".element-container"))}),G.off("click",".op-element-links a.element-clone"),G.on("click",".op-element-links a.element-clone",function(b){b.preventDefault();var c=a(this).closest(".element-container"),d=c.find("textarea.op-le-shortcode").val(),e=c.find("textarea.op-le-child-shortcode").val(),f=c.clone(!0,!0).attr("id","");f.find("textarea.op-le-shortcode").val(d),f.find("textarea.op-le-child-shortcode").val(e),c.after(f)})}function w(b,c){c=c===!1?!1:!0;var d=c?p(b):b.find("textarea.op-le-child-shortcode").val();!c&&b.find(".element > p").length>0&&(d="[text_block]"+d+"[/text_block]"),OP_AB.open_dialog(0),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-params",_wpnonce:a("#op_le_wpnonce").val(),shortcode:d},function(b){"undefined"!=typeof b.error?alert(b.error):a(".fancybox-wrap").length>0&&(OP_AB.edit_element(b),OptimizePress.currentEditElement=b.attrs.style)},"json")}function x(b){if(!b.length)return!1;var c={},d=c;return b.find(':input[type!="checkbox"][type!="radio"][type!="submit"], input:checked').each(function(){var b=this.name.replace(/\[([^\]]+)?\]/g,",$1").split(","),e=b.length-1,f=0;if(b[0])for(;e>f;f++)d=d[b[f]]=d[b[f]]||(""==b[f+1]?[]:{});"undefined"!=typeof d.length?d.push(a(this).val()):d[b[e]]=a(this).val(),d=c}),c}function y(b){if(0===cur.length)return void alert("Could not find the current position, please try clicking the Split Column link again.");var c=b.attr("href").split("#")[1],d=[];if(isTextOnButton=[],b.length>0){switch(c){case"split-half":d=["split-half","split-half"],isTextOnButton=[!0,!0];break;case"one-third-second":d=["split-two-thirds","split-one-third"],isTextOnButton=[!0,!1];break;case"one-third-first":d=["split-one-third","split-two-thirds"],isTextOnButton=[!1,!0];break;case"one-thirds":d=["split-one-third","split-one-third","split-one-third"],isTextOnButton=[!1,!1,!1];break;case"one-fourth-second":d=["split-three-fourths","split-one-fourth"],isTextOnButton=[!0,!1];break;case"one-fourth-first":d=["split-one-fourth","split-three-fourths"],isTextOnButton=[!1,!0];break;case"one-fourths":d=["split-one-fourth","split-one-fourth","split-one-fourth","split-one-fourth"],isTextOnButton=[!1,!1,!1,!1]}for(var e="",f=0,g=d.length;g>f;f++){isTextOnButton[f]?btnText="<span>Add Element</span>":btnText="",e+='<div class="'+d[f]+' column cols subcol">',e+='<div class="element-container sort-disabled"></div>',e+='<div class="add-element-container"><a href="#add_element" class="add-new-element">'+btnText+"</a></div>",e+="</div>"}btnText="<span>Add element</span>",e+='</div></div><div class="clearcol"></div>',e+='<div class="element-container sort-disabled"></div>',e+='<div class="add-element-container"><a href="#add_element" class="add-new-element">'+btnText+"</a></div>",e=a(e),cur[0][cur[1]](e),cur[0].on("click",".add-element-container > a.add-new-element",function(b){b.preventDefault(),OptimizePress.currentEditElement=!1,K=!1,cur=[a(this).parent().prev(),"before"],L=null,OP_AB.open_dialog()});var h=cur[0].closest(".editable-area");A(h),r(h),a.fancybox.close()}else alert("Please select split column type")}function z(b){if(0===cur.length)return void alert("Could not find the current position, please try clicking the Add new row link again.");var c=b.attr("href").split("#")[1],d="",e=[];if(isTextOnButton=[],b.length>0){switch(c){case"one-col":d="one-column",e=["one-column"],isTextOnButton=[!0];break;case"two-col":d="two-columns",e=["one-half","one-half"],isTextOnButton=[!0,!0];break;case"three-col":d="three-columns",e=["one-third","one-third","one-third"],isTextOnButton=[!0,!0,!0];break;case"four-col":d="four-columns",e=["one-fourth","one-fourth","one-fourth","one-fourth"],isTextOnButton=[!1,!1,!1,!1];break;case"five-col":d="five-columns",e=["one-fifth","one-fifth","one-fifth","one-fifth","one-fifth"],isTextOnButton=[!1,!1,!1,!1,!1];break;default:switch(c){case"1":d="three-columns",e=["two-thirds","one-third"],isTextOnButton=[!0,!0];break;case"2":d="three-columns",e=["one-third","two-thirds"],isTextOnButton=[!0,!0];break;case"3":d="four-columns",e=["two-fourths","one-fourth","one-fourth"],isTextOnButton=[!0,!1,!1];break;case"4":d="four-columns",e=["one-fourth","one-fourth","two-fourths"],isTextOnButton=[!1,!1,!0];break;case"5":d="four-columns",e=["three-fourths","one-fourth"],isTextOnButton=[!0,!1];break;case"6":d="four-columns",e=["one-fourth","three-fourths"],isTextOnButton=[!1,!0];break;case"7":d="five-columns",e=["two-fifths","one-fifth","one-fifth","one-fifth"],isTextOnButton=[!0,!1,!1,!1];break;case"8":d="five-columns",e=["one-fifth","one-fifth","one-fifth","two-fifths"],isTextOnButton=[!1,!1,!1,!0];break;case"9":d="five-columns",e=["three-fifths","one-fifth","one-fifth"],isTextOnButton=[!0,!1,!1];break;case"10":d="five-columns",e=["one-fifth","one-fifth","three-fifths"],isTextOnButton=[!1,!1,!0];break;case"11":d="five-columns",e=["four-fifths","one-fifth"],isTextOnButton=[!0,!1];break;case"12":d="five-columns",e=["one-fifth","four-fifths"],isTextOnButton=[!1,!0];break;case"13":d="four-columns",e=["one-fourth","two-fourths","one-fourth"],isTextOnButton=[!1,!0,!1];break;case"14":d="five-columns",e=["two-fifths","three-fifths"],isTextOnButton=[!0,!0];break;case"15":d="five-columns",e=["three-fifths","two-fifths"],isTextOnButton=[!0,!0];break;case"16":d="five-columns",e=["one-fifth","two-fifths","two-fifths"],isTextOnButton=[!1,!0,!0];break;case"17":d="five-columns",e=["two-fifths","two-fifths","one-fifth"],isTextOnButton=[!0,!0,!1];break;case"18":d="five-columns",e=["one-fifth","three-fifths","one-fifth"],isTextOnButton=[!1,!0,!1]}}var f="";if(0===c.indexOf("feature_")){a.fancybox.showLoading();var g={action:OptimizePress.SN+"-live-editor-get-predefined-template",template:c,page_id:a("#page_id").val()};a.ajax({type:"POST",dataType:"json",url:OptimizePress.ajaxurl,data:g}).done(function(b){if("error"!=b.output){f+=b.output,f=a(f),f.find(".cols > .add-element-container > a.add-new-element").click(function(b){b.preventDefault(),OptimizePress.currentEditElement=!1,K=!1,cur=[a(this).parent().prev(),"before"],L=null,OP_AB.open_dialog()}),cur[0][cur[1]](f);var c=cur[0].closest(".editable-area");A(c),r(c),a.fancybox.hideLoading(),a.fancybox.close()}})}else{f+='<div class="row '+d+' cf">',f+='<div class="fixed-width">',f+='<div class="op-row-links">',f+='<div class="op-row-links-content">',f+='<a id="copy_row" href="#copy-row" class="copy-row"></a>',f+='<a id="row_options" href="#options" class="edit-row"></a>',f+='<a id="row_options" href="#clone-row" class="clone-row"></a>',f+='<a href="#add-new-row" class="add-new-row"><span>'+B("add_new_row")+"</span></a>",f+='<a href="#move" class="move-row"></a>',f+='<a href="#paste-row" class="paste-row"></a>',f+='<a href="#delete-row" class="delete-row"></a>',f+="</div>",f+="</div>";for(var h,i=0,j=e.length;j>i;i++){isTextOnButton[i]?btnText="<span>Add Element</span>":btnText="";var k="";switch(e[i]){case"one-third":case"one-fourth":case"one-fifth":case"two-fifths":k=" narrow";break;default:k=""}switch(e[i]){case"one-half":case"two-thirds":case"two-fourths":case"three-fourths":case"three-fifths":case"four-fifths":h='<a href="#'+e[i]+'" class="split-column"></a>';break;default:h=""}f+='<div class="'+e[i]+" column cols"+k+'">',f+='<div class="element-container sort-disabled"></div>',f+='<div class="add-element-container">',f+=h,f+='<a href="#add_element" class="add-new-element">'+btnText+"</a>",f+="   </div>",f+="</div>"}f+="</div></div>",f=a(f),f.find(".cols > .add-element-container > a.add-new-element").click(function(b){b.preventDefault(),OptimizePress.currentEditElement=!1,K=!1,cur=[a(this).parent().prev(),"before"],L=null,OP_AB.open_dialog()}),cur[0][cur[1]](f);var l=cur[0].closest(".editable-area");A(l),r(l),localStorage.getItem("op_row")||a(".paste-row").hide(),a.fancybox.close()}}else alert("Please select a column type")}function A(b){b.sortable(a.extend({},M,{handle:".op-row-links .move-row",items:"> div.row",update:function(){r(b),i()&&g(),f()}})).disableSelection(),b.find("div.row:not(.element-container)").sortable(a.extend({},M,{handle:".op-element-links .element-move",items:"div.element-container:not(.row)",connectWith:".row",update:function(){r(b),i()&&g(),f()}}))}function B(a){return OP_AB.translate(a)}function C(){op_show_loading(),window.top.location.href=window.location}var D,E,F,G,H={},I=a(window),J=window.dialogArguments||opener||parent||top,K=!1,L=null,M={revert:"invalid",scrollSensitivity:"50",tolerance:"pointer"},N=!1,O=[],P=[],Q=a("html"),R="";return Q.hasClass("op-live-editor")?(OptimizePress.disable_alert=!1,"undefined"!=typeof document.registerElement&&(document.registerElement("op-row-before"),document.registerElement("op-row-after")),a(document).ready(function(){function f(){o=!0,OptimizePress.disable_alert=!0,window.op_dont_show_loading=!0,t()}function j(b,c,d,e){b.empty(),"category"==d?(b.append(a("<option>").text("").val("")),a.each(O,function(d){var e=O[d];e.parent==="parent-"+c&&(""!=e.selected?b.append(a("<option>").text(e.text).val(e.value).attr("selected",!0)):b.append(a("<option>").text(e.text).val(e.value)))})):(b.append(a("<option>").text("").val("")),a.each(P,function(d){var e=P[d];e.parent==="parent-"+c&&(""!=e.selected?b.append(a("<option>").text(e.text).val(e.value).attr("selected",!0)):b.append(a("<option>").text(e.text).val(e.value)))})),"undefined"==typeof e&&b.val(""),"#op_category_id"==b.selector&&a("#op_category_id").trigger("change"),"#op_category_id1"==b.selector&&a("#op_category_id1").trigger("change",e)}function k(b){var d=a(this).attr("href").split("#")[1],e=a("#"+d),f=function(b){a.fancybox(a.extend({},H,{minWidth:e.width(),href:"#"+b}))};return b.preventDefault(),d&&"op-revisions-dialog"===d?void OptimizePress._initPageRevisions(H):a("#"+d).length>0?(f(d),!1):(op_show_loading(),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-get-menu-item",_wpnonce:a("#_wpnonce").val(),page_id:a("#page_id").val(),hash:d},function(b){switch(a("#op-le-menu-items").append(b),d){case"le-colours-dialog":OptimizePress.init_hidden_ibuttons("#le-colours-dialog .panel-controlx:not(.op-bsw-blog-enabler):not(.op-disable-ibutton-load)"),OptimizePress.init_hidden_color_pickers("#le-colours-dialog");break;case"le-typography-dialog":OptimizePress.init_hidden_color_pickers("#le-typography-dialog"),OptimizePress.generate_font_pickers("#le-typography-dialog .font-selector");break;case"le-settings-dialog":OptimizePress.init_hidden_ibuttons("#le-settings-dialog .panel-controlx:not(.op-bsw-blog-enabler):not(.op-disable-ibutton-load)"),a("ul.op-bsw-grey-panel-tabs").op_tabs();break;case"le-layouts-dialog":a("ul.op-bsw-grey-panel-tabs").op_tabs();break;case"le-headers-dialog":OptimizePress.init_hidden_ibuttons("#le-headers-dialog .panel-controlx:not(.op-bsw-blog-enabler):not(.op-disable-ibutton-load)"),c("#le-headers-dialog .op-content-slider-button"),OptimizePress.init_hidden_color_pickers("#le-headers-dialog")}f(d),op_hide_loading()}),!1)}function n(){window.location.reload()}G=a("body"),c(),a("#changeMembershipType").click(function(b){a("#pageTypeChange").attr("disabled",!1).attr("name","op[type]").css("border-color","#66AFE9").css("box-shadow","0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px rgba(102, 175, 233, 0.6)")}),a("#pageTypeChange").change(function(b){a("#le-membership-dialog .editor-button").trigger("click")}),a("#op_header_disable_link").change(function(b){a(this).is(":checked")?a("#op_header_link").hide():a("#op_header_link").show()}).trigger("change"),a("#op_category_id").find("option").each(function(){var b;b=a(this).attr("selected")?a(this).val():"",O.push({value:a(this).val(),text:a(this).text(),parent:a(this).attr("class"),selected:b})}),a("#op_subcategory_id").find("option").each(function(){var b;b=a(this).attr("selected")?a(this).val():"",P.push({value:a(this).val(),text:a(this).text(),parent:a(this).attr("class"),selected:b})}),"undefined"!=typeof switchEditors&&(N=!0);var o=!1;o||"Y"!==OptimizePress.op_autosave_enabled||setInterval(f,1e3*OptimizePress.op_autosave_interval),a("#op_product_id").change(function(b,c){j(a("#op_category_id"),a(this).val(),"category",c)}).trigger("change",["first"]),a("#op_category_id").change(function(b,c){j(a("#op_subcategory_id"),a(this).val(),"subcategory",c)}).trigger("change",["second"]);var p=a("#preset-option-preset,#preset-option-content_layout");a("#preset-option :radio").change(function(){p.hide(),a(this).is(":checked")&&(v=a(this).val())&&"blank"!=v&&a("#preset-option-"+v).show()}).filter(":checked").trigger("change"),E=[a("#epicbox-overlay"),a("#epicbox")],E.push(a(".epicbox-content",E[1])),E.push(a(".epicbox-scroll",E[2])),I.bind("beforeunload",function(a){if(OptimizePress.disable_alert===!1&&Object.is(window.parent,window)){var b="If you leave page, all unsaved changes will be lost.";return"undefined"==typeof a&&(a=window.event),a&&(a.returnValue=b),b}}).resize(function(){D=a(".fancybox-inner").scrollTop(),l()}),H={padding:0,autoSize:!0,wrapCSS:"fancybox-no-scroll",helpers:{overlay:{closeClick:!1}},keys:!1,opLocked:!0,openEffect:"none",closeEffect:"fade",openSpeed:0,closeSpeed:200,openOpacity:!0,closeOpacity:!0,scrollOutside:!1,beforeClose:function(){OptimizePress.fancyboxBeforeCloseAnimation(this)},afterClose:function(){D=null,L=null,OptimizePress._pageRevisionsActive&&(OptimizePress._pageRevisionsActive=!1,a("#op-current-iframe").attr("src",""),a("#op-revisions-iframe").attr("src",""),a(document).off("pageRevisionsFancyboxOpen"),a(window).off("resize",OptimizePress._repositionRevisionsPopup)),a(window.parent.document).find(".fancybox-close").css({display:"block"})},beforeShow:function(){OptimizePress.fancyboxBeforeShowAnimation(this),a(window.parent.document).find(".fancybox-close").css({display:"none"})},afterShow:function(){var b,c;a("select.op-type-switcher").trigger("change"),b=a(".fancybox-opened").eq(-1),c=b.find("iframe"),c.length>0?c.focus():b.find(".fancybox-inner").addClass("op_no_outline").attr("tabindex",0).focus(),OptimizePress._pageRevisionsActive&&a(document).trigger("pageRevisionsFancyboxOpen"),window.op_dont_show_loading=!1},onCancel:function(){cur=[]},onUpdate:function(){null!=D&&a(".fancybox-inner").scrollTop(D)}},OptimizePress.fancy_defaults=H,G.on("click","#op-le-row-options-update",function(b){function c(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}b.preventDefault();var d={};if(d.elementId=cur[0].attr("id"),a('input[name="op_full_width_row"]:checked').length>0?cur[0].addClass("section"):cur[0].removeClass("section"),cur[0].attr("data-style")&&""!==cur[0].attr("data-style")){var e=JSON.parse(atob(cur[0].attr("data-style")));"undefined"!=typeof e.cssClass&&cur[0].removeClass(e.cssClass)}if(""!==a("#op_row_css_class").val()&&(cur[0].addClass(a("#op_row_css_class").val()),d.cssClass=a("#op_row_css_class").val()),a("#op_row_bg_options").val()&&a("#op_row_background").val()){var f=a("#op_row_bg_options").val(),g="url("+a("#op_row_background").val()+")",i=a("#op_row_options_backgroundImageColor").val(),j=a("#input_op_section_row_options_backgroundImageOpacity").val(),k=a("#op_paralax_background_image").is(":checked");d.backgroundImage=g,d.backgroundPosition=f,d.backgroundImageColor=i,d.backgroundImageColorOpacity=j,d.backgroundParalax=k;var l=cur[0].children(".op-row-image-color-overlay");switch(0!=j?l.css({opacity:"0."+j}):l.css({opacity:""}),""!=i&&void 0!=i?l.css({background:i}):l.css({background:""}),f){case"center":cur[0].css({"background-image":g,"background-repeat":"no-repeat","background-position":"center"});break;case"cover":cur[0].css({"background-image":g,"background-size":"cover","background-repeat":"no-repeat"});break;case"tile_horizontal":cur[0].css({"background-image":g,"background-repeat":"repeat-x"});break;case"tile":cur[0].css({"background-repeat":"repeat","background-image":g})}if(k===!0){var m=!1;a(".row").is("[data-stellar-background-ratio]")&&(m=!0),
cur[0].attr("data-stellar-background-ratio","0.3"),m===!0?a.stellar("refresh"):a.stellar({horizontalScrolling:!1})}}else cur[0].css({"background-image":"none","background-repeat":"no-repeat"});var n="",o="",p="",q="",r="";if(a("#op_row_before").val()&&(p=a("#op_row_before").val()),a("#op_row_after").val()&&(q=a("#op_row_after").val()),""!==p&&""!==q?(r=p+"---OP-BEFORE-AFTER---"+q,r=HTMLtoXML(r),r=r.split(/---OP-BEFORE-AFTER---/),p=r[0],q=r[1]):(p=p?HTMLtoXML(p):p,q=q?HTMLtoXML(q):q),n='<op-row-before class="op-row-code-before">'+c(p)+"</op-row-before>",o='<op-row-after class="op-row-code-after">'+c(q)+"</op-row-after>",cur[0].prev(".op-row-code-before").remove(),cur[0].next(".op-row-code-after").remove(),cur[0].before(n),cur[0].after(o),p&&(d.codeBefore=p),q&&(d.codeAfter=q),a("#op_section_row_options_bgcolor_start").val())if(d.backgroundColorStart=a("#op_section_row_options_bgcolor_start").val(),a("#op_section_row_options_bgcolor_end").val()){var s=a("#op_section_row_options_bgcolor_start").val(),t=a("#op_section_row_options_bgcolor_end").val();d.backgroundColorEnd=a("#op_section_row_options_bgcolor_end").val(),cur[0].css("background",s).css("background","-webkit-gradient(linear, left top, left bottom, color-stop(0%, "+s+"), color-stop(100%, "+t+"))").css("background","-webkit-linear-gradient(top, "+s+" 0%, "+t+" 100%)").css("background","-moz-linear-gradient(top, "+s+" 0%, "+t+" 100%)").css("background","-ms-linear-gradient(top, "+s+" 0%, "+t+" 100%)").css("background","-o-linear-gradient(top, "+s+" 0%, "+t+" 100%)").css("background","linear-gradient(to bottom, "+s+" 0%, "+t+" 100%)").css("filter","progid:DXImageTransform.Microsoft.gradient( startColorstr="+s+", endColorstr="+t+", GradientType=0 )")}else cur[0].css("background-color",a("#op_section_row_options_bgcolor_start").val());else cur[0].css("background-color","");if(a("#op_row_top_padding").val()?(cur[0].css("padding-top",a("#op_row_top_padding").val()+"px"),d.paddingTop=a("#op_row_top_padding").val()):cur[0].css("padding-top",""),a("#op_row_bottom_padding").val()?(cur[0].css("padding-bottom",a("#op_row_bottom_padding").val()+"px"),d.paddingBottom=a("#op_row_bottom_padding").val()):cur[0].css("padding-bottom",""),a("#op_row_border_top_width").val()?(cur[0].css("border-top-width",a("#op_row_border_top_width").val()+"px"),d.borderTopWidth=a("#op_row_border_top_width").val()):(cur[0].css("border-top-width","0px"),d.borderTopWidth=""),a("#op_section_row_options_borderTopColor").val()?(cur[0].css("border-top-color",a("#op_section_row_options_borderTopColor").val()),cur[0].css("border-top-style","solid"),d.borderTopColor=a("#op_section_row_options_borderTopColor").val()):(cur[0].css("border-top-color",""),d.borderTopColor=""),a("#op_row_border_bottom_width").val()?(cur[0].css("border-bottom-width",a("#op_row_border_bottom_width").val()+"px"),d.borderBottomWidth=a("#op_row_border_bottom_width").val()):(cur[0].css("border-bottom-width","0px"),d.borderBottomWidth=""),a("#op_section_row_options_borderBottomColor").val()?(cur[0].css("border-bottom-color",a("#op_section_row_options_borderBottomColor").val()),cur[0].css("border-bottom-style","solid"),d.borderBottomColor=a("#op_section_row_options_borderBottomColor").val()):(cur[0].css("border-bottom-color",""),d.borderBottomColor=""),a("#op_row_section_separator_option").val()){var u=cur[0].attr("id"),v=u.split("_"),w=document.getElementById("section-separator-style-"+v[3]);w&&w.remove(),d.sectionSeparatorType=a("#op_row_section_separator_option").val();var x=h(u,d);d.sectionSeparatorStyle=x;var y=a(x);y.insertBefore("#"+u)}if(a(".op_row_advanced_options_extras").length>0&&a.each(a(".op_row_advanced_options_extras"),function(b,c){var e=a(c);d.extras=d.extras||{},d.extras[e.attr("data-name")]=e.val(),d.extras[e.attr("data-name")]=e.val()}),a("#op_scroll_fixed_position").val()){var z=a("#op_scroll_fixed_position");d.rowScrollFixedPosition=z.val()}d.addon={},a.each(a('[id^="op_row_addon_"]'),function(b,c){var e=a(c),f=e.attr("id").replace("op_row_addon_","");e.is(":checkbox")?e.prop("checked")&&(d.addon[f]=!0):e.hasClass("slider-item")?d.addon[f]=e.find("input").val():d.addon[f]=e.val()});var A=btoa(JSON.stringify(d));cur[0].attr("data-style",A),a(window).trigger("op_row_addon_update",cur[0]),a.fancybox.close()}),a(".editable-area").each(function(){var b=a(this),c=b.attr("id");u(b,c.substr(0,c.length-5)),r(b)}),m(),G.on("click","#op-le-row-select li a",function(b){a("#op-le-row-select li.selected").removeClass("selected"),a(this).parent().addClass("selected"),b.preventDefault()}),G.on("click","#op-le-row-select-insert",function(b){b.preventDefault(),a("#op-le-row-select li.selected").length>0?(z(a("#op-le-row-select li.selected").find("a:first")),i()&&g()):alert("Please choose layout")}),G.on("dblclick","#op-le-row-select li a",function(b){b.preventDefault(),z(a(this)),i()&&g()}),G.on("click","#op-le-split-column li a",function(b){a("#op-le-split-column li.selected").removeClass("selected"),a(this).parent().addClass("selected"),b.preventDefault()}),G.on("click","#op-le-split-column-insert",function(b){b.preventDefault(),y(a("#op-le-split-column li.selected").find("a:first"))}),G.on("dblclick","#op-le-split-column li a",function(b){b.preventDefault(),y(a(this))}),G.on("click","a.feature-settings",function(b){b.preventDefault(),b.stopPropagation();var c=a(this);cur=[c.closest(".op-feature-area"),"replaceWith"],a.fancybox.open(a.extend({},H,{type:"inline",href:c.attr("href")}))}),G.on("click","#op-le-settings-toolbar div.links a",k),G.on("submit","form.op-feature-area",function(b){var c;b.preventDefault(),a(this).find(".wp-editor-area").each(function(){var b=a(this).attr("id"),c=OP_AB.wysiwyg_content(b);a(this).val(c)}),c=a(this).find("#op_feature_area_settings_optin_formhtml").val(),c=c.replace(/<textarea((.|[\r|\n])*)?<\/\s?textarea>/gi,""),c=c.replace(/<textarea(.*?)>/gi,""),c=c.replace(/<style((.|[\r|\n])*)?<\/\s?style>/gi,""),c=c.replace(/<style(.*?)>/gi,""),a(this).find("#op_feature_area_settings_optin_formhtml").val(c),a.post(OptimizePress.ajaxurl,a(this).serialize(),function(b){"undefined"!=typeof b.error?alert(b.error):(cur[0][cur[1]](b.output),OP_Feature_Area[b.option]=b.js_options,a.fancybox.close())},"json")}),G.on("click","#op-le-close-editor",function(a){a.preventDefault(),OptimizePress.disable_alert=!0,J.OptimizePress.disable_alert=!0,J.opjq.fancybox.close()}),G.on("click","#op-le-save-1",function(a){a.preventDefault(),t()}),G.on("click","#op-le-save-2",function(a){a.preventDefault(),OptimizePress.disable_alert=!0,J.OptimizePress.disable_alert=!0,t(J.opjq.fancybox.close)}),G.on("submit","#le-settings-dialog",function(b){b.preventDefault(),a.fancybox.close(),t()}),G.on("submit","#le-typography-dialog",function(b){b.preventDefault(),a.fancybox.close(),OptimizePress.disable_alert=!0,window.op_dont_hide_loading=!0,op_show_loading(),t(n)}),G.on("click",".op-feature-area:not(:has(.editable-area))",function(b){a(this).find("a.feature-settings").trigger("click"),"undefined"!=typeof a(this).attr("data-unload")&&"0"==a(this).attr("data-unload")&&b.preventDefault()}),G.on("click",".fancybox-inner a",function(b){D=a(".fancybox-inner").scrollTop(),a.fancybox.update()}),d(),e(),op_launch_funnel_enabled===!0&&"function"==typeof J.op_launch_suite_update_selects&&J.op_launch_suite_update_selects(a("#page_id").val()),a("[data-fade]").each(function(){var b=a(this).attr("style");b=b||"",b=b.replace(/display:\s?none;?/gi,""),a(this).attr("style",b)}),b(),G.on("click",".toggle-container",function(){a(".op-row-links, .add-new-row-content, .add-element-container, .add-new-element").stop().slideToggle(),a(".op-popup").toggleClass("op-popup-clean");var b=a("#toggle-visibility");.25==b.css("opacity")?b.css("opacity",1):b.css("opacity",.25)})}),window.top.location.href===window.location.href&&(OptimizePress.op_live_editor_fullscreen="1",a("html").addClass("op-live-editor-fullscreen")),OptimizePress.currentEditElement=!1,window.op_live_editor=!0,window.op_le_column_width=function(){return a(cur[0]).closest(".cols").width()},window.op_refresh_content_layouts=function(){a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-load-layouts",_wpnonce:a("#op_le_wpnonce").val()},function(b){"undefined"!=typeof b.error?alert(b.error):"undefined"!=typeof b.content_layout&&(a("#le-layouts-dialog div.tab-predefined").html(b.content_layout),a('#le-layouts-dialog ul.op-bsw-grey-panel-tabs a[href$="#predefined"]').trigger("click"))},"json")},window.op_le_insert_content=function(b){if(element=b.substr(1,b.indexOf(" ")-1),0==cur.length)return void alert("Could not find the current position, please try clicking the Add new row link again.");var c=b;if(null!==L&&K===!1){if(L.val(c),q(L),"content_toggle"===element||"order_box"===element||"delayed_content"===element||"feature_box"===element||"feature_box_creator"===element||"terms_conditions"===element||"op_popup"===element){var d=L.val();d=d.replace(/\[op_liveeditor_elements\][\s\S]*\[\/op_liveeditor_elements\]/gi,"#OP_CHILD_ELEMENTS#"),L.val(d)}return a.fancybox.close()}var e="",f="",g="";K?(g=cur[0].hasClass("hide-tablet")?" hide-tablet":"",g+=cur[0].hasClass("hide-mobile")?" hide-mobile":"",e=a('<div class="row element-container cf '+g+'" data-style="'+(cur[0].attr("data-style")||"")+'" />'),f="op-le-child-shortcode"):(e=a('<div class="element-container cf" />'),f="op-le-shortcode");var h=cur[0].closest(".editable-area");cur[0][cur[1]](e),"content_toggle"===element||"order_box"===element||"delayed_content"===element||"feature_box"===element||"feature_box_creator"===element||"terms_conditions"===element||"op_popup"===element?e.append('<div class="op-element-links"><a class="element-parent-settings" href="#parent-settings">'+B("edit_parent_element")+'</a><a href="#settings" class="element-settings">'+B("edit_element")+'</a><a class="element-clone" href="#clone-element">'+B("clone_element")+'</a><a href="#op-le-advanced" class="element-advanced">'+B("edit_element")+'</a><a href="#move" class="element-move">'+B("move")+'</a><a href="#delete" class="element-delete">'+B("delete")+'</a></div><div class="op-waiting"><img src="images/wpspin_light.gif" alt="" class="op-bsw-waiting op-show-waiting" /></div><div class="element cf"></div><div class="op-hidden"><textarea name="shortcode[]" class="'+f+'"></textarea></div>'):e.append('<div class="op-element-links"><a href="#settings" class="element-settings">'+B("edit_element")+'</a><a class="element-clone" href="#clone-element">'+B("clone_element")+'</a><a href="#op-le-advanced" class="element-advanced">'+B("edit_element")+'</a><a href="#move" class="element-move">'+B("move")+'</a><a href="#delete" class="element-delete">'+B("delete")+'</a></div><div class="op-waiting"><img src="images/wpspin_light.gif" alt="" class="op-bsw-waiting op-show-waiting" /></div><div class="element cf"></div><div class="op-hidden"><textarea name="shortcode[]" class="'+f+'"></textarea></div>');var i=e.find("textarea").val(c);a.fancybox.close(),op_cur_html=e,e.find(".op-waiting").fadeIn("fast").end().find(".op-waiting .op-show-waiting").fadeIn("fast"),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-parse",_wpnonce:a("#op_le_wpnonce").val(),shortcode:c,depth:K?1:0,page_id:a("#page_id").val()},function(b){if(null!==b.check){var c=!0;for(var d in b.check)if(a(d).length>0&&""!=b.check[d])return e.fadeOut("fast",function(){a(this).remove()}),void alert(b.check[d]);if(c===!0){"undefined"!=typeof b.font&&""!==b.font&&"google"===b.font[0]&&WebFont.load({google:{families:[b.font[1]+b.font[2].properties]}}),elDataStyle=e.attr("data-style")&&"undefined"!==e.attr("data-style")?JSON.parse(atob(e.attr("data-style"))):{},elDataStyle.codeBefore=elDataStyle.codeBefore||"",elDataStyle.codeAfter=elDataStyle.codeAfter||"",elDataStyle.advancedClass=elDataStyle.advancedClass||"";var f=e.addClass(elDataStyle.advancedClass).find(".element").html(elDataStyle.codeBefore+b.output+b.js+elDataStyle.codeAfter);K?n(!0):A(h)}}else{"undefined"!=typeof b.font&&""!==b.font&&"google"===b.font[0]&&WebFont.load({google:{families:[b.font[1]+b.font[2].properties]}}),elDataStyle=e.attr("data-style")&&"undefined"!==e.attr("data-style")?JSON.parse(atob(e.attr("data-style"))):{},elDataStyle.codeBefore=elDataStyle.codeBefore||"",elDataStyle.codeAfter=elDataStyle.codeAfter||"",elDataStyle.advancedClass=elDataStyle.advancedClass||"";var f=e.addClass(elDataStyle.advancedClass).find(".element").html(elDataStyle.codeBefore+b.output+b.js+elDataStyle.codeAfter);K?n(!0):A(h)}"undefined"!=typeof f&&("undefined"!=typeof b.shortcode&&i.val(b.shortcode),e.find(".op-waiting").fadeOut("fast",function(){f.fadeIn("fast",function(){l()})}),r(cur[0].closest(".editable-area"))),a(document).trigger("op.afterLiveEditorParse")},"json")},window.op_dont_show_loading?window.op_hide_loading():window.op_dont_show_loading=!1,a(document).ready(function(){var a=opjq,b=(a("#op-le-settings-toolbar"),a("#op-le-toggle-sidebar-btn"));Q.addClass("op-le-settings-toolbar--shown");var c=function(){return Q.toggleClass("op-le-settings-toolbar--hidden op-le-settings-toolbar--shown"),!1};b.parent().on("click",c),a(".op_child_shortcode_form").each(function(){this.reset()}),window.top.location.href!==window.location.href&&a("#op-liveeditor-logo").on("click",function(a){a.shiftKey&&(OptimizePress.disable_alert=!0,window.op_dont_hide_loading=!0,t(C)),a.preventDefault()}),a(window).on("keydown",function(b){return"115"!=b.which&&"83"!=b.which||!b.ctrlKey&&!b.metaKey?"79"==b.which&&(b.ctrlKey||b.metaKey)?(window.open(a("#op-view-public-link").attr("href"),"_blank"),!1):void 0:(OptimizePress.disable_alert=!0,t(),!1)}),a("body").on("click",".op-enable-post-comments",function(){return op_show_loading(),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-enable-post-comments",_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val()},function(b){op_hide_loading(),0!==b?(a(".op-enable-post-comments-container").remove(),alert("Comments for this page are now enabled.")):alert("Sorry, it seems that we can't change the page status. Please refresh the page and try again, and if it still not working, please contact our customer support.")}),!1})}),void a(window).load(function(){op_hide_loading()})):!1}(opjq),opjq.base64=function(a){function b(a,b){var c=g.indexOf(a.charAt(b));if(-1===c)throw"Cannot decode base64";return c}function c(a){var c,d,e=0,g=a.length,h=[];if(a=String(a),0===g)return a;if(g%4!==0)throw"Cannot decode base64";for(a.charAt(g-1)===f&&(e=1,a.charAt(g-2)===f&&(e=2),g-=4),c=0;g>c;c+=4)d=b(a,c)<<18|b(a,c+1)<<12|b(a,c+2)<<6|b(a,c+3),h.push(String.fromCharCode(d>>16,d>>8&255,255&d));switch(e){case 1:d=b(a,c)<<18|b(a,c+1)<<12|b(a,c+2)<<6,h.push(String.fromCharCode(d>>16,d>>8&255));break;case 2:d=b(a,c)<<18|b(a,c+1)<<12,h.push(String.fromCharCode(d>>16))}return h.join("")}function d(a,b){var c=a.charCodeAt(b);if(c>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c}function e(a){if(1!==arguments.length)throw"SyntaxError: exactly one argument required";a=String(a);var b,c,e=[],h=a.length-a.length%3;if(0===a.length)return a;for(b=0;h>b;b+=3)c=d(a,b)<<16|d(a,b+1)<<8|d(a,b+2),e.push(g.charAt(c>>18)),e.push(g.charAt(c>>12&63)),e.push(g.charAt(c>>6&63)),e.push(g.charAt(63&c));switch(a.length-h){case 1:c=d(a,b)<<16,e.push(g.charAt(c>>18)+g.charAt(c>>12&63)+f+f);break;case 2:c=d(a,b)<<16|d(a,b+1)<<8,e.push(g.charAt(c>>18)+g.charAt(c>>12&63)+g.charAt(c>>6&63)+f)}return e.join("")}var f="=",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="1.0";return{decode:c,encode:e,VERSION:h}}(opjq),function(a){function b(){oa.show(),setTimeout(function(){oa.css({transform:"translate3d(0,-475px,0)"})},1)}function c(){oa.is(":visible")&&(oa.css({transform:"translate3d(0,0,0)"}),setTimeout(function(){oa.hide(),pa.hasClass("help-video")&&pa.html("")},200))}function d(a){var b,c,d=a.find("span.content span.title").text();for(c=2;5>c;c++)b=T("slide_"+c+"_title").replace(/%element_name%/,d),sa[c].find("div.asset-title:first span.title-text").text(b)}function e(){var b=a(".fancybox-inner").height();a.each(sa,function(){this.height(b)})}function f(b,c,d){for(var e in b)for(var f in b[e]){var g=b[e][f];if("image"==e||"style"==e){var h=a("#"+f+"_container"),i=h.closest(".op_asset_browser_slide").attr("id");h.find(".op-asset-dropdown-list").append(g),("op_asset_browser_slide3"==i||"op_asset_browser_slide4"==i)&&W(f+"_container")}else"checkbox"==e&&a(".field-id-"+f+" .checkbox-container").append(g);Da[f]=g}o(c[0],c[1]),d(ua[c[0]][c[1]],ta[c[0]][c[1]]),a("#op_asset_browser_container").find(".op-asset-dropdown-list-item:not(.op-asset-dropdown-list-item--loaded)").find("img").one("load",function(){a(this).parent().addClass("op-asset-img-loaded").parent().addClass("op-asset-dropdown-list-item--loaded")}).each(function(){this.complete&&a(this).load()})}function g(b,c){var d=OptimizePress.localStorage.getItem(b[1]);p(b[0],b[1],op_asset_settings),a.object_length(Ba)>0?(d?f(JSON.parse(d),b,c):a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-assets-folder-list",folders:Ba},function(a){OptimizePress.localStorage.setItem(b[1],JSON.stringify(a)),f(a,b,c)},"json"),Ba={}):(o(b[0],b[1]),c(ua[b[0]][b[1]],ta[b[0]][b[1]]))}function h(b,c){var d,e;c=c||function(){},"Y"==op_assets[b[0]][b[1]].settings?("undefined"==typeof ta[b[0]]&&(ta[b[0]]={},ua[b[0]]={}),"undefined"==typeof ta[b[0]][b[1]]?(d=OptimizePress[b[0]+"_assets_url"],null!==op_assets[b[0]][b[1]].base_path?d=op_assets[b[0]][b[1]].base_path:"core"!=b[0]&&(d+=b[1]+"/"),e=OptimizePress.localStorage.getItem(b[1]+"_config"),e?(eval.call(window,e),g(b,c)):a.getScript(d+b[1]+OptimizePress.script_debug+".js",function(a){OptimizePress.localStorage.setItem(b[1]+"_config",a),g(b,c)})):("undefined"!=typeof ua[b[0]][b[1]]&&a.each(ua[b[0]][b[1]],function(){this.find(".wp-editor-area").each(function(){var b,c=a(this).attr("id"),d=op_wpautop(a(this).val());B.apply(a(this),[c,d]),b=tinyMCE.get(c),b.setContent(d)})}),o(b[0],b[1]),c(ua[b[0]][b[1]],ta[b[0]][b[1]]))):xa?(wa=!1,xa=!1,k(1)):(N("["+b[1]+"]"),a.fancybox.close())}function j(a,b,c){var d='<div class="op-insert-buttons cf">';"boolean"!=typeof b?("undefined"!=typeof b.prev&&(d+='<a href="#'+(c+1)+'" class="op-slide-link">'+T(b.prev)+"</a>"),"undefined"!=typeof b.next&&(d+='<a href="#'+(c+2)+'" class="op-slide-link">'+T(b.next)+"</a>"),("undefined"==typeof b.insert||"boolean"!=typeof b.insert||b.insert!==!1)&&(d+='<a href="#" class="op-bsw-green-button">'+T("Insert")+"</a>")):b===!0&&(d+='<a href="#" class="op-bsw-green-button">'+T("Insert")+"</a>"),d+='</div><div class="clear"></div>',a.append(d)}function k(b,c){var d,e,f=0,g=0;if(!wa){for(c=c===!1?!1:!0,g=0;b>g;g++)f+=ra[g].outerWidth(!0);if(d=a(".fancybox-opened").eq(-1),d.find(".op_asset_browser_slide_active").removeClass("op_asset_browser_slide_active"),c?(ja.addClass("op-slide-transition"),ja.css({transform:"translate3d("+-f+"px,0,0)"}),e=401):(e=0,ja.removeClass("op-slide-transition").css({transform:"translate3d("+-f+"px,0,0)"})),setTimeout(function(){d.find(".op_asset_browser_slide").eq(b).addClass("op_asset_browser_slide_active").find(".op_asset_content").addClass("op_no_outline").attr("tabindex",0).focus(),1===n()&&m(),2===n()&&OptimizePress.currentEditElement&&l(d,b)},e),a.browser&&a.browser.safari){var h=a(window).scrollTop();a(window).scrollTop(0===h?1e3:0),setTimeout(function(){a(window).scrollTop(h)},1)}}}function l(b,c){var d,e=a("#op_asset_browser_slide2"),f=e.find(".settings-container:visible"),g=(e.find(".op_asset_content"),f.find('img[alt="'+OptimizePress.currentEditElement+'"]').parent());return g&&0!==g.length?(g.addClass("selected").focus(),"function"!=typeof g[0].scrollIntoView?!1:void(f.find(".op-asset-dropdown-list-item:not(.op-asset-dropdown-list-item--loaded)").length>0&&(d=setInterval(function(){g[0].scrollIntoView({block:"start",behavior:"smooth"}),0===f.find(".op-asset-dropdown-list-item:not(.op-asset-dropdown-list-item--loaded)").length&&clearInterval(d)},400)))):!1}function m(){var b,c=n();1===c&&(b=a("#op_asset_browser_slide1").find(".op-last-selected-asset-list-item"),b.length>0?b.focus():a("#op_assets_filter").focus()),2===c&&(b=a("#op_asset_browser_slide2").find(".op-last-selected-asset-dropdown-list-item:visible"),a("#op_asset_browser_slide2").find(".op-last-selected-asset-dropdown-list-item:hidden").removeClass("op-last-selected-asset-dropdown-list-item"),b.length>0?b.removeClass("selected").focus():a(".op-asset-dropdown-list-item:visible").eq(0).find("a").focus())}function n(){var b;return a("#op_asset_browser_slider").find("> li").each(function(c){a(this).hasClass("op_asset_browser_slide_active")&&(b=c)}),b}function o(a,b){ea(a,b),Ga=[a,b],s(a,b),ia.find(".op_asset_browser_slide .op-settings-"+a+"-"+b).css("display","block")}function p(b,c,d){ua[b][c]=[],ta[b][c]=d,va[b][c]=[];var e="op-settings-"+b+"-"+c,f="op_assets_"+b+"_"+c+"_",g=d.insert_steps||{},h=d.help_vids||{};if(0==ra[2].find("> ."+e).length){Ha={};for(var i=1;4>i;i++){var k="";if("undefined"!=typeof h["step_"+i]&&(k=fa(h["step_"+i])),va[b][c].push(k),"undefined"==typeof d.attributes["step_"+i])break;var l=a('<div class="'+e+' settings-container"><div class="op-asset-actual-content" />');ua[b][c].push(l),sa[i+1].append(l);var m=l.find(".op-asset-actual-content");for(var n in d.attributes["step_"+i])w.apply(m,[f,n,d.attributes["step_"+i][n],b,c]);Q(l),"undefined"!=typeof g[i]&&j(l,g[i],i)}"undefined"!=typeof d.onGenerateComplete&&d.onGenerateComplete(ua[b][c]),a.each(Ha,function(b,c){var d=a(b);a.each(c,function(a,b){"string"==typeof b&&d.trigger(b)})}),ia.find("."+e).on("click",".op-insert-buttons .op-bsw-green-button",function(a){a.preventDefault(),q(ia)?z(b,c):r(ia)}),G()}}function q(b){var c,d=!0;return b.find(".op-required-input").length>0&&(b.find(".op-multirow-tabs").nextAll(".op-multirow").addClass("op-temp-show"),b.find(".op-required-input").each(function(b){var e,f;c=a(this),f=c.hasClass("field-wysiwyg")?!0:!1,isMedia=c.hasClass("field-media")?!0:!1,e=f?".op-wysiwyg:visible .wp-editor-area":isMedia?".op-file-uploader:visible .op-uploader-value":"input:visible, select:visible, textarea:visible",c.find(e).each(function(){var b=f?c.find(".op-wysiwyg:visible .wp-editor-area").attr("id"):"",e=f?tinyMCE.get(b).getContent():a(this).val();e?c.removeClass("op-required-input-error"):(d=!1,c.addClass("op-required-input-error"),f?tinyMCE.majorVersion>3?tinyMCE.get(b).on("change",function(b){b.level.content?a("#"+b.target.id).parentsUntil(".field-wysiwyg").parent().removeClass("op-required-input-error"):a("#"+b.target.id).parentsUntil(".field-wysiwyg").parent().addClass("op-required-input-error")}):tinyMCE.get(b).onChange.add(function(b,c){c.content?a("#"+b.id).parentsUntil(".field-wysiwyg").parent().removeClass("op-required-input-error"):a("#"+b.id).parentsUntil(".field-wysiwyg").parent().addClass("op-required-input-error")}):a(this).off("change blur").on("change blur",function(b){var c=a(this).parentsUntil(".op-required-input").parent();c.length<1&&(c=a(this).parent()),a(this).val()?c.removeClass("op-required-input-error"):c.addClass("op-required-input-error")}))})}),b.find(".op-multirow-tabs").nextAll(".op-multirow").removeClass("op-temp-show")),d&&b.find(".op-required-input-error").find("input, select, textarea").off("blur"),d}function r(b){var c,d,e;alert("Please enter all required fields."),c=b.find(".op-required-input-error").eq(0),c.is(":visible")||(d=c.parent(".op-multirow"),0===d.length&&(d=c.parentsUntil(".op-multirow").parent()),d&&(e=d.parent().find(".op-multirow").index(d),b.parentsUntil(".multirow-container").parent().find(".op-multirow-tabs li:eq("+e+") a").trigger("click"))),3!==n()&&k(3,!1),a(".op_asset_browser_slide_active > .op_asset_content").scrollTop(c[0].offsetTop),c.find("input:visible, textarea:visible, select:visible").focus()}function s(a,b){var c=!1;if(wa||xa||(wa=!0,xa=!0,c=!0),"undefined"!=typeof ta[a][b].attributes){var d="op_assets_"+a+"_"+b+"_",e=".field-id-op_assets_"+a+"_"+b+"_";for(var f in ta[a][b].attributes)for(var g in ta[a][b].attributes[f]){var h=ta[a][b].attributes[f][g];t(d+g,e+g,h)}}c&&(wa=!1,xa=!1)}function t(b,c,d){var e=d.type||"";if("tabs"==e)for(var f in d.tabs)for(var g in d.tabs[f].fields)t(b+"_"+f+"_"+g,c+"_"+f+"_"+g,d.tabs[f].fields[g]);else if("column"==e){b=b.replace("_left_column","").replace("_right_column",""),c=c.replace("_left_column","").replace("_right_column","");for(var f in d.elements)t(b+"_"+f,c+"_"+f,d.elements[f])}else if("container"==e){for(var f in d.attributes)t(b+"_"+f,c+"_"+f,d.attributes[f]);a(c+" .panel-controlx").attr("checked",d.default_value).trigger("change")}else if("slider"==e)$slider=a("#"+b),$slider.slider({value:x(d)}),$slider.slider("option","slide").call($slider,{},{value:x(d),id:b}),$slider.slider("option","stop").call($slider,{},{value:x(d),id:b});else if("text_properties"==e)a("#"+b+"_text").val(d.text_default).trigger("keydown"),a("#"+b+"_size").val(d.size_default).trigger("change"),a("#"+b+"_color").val(d.color_default).trigger("keydown"),a("#"+b+"_container a.selected-item").html(a("#"+b+"_container.op-asset-dropdown-list li:first a").html()),a("#op_asset_browser_slide3 .op-settings-"+Ga[0]+"-"+Ga[1]).trigger({type:"update_button_preview",id:b,value:"Default",font_type:"default",tag:Ga[1]}),a(c+" .op-font-style-bold").attr("checked",d.bold_default).trigger("change"),a(c+" .op-font-style-italic").attr("checked",d.italic_default).trigger("change"),a(c+" .op-font-style-underline").attr("checked",d.underline_default).trigger("change");else if("media"==e)$(b,"");else if("multirow"==e){var h=ia.find(c+"-multirow-container .op-multirow");v(h),h.remove()}else if("style-selector"==e||"image-selector"==e)W(b+"_container",x(d));else if("wysiwyg"==e)V(b,x(d));else if("font"==e)ia.find(c+" > a.reset").trigger("click");else if("checkbox"==e){var i=a(".field-id-"+b+" :checkbox").attr("checked",!1).trigger("change"),j=x(d);"object"==typeof j?a.each(j,function(a,b){i.filter('[value="'+b+'"]').attr("checked",!0).trigger("change")}):j===!0&&i.attr("checked",!0).trigger("change")}else if("radio"==e)a(".field-id-"+b+' :radio[value="'+x(d)+'"]').attr("checked",!0);else{var k=a("#"+b).val(x(d)).trigger("change"),j=k.val();if("undefined"!=typeof d.multirow)for(var l=0;j>l;l++)for(var m in d.multirow.attributes)t(b+"_"+l+"_"+m,c+"_"+l+"_"+m,d.multirow.attributes[m])}}function u(a,b,c){var d=this.append('<div class="panel-control"><input type="checkbox" name="op['+a+'][enabled]" id="'+b+'" value="'+c+'" class="panel-controlx"></div>');d.find(".panel-controlx").iButton({change:function(a){var b=a.closest(".op-bsw-grey-panel"),c=b.find(".op-bsw-grey-panel-content:first"),d=b.find(".show-hide-panel a:first"),e=c.is(":visible"),f=a.is(":checked");e||f!==!0?e&&f===!1&&(c.hide(),d.removeClass("op-bsw-visible")):(c.show(),d.addClass("op-bsw-visible"))}})}function v(b){var c=a(b).parent(),d=c.next();setTimeout(function(){var e=String(a(b).attr("class")).replace(/(^\s+|\s+$)/g,"").replace(/\s+/g," ").replace(/\s/g,".");e&&(e="."+e);var f=c.children(e).length,g=String(c.attr("class")).match(/(^|\s)multirow-container-length-([0-9]+)(?=(\s|$))/g);g&&a.each(g,function(a,b){c.removeClass(b)}),c.addClass("multirow-container-length-"+f);var g=String(d.attr("class")).match(/(^|\s)field-multirow-length-([0-9]+)(?=(\s|$))/g);g&&a.each(g,function(a,b){d.removeClass(b)}),d.addClass("field-multirow-length-"+f)})}function w(b,c,d,e,f,g){if("undefined"==typeof d.skip||1!=d.skip){var h,i=d.type||"input",j=d.help||"",k=d.title||"",g=g||"",l="button_preview"==d.type?"":d.addClass||"",m=d.readonly===!0?" readonly ":"",n=d.required?"op-required-input":"",o=b+c,p=d.removeCf||!1,q=a('<div class="field-row field-'+i+" field-id-"+o+" "+g+" "+l+" "+n+" field-"+c+(p?"":" cf")+'" />'),r=this,s=d.prefix||"",t=d.suffix||"",y=d.placeholder||"";if(s=""==s?"":T(s)+" ",t=""==t?"":" "+T(t),"microcopy"==i)return void r.append('<p class="micro-copy'+(""==l?"":" "+l)+'">'+T(d.text)+"</p>");if("tabs"==i){var z,A=r.append('<div class="field-id-'+o+'-multirow-container multirow-container field-type-tabs cf" />').find(".field-id-"+o+"-multirow-container"),E=o,H=A.append('<ul class="op-multirow-tabs cf" />').find(".op-multirow-tabs");for(var M in d.tabs){H.append('<li><a href="#'+M+'">'+T(d.tabs[M].title)+"</a></li>"),z=A.append('<div class="op-multirow op-multirow-'+M+'" />').find(".op-multirow-"+M);for(var N in d.tabs[M].fields)w.apply(z,[E+"_"+M+"_",N,d.tabs[M].fields[N],e,f]),a("#"+E+"_"+M+"_"+N).val(x(d.tabs[M].fields[N]))}return void H.find("a:first").trigger("click")}if(q.appendTo(this),a.inArray(i,["h1","h2","h3","h4","h5","h6","p"])>-1)q.append("<"+i+">"+T(k)+"</"+i+">");else if("multirow"==i)q.before('<div class="field-id-'+o+'-multirow-container multirow-container multirow-container-length-0 cf" />'),h=r.find(".field-id-"+o+"-multirow-container").append(""==k?"":'<label for="'+o+'">'+T(d.title)+"</label>"),q.addClass("field-multirow-length-0"),q.append('<a href="#" class="new-row">'+T("add_new")+" "+T(d.link_suffix||"")+"</a>"),h.data("op_current_increment",0);else if("column"===i)for(key in d.elements)w.apply(q,[s,b+key,d.elements[key],e,f]);else if("container"===i){var O=q.append('<div class="op-bsw-grey-panel section-'+o+'"><div class="op-bsw-grey-panel-header cf"><h3><a href="#">'+T(d.title)+'</a></h3></div><div class="op-bsw-grey-panel-content op-bsw-grey-panel-no-sidebar cf" id="op_container_content_'+o+'"></div></div>');O.on("click",".op-bsw-grey-panel-header h3 a",function(b){b.preventDefault();var c=a(this),d="addClass",e="show",f=c.closest(".op-bsw-grey-panel"),g=f.find(".op-bsw-grey-panel-content:first");g.is(":visible")&&(d="removeClass",e="hide"),c[d]("op-bsw-visible"),g[e]()}),"undefined"!=typeof d.showPanelControl&&!0===d.showPanelControl&&u.apply(O.find(".op-bsw-grey-panel-header"),[o,"panel_control_"+o,"Y"]);var P=O.find("#op_container_content_"+o);for(key in d.attributes)w.apply(P,[s,o+"_"+key,d.attributes[key],e,f]);O.find('input[type!="text"],select').change(function(b){var c,d;"checkbox"===a(this).attr("type")?(c=a(this).attr("name"),d=a(this).is(":checked")?1:0):(c=a(this).attr("id"),d=a(this).val()),a("#op_asset_browser_slide3 .op-settings-"+Ga[0]+"-"+Ga[1]).trigger({type:"update_button_preview",value:d,id:c,element_type:this.tagName.toLowerCase(),tag:Ga[1]})}),O.find('input[type="text"]').on("propertychange keydown input paste",function(b){a("#op_asset_browser_slide3 .op-settings-"+Ga[0]+"-"+Ga[1]).trigger({type:"update_button_preview",value:a(this).val(),id:a(this).attr("id"),element_type:this.tagName.toLowerCase(),tag:Ga[1]})})}else switch(q.append(""==k?"":'<label for="'+o+'">'+T(d.title)+"</label>"),"undefined"!=typeof d.helpPosition&&"top"==d.helpPosition&&""!=j&&q.append('<p class="micro-copy">'+T(j)+"</p>"),i){case"custom_html":q.append(d.html);break;case"button_preview":q.append('<div class="preview_border preview-wrapper"><div class="preview-outer"><div class="preview-inner preview_border op-asset-dropdown" id="'+o+'_container"><a href="#" tabindex="-1" class="selected-item css-button style-1 pbox_'+d.addClass+'" id="op_button_preview"><span class="text">'+("undefined"!=typeof d.text?d.text:"Placeholder text")+"</span><span"+("undefined"!=typeof d.showSubtext&&d.showSubtext===!1?' style="display:none !important;"':"")+' class="subtext">'+("undefined"!=typeof d.subtext?d.subtext:"Placeholder subtext")+"</span><div"+("undefined"!=typeof d.showGradient&&d.showGradient===!1?' style="display:none !important;"':"")+'  class="gradient"></div><div'+("undefined"!=typeof d.showShine&&d.showShine===!1?' style="display:none !important;"':"")+'  class="shine"></div><div class="hover"></div><div class="active"></div></a>'+K(o,"",d.selectorClass||"")+"</div></div></div>"),"undefined"!=typeof d.folder&&J("image",{fieldid:o,group:e,tag:f,folder:d.folder},d);break;case"media":q.append(a("#op_dummy_media_container").html().replace(/op_dummy_media/g,o)),"undefined"!=typeof d.callback&&a("#"+o).change(d.callback);break;case"wysiwyg":B.apply(q,[o]);
break;case"slider":var Q="";"undefined"!=typeof d.showOutputElement&&d.showOutputElement===!0&&(Q='<div class="slider-output"><span id="output_'+o+'" data-unit="'+d.unit+'">'+("undefined"!=typeof d.default_value?d.default_value:0)+d.unit+"</span></div>"),slider=q.append(s+Q+'<div class="slider-item" id="'+o+'" data-min="'+("undefined"!=typeof d.min?d.min:0)+'" data-max="'+("undefined"!=typeof d.max?d.max:0)+'" data-value="'+("undefined"!=typeof d.default_value?d.default_value:0)+'" />'+t),slider.find(".slider-item").slider({min:"undefined"!=typeof d.min?d.min:0,max:"undefined"!=typeof d.max?d.max:0,value:"undefined"!=typeof d.default_value?d.default_value:0,stop:function(b,c){var d;d="undefined"!=typeof c.handle?a(c.handle).parent().attr("id"):c.id,a("#op_asset_browser_slide3 .op-settings-"+Ga[0]+"-"+Ga[1]).trigger({type:"update_button_preview",value:c.value,id:d,element_type:"slider",tag:Ga[1]})},slide:function(b,c){var d;d="undefined"!=typeof c.handle?a(c.handle).parent().attr("id"):c.id;var e=a("#output_"+d);e.length>0&&e.html(c.value+e.attr("data-unit"))}});break;case"color":q.append('<div class="color-picker-container cf">'+s+'<input type="text" value="'+(void 0!=typeof d.default_value?d.default_value:"")+'" id="'+o+'" name="'+o+'" />'+t+'<a href="#" class="op-pick-color hide-if-no-js"></a></div>');break;case"checkbox":var R=d.func||"prepend";q[R]('<div class="checkbox-container">'+F(o,d,i,e,f)+"</div>"),"undefined"!=typeof d.appendTo&&q.on("change",":checkbox",function(){var c=a(".field-id-"+b+d.appendTo+" :input"),e=c.val(),f=a(this).val();"undefined"==typeof e&&(e=""),a(this).is(":checked")?e+="|"+f:e=e.replace(new RegExp(f,"g"),""),e=e.replace(new RegExp("^[|]+","g"),""),c.val(e)});break;case"radio":q.append('<div class="checkbox-container">'+F(o,d,i,e,f)+"</div>");break;case"image-selector":"undefined"!=typeof d.folder&&J("image",{fieldid:o,group:e,tag:f,folder:d.folder},d),q.append(L(o,"",d.selectorClass||""));break;case"text_properties":q.append(D(o,d)).find(".selected-item").html(q.find("li a:first").html());break;case"font":q.append(C(o,d)).find(".selected-item").html(q.find("li a:first").html());break;case"style-selector":"undefined"!=typeof d.folder&&J("style",{fieldid:o,group:e,tag:f,folder:d.folder},d),q.append(L(o,"",d.selectorClass||""));break;case"select":q.append(s+'<select name="'+o+'" id="'+o+'">'+F(o,d,i,e,f)+"</select>"+t);break;case"membership_select":q.append(s+'<select name="'+o+'" id="'+o+'">'+F(o,d,i,e,f)+"</select>"+t);break;case"textarea":q.append(s+'<textarea cols="30" rows="10" name="'+o+'" id="'+o+'"'+m+"></textarea>"+t);break;case"hidden":q.append(s+'<input type="hidden" name="'+o+'" id="'+o+'" value="'+(void 0!=typeof d.default_value?d.default_value:"")+'" />'+t);break;case"paragraph":q.append(s+'<p name="'+o+'" id="'+o+'">'+(void 0!=typeof d.text?d.text:"")+"</p>"+t);break;case"posts_multiselect":var S="";a.ajax({url:OptimizePress.ajaxurl,data:{action:OptimizePress.SN+"-assets-posts-list"},success:function(a){for(OptimizePress.postList=JSON.parse(a),S+='<select multiple="multiple" id="my-select" name="my-select[]">',M=0;M<OptimizePress.postList.length;M++)S+='<option value="'+OptimizePress.postList[M].ID+'" data-meta="'+OptimizePress.postList[M].ID+" "+OptimizePress.postList[M].post_title+" "+OptimizePress.postList[M].categories+'">'+OptimizePress.postList[M].post_title+"</option>";S+="</select>",S+="<script>opjq(\"#my-select\").multiSelect({keepOrder:true,selectableHeader: \"<input type='text' class='search-input' autocomplete='off' placeholder='Search posts'>\",selectionHeader: \"<input type='text' class='search-input' autocomplete='off' placeholder='Search posts'>\",afterInit: function(ms){var that = this,$selectableSearch = that.$selectableUl.prev(),$selectionSearch = that.$selectionUl.prev(),"+'selectableSearchString = "#" + that.$container.attr("id") + " .ms-elem-selectable:not(.ms-selected)";selectionSearchString  = "#" + that.$container.attr("id") + " .ms-elem-selection.ms-selected";that.qs1 = $selectableSearch.quicksearch(selectableSearchString, {testQuery: function (query, txt, _row) {txt = opjq(_row).attr("data-meta");txt = txt.toLowerCase();for (var i = 0; i < query.length; i += 1) {if (txt.indexOf(query[i]) === -1) {return false;}}return true;}}).on("keydown", function(e){if (e.which === 40){that.$selectableUl.focus();return false;}});that.qs2 = $selectionSearch.quicksearch(selectionSearchString, {testQuery: function (query, txt, _row) {txt = opjq(_row).attr("data-meta");txt = txt.toLowerCase();for (var i = 0; i < query.length; i += 1) {if (txt.indexOf(query[i]) === -1) {return false;}}return true;}}).on("keydown", function(e){if (e.which === 40){that.$selectableUl.focus();return false;}});},afterSelect: function(){this.qs1.cache();this.qs2.cache();},afterDeselect: function(){this.qs1.cache();this.qs2.cache();}});</script>',q.append(s+S+t)},error:function(a){console.log(a)}});break;default:q.append(s+'<input type="text" name="'+o+'" id="'+o+'" placeholder="'+y+'" />'+t)}if("undefined"!=typeof d.helpPosition&&"top"==d.helpPosition||""==j||q.append('<p class="micro-copy">'+T(j)+"</p>"),"undefined"!=typeof d.events)if("image-selector"!=i&&"style-selector"!=i||"undefined"==typeof d.events.change){var U=typeof d.trigger_events,X=a("#"+o);for(var M in d.events)X.bind(M,ua[e][f],d.events[M]);if("undefined"!=U){U="object"!=U?[d.trigger_events]:d.trigger_events,Ha["#"+o]=[];for(var M in U)Ha["#"+o].push(U[M])}}else q.on("click","li a",function(b){b.preventDefault(),a(this).closest("ul").find("a.selected").removeClass("selected").end().end().addClass("selected");var c=d.events.change(a(this).find("img").attr("alt"),ua[e][f]);c===!1&&b.stopPropagation()});if("undefined"!=typeof d.showOn)if("object"==typeof d.showOn.value){var Y=a.extend({},d.showOn);for(var M in d.showOn.value)Y.value=d.showOn.value[M],I(e,f,c,Y,b),"multirow"==i&&I(e,f,c+"-multirow-container",Y,b)}else I(e,f,c,d.showOn,b),"multirow"==i&&I(e,f,c+"-multirow-container",d.showOn,b);if("undefined"!=typeof d.showFields){var Z=r.find(".field-id-"+o);A=Z.append('<div class="show-fields"/>').find(".show-fields"),E=o;for(var $ in d.showFields)w.apply(A,[E+"_",$,d.showFields[$],e,f,"show-field-"+$]);A.find(".field-row").hide(),"image-selector"==i||"style-selector"==i?a("body").on("click","#"+E+"_container .op-asset-dropdown-list a",function(b){b.preventDefault();var c=a(this).find("img").attr("alt");A.find(".field-row").hide().filter(".show-field-"+c).show()}):a("#"+E).change(function(){A.find(".field-row").hide().filter(".show-field-"+a(this).val()).show()})}else if("undefined"!=typeof d.multirow){var A=h,E=o,_=!1;if("undefined"==typeof A&&(A=r.append('<div class="field-id-'+o+'-multirow-container multirow-container cf" />').find(".field-id-"+o+"-multirow-container")),"multirow"==i){var z,s=d.multirow.link_prefix||"",t=d.multirow.link_suffix||"";s=""==s?"":T(s)+" ",t=""==t?"":" "+T(t),remove_row="",remove_row_str='<a href="#" class="remove-row"><img src="'+OptimizePress.imgurl+'remove-row.png" alt="'+T("remove_row")+'" /></a>',a(".field-id-"+E+" a.new-row").click(function(b){if("none"!=a(this).css("pointer-events")){var c=A.data("op_current_increment"),g=A.append('<div class="op-multirow cf" />').find(".op-multirow:last");c=0!=c?c:A.find(".op-multirow").length,c++,A.data("op_current_increment",c),remove_row=d.multirow.remove_row||"before","before"==remove_row&&g.append(remove_row_str);for(var h in d.multirow.attributes){var i=d.multirow.attributes[h],j=i.type||"";if(w.apply(g,[E+"_"+c+"_",h,i,e,f]),"undefined"!=typeof Da[E+"_"+h]){var k=a("#"+E+"_"+c+"_"+h+"_container");k.find("a.selected-item").html(k.find(".op-asset-dropdown-list").html(Da[E+"_"+h]).find("a:first").html())}if("undefined"!=typeof i.default_value)switch(j){case"style-selector":case"image-selector":W(E+"_"+c+"_"+h+"_container",x(i));break;case"wysiwyg":V(E+"_"+c+"_"+h,x(i));break;case"paragraph":a("#"+E+"_"+c+"_"+h).html(x(i));break;default:a("#"+E+"_"+c+"_"+h).val(x(i))}}"after"==remove_row&&g.append(remove_row_str),G(!0),v(g),"function"==typeof d.multirow.onAdd&&d.multirow.onAdd.apply(g,[ua[e][f]])}b.preventDefault()}),a(".field-id-"+E+"-multirow-container").on("click","a.remove-row",function(b){if(b.preventDefault(),"none"!=a(this).css("pointer-events")){var c,d=a(this).parent();d.hasClass("pricing-table-row")||d.hasClass("op-feature-title-row")?(v(d),d.remove()):(c=a(this).closest(".op-multirow"),c.parent().next().find("a.new-row").focus(),v(c),c.remove())}});for(var $ in d.multirow.attributes)if("undefined"!=typeof d.multirow.attributes[$].folder){var aa=d.multirow.attributes[$].type||"",ba=d.multirow.attributes[$].folder;"style-selector"==aa?J("style",{fieldid:E+"_"+$,group:e,tag:f,folder:ba},d.multirow.attributes[$]):"image-selector"==aa&&J("image",{fieldid:E+"_"+$,group:e,tag:f,folder:ba},d.multirow.attributes[$])}}else{var H=A.append('<ul class="op-multirow-tabs cf" />').find(".op-multirow-tabs");a("#"+o).change(function(){var b=parseInt(a(this).val()),c=A.find(".op-multirow");H.find("li:visible").length;if(c.length<b){H.find("li").show().addClass("visible");var g,h=d.multirow.link_prefix||"",i=d.multirow.link_suffix||"";h=""==h?"":T(h)+" ",i=""==i?"":" "+T(i);for(var j=c.length;b>j;j++){g=A.append('<div class="op-multirow op-multirow-'+j+' cf" />').find(".op-multirow:last"),H.append('<li class="visible"><a href="#'+j+'">'+h+(j+1)+"</a></li>");for(var k in d.multirow.attributes){var l=d.multirow.attributes[k],m=l.type||"input";if(w.apply(g,[E+"_"+j+"_",k,l,e,f]),"undefined"!=typeof l.default_value)switch(m){case"style-selector":case"image-selector":W(E+"_"+j+"_"+k+"_container",x(l));break;case"wysiwyg":V(E+"_"+j+"_"+k,x(l));break;case"paragraph":a("#"+E+"_"+j+"_"+k).html(x(l));break;default:a("#"+E+"_"+j+"_"+k).val(x(l))}}_||(G(),_=!0),"function"==typeof d.multirow.onAdd&&d.multirow.onAdd.apply(A,[ua[e][f]])}}else H.find("li").filter(":gt("+(b-1)+")").hide().removeClass("visible").end().filter(":lt("+b+")").show().addClass("visible"),c.hide();c=H.find("li.visible.selected a"),0==c.length&&(c=H.find("li.visible:first a")),c.trigger("click")}).trigger("change")}}}}function x(b){return"undefined"!=typeof b.default_value?a.isFunction(b.default_value)?b.default_value():b.default_value:""}function y(b,c){var d=ta[b][c].attributes,e={},f="op_assets_"+b+"_"+c+"_",g=["h1","h2","h3","h4","h5","h6","p"],h="text";if("undefined"==typeof d)return e;for(var i in d)for(var j in d[i]){var k=d[i][j].type||"";if("column"==k)for(var l in d[i][j].elements){var k=d[i][j].elements[l].type||"";if("container"==k){var m=d[i][j].elements[l].showPanelControl||!1;if(1==m&&a("#panel_control_"+f+l).is(":checked")||0==m){for(var n in d[i][j].elements[l].attributes){var k=d[i][j].elements[l].attributes[n].type||"";if("text_properties"==k){e[n+"_text"]=A(f+l+"_"+n+"_text",{}),e[n+"_size"]=A(f+l+"_"+n+"_size",{}),e[n+"_color"]=A(f+l+"_"+n+"_color",{}),h="subtext_box"===l?"subtext":"text",e[n+"_bold"]=a(".field-id-"+f+l+"_"+n+' input[name="op_font[style_checkbox_'+h+'][bold]"]').is(":checked")?"Y":"",e[n+"_italic"]=a(".field-id-"+f+l+"_"+n+' input[name="op_font[style_checkbox_'+h+'][italic]"]').is(":checked")?"Y":"",e[n+"_underline"]=a(".field-id-"+f+l+"_"+n+' input[name="op_font[style_checkbox_'+h+'][underline]"]').is(":checked")?"Y":"";var o=a("#"+f+l+"_"+n+"_container a.selected-item .op-font");o.length>0?e[n+"_font"]=o.attr("data-font")+";"+o.attr("data-type"):e[n+"_font"]=""}else"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[n]=A(f+l+"_"+n,d[i][j].elements[l].attributes[n]))}e[l+"_panel"]="Y"}else e[l+"_panel"]="N"}else"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[l]=A(f+j,d[i][j].elements[l]))}else if("container"==k)for(var l in d[i][j].attributes){var k=d[i][j].attributes[l].type||"";"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[l]=A(f+j+"_"+l,d[i][j].attributes[l]))}else"microcopy"!=k&&"custom_html"!=k&&a.inArray(k,g)<0&&(e[j]=A(f+j,d[i][j]))}return e}function z(b,c){var d=["h1","h2","h3","h4","h5","h6","p"];if(xa)return!1;if("undefined"!=typeof ta[b][c]){var e="op_assets_"+b+"_"+c+"_";if("function"==typeof ta[b][c].customInsert){var f=y(b,c);wpActiveEditor=wpActiveEditor||"content",ta[b][c].customInsert(f)}else{var g="",h="",i=!1;if("undefined"!=typeof ta[b][c].attributes)for(var j in ta[b][c].attributes)for(var k in ta[b][c].attributes[j]){var l=ta[b][c].attributes[j][k].type||"";if("microcopy"!=l&&"custom_html"!=l&&a.inArray(l,d)<0){var m=ta[b][c].attributes[j][k],n=A(e+k,m),o=!0;if("object"==typeof n)for(var p in n)g+=(""==g?"":" ")+k+"_"+p+'="'+encodeURIComponent(n[p])+'"';else if("undefined"==typeof m.exclude||m.exclude!==!0){if("undefined"!=typeof m.showOn){o=!1;var q=m.showOn.field.split("."),r=A(e+q[1],ta[b][c].attributes[q[0]][q[1]]);if("object"==typeof m.showOn.value){for(var p in m.showOn.value)if(r==m.showOn.value[p]){o=!0;break}}else r==m.showOn.value&&(o=!0)}o&&("content"==k?(i=!0,""==n&&(n=" "),h=n):""!=n&&("undefined"!=typeof m.attr&&(k=m.attr),g+=(""==g?"":" ")+k+'="'+encodeURIComponent(n)+'"'))}}}var s="["+c+(""==g?"":" ")+g+"]";i&&(h=HTMLtoXML(h),s+=h+"[/"+c+"]"),s+="",wpActiveEditor=wpActiveEditor||"content",N(s),a.fancybox.close()}}return!0}function A(b,c){var d=c.type||"input";if("undefined"!=typeof c.multirow){if(el=a(".field-id-"+b+"-multirow-container"),"multirow"==d){var e=[];el.find(".op-multirow, .op-feature-title-row").each(function(){var b=a(this),d={};for(var f in c.multirow.attributes){var g,h=c.multirow.attributes[f].type||"";"style-selector"==h||"image-selector"==h?(g=b.find('div[id$="_'+f+'_container"]').attr("id"),g=g.substring(0,g.length-10)):g=b.find(':input[id$="_'+f+'"]').attr("id"),d[f]=A(g,c.multirow.attributes[f])}e.push(d)})}else for(var e={total:A(b,{type:c.type}),rows:[]},f=0;f<e.total;f++){var g={};for(var h in c.multirow.attributes)g[h]=A(b+"_"+f+"_"+h,c.multirow.attributes[h]);e.rows.push(g)}return e}if("tabs"==d){var i={};for(var f in c.tabs){i[f]={};for(var j in c.tabs[f].fields)if(i[f][j]={},"column"==c.tabs[f].fields[j].type)for(var k in c.tabs[f].fields[j].elements){var d=c.tabs[f].fields[j].elements[k].type||"";if("container"==d){var l=c.tabs[f].fields[j].elements[k].showPanelControl||!1;if(1==l&&a("#panel_control_"+b+"_"+f+"_"+k).is(":checked")||0==l){for(var m in c.tabs[f].fields[j].elements[k].attributes){var d=c.tabs[f].fields[j].elements[k].attributes[m].type||"";if("text_properties"==d){i[f][j][m+"_text"]=A(b+"_"+f+"_"+k+"_"+m+"_text",{}),i[f][j][m+"_size"]=A(b+"_"+f+"_"+k+"_"+m+"_size",{}),i[f][j][m+"_color"]=A(b+"_"+f+"_"+k+"_"+m+"_color",{}),i[f][j][m+"_bold"]=a(".field-id-"+b+"_"+f+"_"+k+"_"+m+' input[name="op_font[style_checkbox_text][bold]"]').is(":checked")?"Y":"",i[f][j][m+"_italic"]=a(".field-id-"+b+"_"+f+"_"+k+"_"+m+' input[name="op_font[style_checkbox_text][italic]"]').is(":checked")?"Y":"",i[f][j][m+"_underline"]=a(".field-id-"+b+"_"+f+"_"+k+"_"+m+' input[name="op_font[style_checkbox_text][underline]"]').is(":checked")?"Y":"";var n=a("#"+b+"_"+f+"_"+k+"_"+m+"_container a.selected-item .op-font");n.length>0?i[f][j][m+"_font"]=n.attr("data-font")+";"+n.attr("data-type"):i[f][j][m+"_font"]=""}else"microcopy"!=d&&"custom_html"!=d&&(i[f][j][m]=A(b+"_"+f+"_"+k+"_"+m,c.tabs[f].fields[j].elements[k].attributes[m]))}i[f][j][k+"_panel"]="Y"}else i[f][j][k+"_panel"]="N"}else"microcopy"!=d&&"custom_html"!=d&&(i[f][j][k]=A(b+"_"+j,c.tabs[f].fields[j].elements[k]))}else i[f][j]=A(b+"_"+f+"_"+j,c.tabs[f].fields[j])}return i}var o;switch(d){case"slider":o=a("#"+b).slider("value");break;case"text_properties":break;case"font":var p=a(".field-id-"+b),q={size:["select:first","val"],font:[".op-asset-dropdown a:first .op-font","attr","data-font"],style:['select[name$="[style]"]',"val"],color:[".color-picker-container :input","val"],spacing:['select[name$="[spacing]"]',"val"],shadow:['select[name$="[shadow]"]',"val"]};o={},"undefined"!=typeof c.size_text&&(q.size[0]=':input[name$="[size]"]');for(var f in q){var r=a(q[f][0],p),s="";r.length>0&&(s="undefined"!=typeof q[f][2]?r[q[f][1]](q[f][2]):r[q[f][1]]()),""!=s&&(o[f]=s)}break;case"image-selector":case"style-selector":o=X(b+"_container");break;case"checkbox":o=a("#"+b).is(":checked")?"Y":"";break;case"radio":o=a(".field-id-"+b+" :radio:checked").val();break;case"textarea":var t=c.format||"op_unautop";o=a("#"+b).val(),o="custom"===t?o:"br"==t?ca(o):op_wpautop(o);break;case"wysiwyg":o=U(b);break;case"paragraph":o=a("#"+b).html();break;default:o=a("#"+b).val()}if("undefined"!=typeof c.showFields){var u={value:o,fields:{}};for(var h in c.showFields)u.value==h&&(u.fields[h]=A(b+"_"+h,c.showFields[h]));return u}return"string"==typeof o&&(o=HTMLtoXML(o)),o}function B(b,c){var d,e,f,g;za?("undefined"==typeof OptimizePress.op_dummy_wysiwyg&&(OptimizePress.op_dummy_wysiwyg=a("#op_dummy_wysiwyg").html()),d=OptimizePress.op_dummy_wysiwyg.replace(/opassetswysiwyg/g,b),this.append(d),e=a.extend({},tinyMCEPreInit.mceInit.opassetswysiwyg,{editor_selector:"cls-"+b,selector:"#"+b,wpautop:!1,height:120,init_instance_callback:function(b){QTags._buttonsInit(),a("#wp-"+b.id+"-wrap").removeClass("html-active").addClass("tmce-active")},setup:function(b){b.on("FullscreenStateChanged",function(c){var d,e,f;try{b.plugins.fullscreen.isFullscreen()&&(f=a(b.container),d=window.innerWidth,e=window.innerHeight-f.find(".mce-toolbar-grp").outerHeight()-f.find(".mce-statusbar").outerHeight(),b.theme.resizeTo(null,e))}catch(c){console.error("Error in fullscreen plugin of TinyMCE",c)}})}}),f=a.extend(tinyMCEPreInit.qtInit.opassetswysiwyg,{id:b}),g=QTags.getInstance(b),"undefined"==typeof g&&quicktags(f),"undefined"!=typeof tinyMCE&&tinyMCE.init(e)):(this.append('<textarea cols="30" rows="10" id="'+b+'" name="'+b+'" />'),g=QTags.getInstance(b),"undefined"==typeof g&&quicktags(b),"undefined"==typeof g&&QTags._buttonsInit())}function C(b,c){var d,e,f={size:"",font:".font-dropdown",style:"",spacing:"",shadow:""},g="",h=c.disable||{};for(e in f)"undefined"==typeof Ea[e]&&(d=a("#op_font"+e),""!=f[e]&&(d=d.find(f[e])),Ea[e]=d.html());return"undefined"==typeof h.size&&(g+="undefined"!=typeof c.size_text?'<input type="text" name="'+b+'[size]" id="'+b+'_size" />px':'<select name="'+b+'[size]" id="'+b+'_size">'+Ea.size+"</select>"),"undefined"==typeof h.font&&(g+=L(b,Ea.font,"font-view")),"undefined"==typeof h.style&&(g+='<select name="'+b+'[style]" id="'+b+'_style">'+Ea.style+"</select>"),"undefined"==typeof h.color&&(g+='<div class="color-picker-container cf"><input type="text" value="" id="'+b+'_color" name="'+b+'[color]" /><a href="#" class="op-pick-color hide-if-no-js"></a></div>'),"undefined"==typeof h.spacing&&(g+='<select name="'+b+'[spacing]" id="'+b+'_spacing">'+Ea.spacing+"</select>"),"undefined"==typeof h.shadow&&(g+='<select name="'+b+'[shadow]" id="'+b+'_shadow">'+Ea.shadow+"</select>"),""!=g?g='<div class="op-typeography font-chooser cf">'+g+'</div><a href="#reset-font" class="reset">'+T("reset")+"</a>":""}function D(b,c){var d,e={size:"",font:".font-dropdown",style_checkbox_text:"",style_checkbox_subtext:""},f="";if("op_assets_core_button_text_box_text_properties_1"===b||"op_assets_core_membership_order_button_text_box_text_properties_1"===b||"op_assets_core_membership_order_button_text_box_text_properties_1"===b||"op_assets_core_op_popup_text_box_text_properties_1"===b||"op_assets_core_optin_box_tabs_submit_button_text_box_text_properties_1"===b||"op_assets_core_optin_modal_tabs_submit_button_text_box_text_properties_1"===b)var g="style_checkbox_text";else var g="style_checkbox_subtext";for(var h in e)"undefined"==typeof Ea[h]&&(d=a("#op_font"+h),""!=e[h]&&(d=d.find(e[h])),Ea[h]=d.html());return f+='<input type="text" name="'+b+'[text]" id="'+b+'_text" value="'+("undefined"!=typeof c.text_default?c.text_default:"")+'" />',f+="undefined"!=typeof c.size_text?'<input type="text" name="'+b+'[size]" id="'+b+'_size" />px':'<select name="'+b+'[size]" id="'+b+'_size">'+Ea.size+"</select>",f+=L(b,Ea.font,"font-view"),f+='<div class="color-picker-container cf"><input type="text" value="" id="'+b+'_color" name="'+b+'[color]" /><a href="#" class="op-pick-color hide-if-no-js"></a></div>',f+='<div class="style-checkbox-selector cf">'+Ea[g]+"</div>"}function E(a,b,c,d,e,f){var g="";switch(f=f||!1,d=d||"",e=e||!1,a){case"checkbox":g='<input type="checkbox" name="'+b+(f?'" id="'+b+'"':'[]"')+' value="'+c+'"'+(e?' checked="checked"':"")+" />",""!=d&&(g="<label>"+g+" "+d+"</label>");break;case"radio":g='<input type="radio" name="'+b+'[]" value="'+c+'"'+(e?' checked="checked"':"")+" />",""!=d&&(g="<label>"+g+" "+d+"</label>");break;case"select":g='<option value="'+c+'"'+(e?' selected="selected"':"")+">"+d+"</option>";break;case"membership_select":if(""!=c){var h=c.split("-");c=h[1],classStr=h[0]}else classStr="",c="";g='<option class="parent-'+classStr+'" value="'+c+'"'+(e?' selected="selected"':"")+">"+d+"</option>"}return g}function F(a,b,c,d,e){var f="",g=x(b);if("undefined"!=typeof b.folder)J(c,{fieldid:a,group:d,tag:e,folder:b.folder},b);else if("undefined"!=typeof b.valueRange){var h=b.valueRange.finish+1,i=b.valueRange.text_prefix||"",j=b.valueRange.text_suffix||"";i=""==i?"":T(i)+" ",j=""==j?"":" "+T(j);for(var k=b.valueRange.start;h>k;k++)f+=E(c,a,k,i+k+j,g==k)}else if("undefined"!=typeof b.values)for(var l in b.values)f+=E(c,a,l,T(b.values[l]),g==l);else f+=E(c,a,"Y","","Y"==g,!0);return f}function G(b){b="undefined"==typeof b?!1:b;for(var c in Ca){var d=ia.find("."+c),e=[];for(var f in Ca[c]){var g=Ca[c][f];if("image-selector"==g.type||"style-selector"==g.type||"button_preview"==g.type)if(b){var h={};h["show_on_values_multirow_"+Ka]=g.values,a("#"+f+"_container").data(h),function(b){a("#"+f+"_container").on("click",".op-asset-dropdown-list a",function(c){c.preventDefault(),H.apply(d,[a(this).find("img").attr("alt"),a(this).closest(".op-asset-dropdown").data("show_on_values_multirow_"+b)])})}(Ka),Ka+=1}else a("#"+f+"_container").data({show_on_values:g.values}),a("#"+f+"_container").on("click",".op-asset-dropdown-list a",function(b){b.preventDefault(),H.apply(d,[a(this).find("img").attr("alt"),a(this).closest(".op-asset-dropdown").data("show_on_values")])});else e.push("#"+f),d.find("#"+f).data({show_on_values:g.values}).change(function(){H.apply(d,[a(this).val(),a(this).data("show_on_values")])}).trigger("change")}}Ca={}}function H(b,c){var d,e,f,g,h,i=this,j="",k={},l=[],m=0;for(f in c){for(d=[],e=[],m=0;m<c[f].length;m+=1)d.push(c[f][m].selector),e.push(c[f][m].displayType);l.push(d);var n=d.join(",");f==b?(j=n,g=d,h=e):"undefined"==typeof k[n]&&(k[n]=!0,i.find(n).css("display","none"))}if(""!=j)for(a(j).css("display","block").find(":input").trigger("change"),m=0;m<g.length;m+=1)a(g[m]).css("display",h[m]).find(":input").trigger("change")}function I(a,b,c,d,e){var f="op-settings-"+a+"-"+b,g=d.field.split("."),h=g[g.length-1];if(h="undefined"!=typeof d.idprefix?d.idprefix+h:e+h,"undefined"==typeof Ca[f]&&(Ca[f]={}),"undefined"==typeof Ca[f][h]){Ca[f][h]={values:{}};for(var i=ta[a][b].attributes,j=0,k=g.length;k>j;j++)i=i[g[j]];Ca[f][h].type="undefined"!=typeof d.type?d.type:i.type||"input"}"undefined"==typeof Ca[f][h].values[d.value]&&(Ca[f][h].values[d.value]=[]),Ca[f][h].values[d.value].push({selector:".field-id-"+e+c,displayType:d.displayType||"block"})}function J(a,b,c){"undefined"!=typeof c.asset&&(b.group=c.asset[0],b.tag=c.asset[1]),"undefined"!=typeof c.ignore_vals&&(b.ignore_vals=c.ignore_vals),"undefined"==typeof Ba[a]&&(Ba[a]=[]),Ba[a].push(b)}function K(a,b,c){var b=b||"";return'<div class="op-asset-dropdown-list">'+b+"</div>"}function L(a,b,c){var b=b||"";return""!=c&&(Ia[c]=!0),'<div class="op-asset-dropdown'+(""==b?" loading-asset-dropdown":"")+" "+c+'" id="'+a+'_container"><a class="selected-item" href="#"></a><div class="op-asset-dropdown-list">'+b+"</div></div>"}function M(){0==a("#op-color-picker").length&&a("body").append('<div id="op-color-picker" />'),na=a("#op-color-picker"),ma=a.farbtastic("#op-color-picker",R),ia.on("focus",".color-picker-container :input",function(){$cp_link="undefined"==typeof a(this).data("cp_link")?a(this).siblings("a.op-pick-color"):a(this).data("cp_link"),a(this).data("cp_link",$cp_link),$cp_link.trigger("click")}).on("blur",".color-picker-container :input",function(){var b=a(this),c=S(b.val());c="#"===c?"":c,la&&la[1]&&R(c),na.hide()}).on("change",".color-picker-container :input",function(){var b=a(this),c=S(b.val());$cp_link="undefined"==typeof b.data("cp_link")?a(this).siblings("a.op-pick-color"):b.data("cp_link"),a(this).data("cp_link",$cp_link),$cp_link.css("background-color","#"==c?"transparent":c),na.is(":visible")&&"#"!=c&&ma.setColor(c)}),ia.on("click","a.op-pick-color",function(b){$input="undefined"==typeof a(this).data("input")?a(this).prev("input"):a(this).data("input"),a(this).data("input",$input),la=[a(this),$input],R(la[1].val()),na.position({of:la[0],my:"left top",at:"left bottom"}).show(),b.preventDefault()})}function N(a){"undefined"!=typeof op_le_insert_content?op_le_insert_content(a):send_to_editor(a+"<br /><br />")}function O(b,c,d){if("function"==typeof d.customSettings)d.customSettings(b,c);else for(var e="op_assets_"+b.asset[0]+"_"+b.asset[1]+"_",f=b.attrs||{},g=1;4>g;g++)if("undefined"!=typeof d.attributes["step_"+g])for(var h in d.attributes["step_"+g]){var i=d.attributes["step_"+g][h],j=i.type||"input",k=f[h]||"";switch("javascript"!==b.tag&&(k=op_decodeURIComponent(k)),j){case"multirow":if(k=b[h]||"","object"==typeof k)for(var l,m=c[g-1].find(".field-id-"+e+h+" a.new-row"),n=c[g-1].find(".field-id-"+e+h+"-multirow-container"),o=0,p=k.length;p>o;o++)m.trigger("click"),l=n.find("> .op-multirow:last"),a.each(i.multirow.attributes,function(a,b){var c=k[o].attrs[a]||"";"textarea"==(b.type||"input")&&(c=op_unautop(c)),c=op_decodeURIComponent(c),l.find(':input[name$="'+a+'"]').val(c)});break;case"style-selector":case"image-selector":W(e+h+"_container",k);break;case"checkbox":a("#"+e+h).attr("checked","Y"==k).trigger("change");break;case"radio":a(".field-id-"+e+h+' :radio[value="'+k+'"]').attr("checked",!0).trigger("change");break;case"font":Z(h,f,e+h);break;case"wysiwyg":V(e+h,k);break;case"textarea":var q=i.format||"op_unautop";"custom"===q?a("#"+e+h).val(k):a("#"+e+h).val("br"==q?da(k):op_unautop(k));break;case"media":$(e+h,k);break;case"paragraph":"string"==typeof k&&""!=k&&a("#"+e+h).html(k).trigger("change");break;default:a("#"+e+h).val(k).trigger("change")}}}function P(b){var c=b.asset;ia.addClass("edit-mode"),wa=!0,xa=!0,"undefined"!=typeof op_assets[c[0]]&&"undefined"!=typeof op_assets[c[0]][c[1]]&&(d(ra[1].find('a[href$="#'+c[0]+"/"+c[1]+'"]')),ia.find(".op_asset_browser_slide .settings-container").css("display","none"),h(c,function(c,d){O(b,c,d),xa=!1,wa=!1,"undefined"!=typeof d.default_slide?k(a.isFunction(d.default_slide)?d.default_slide(c):d.default_slide):"undefined"!=typeof c[1]?k(3,!1):k(2,!1)}))}function Q(b){a(".color-picker-container :input",b).each(function(){var b=a(this).siblings("a.op-pick-color");b.data("input",a(this)),a(this).data("cp_link",b).data("cp_link").css("background-color",S(a(this).val()))})}function R(b){ma.setColor(b),la[1].val(b),la[0].css("background-color",b),a("#op_asset_browser_slide3 .op-settings-"+Ga[0]+"-"+Ga[1]).trigger({type:"update_button_preview",id:la[1].attr("id"),value:b,tag:Ga[1]})}function S(a){return"#"+a.replace(/[^a-fA-F0-9]/,"")}function T(a){return a&&"string"==typeof a?op_assets_lang[a]||a.replace(/{\#([^}]+)\}/g,function(a,b){return op_assets_lang[b]||"{#"+b+"}"}):""}function U(b){var c="";if(za){var d=tinyMCE.get(b);c=d&&d.isHidden()||!d?op_wpautop(a("#"+b).val()):d.getContent()}else c=a("#"+b).val();return c=Aa?op_wpautop(c):op_unautop(c)}function V(b,c){var d;c=c||"",za&&(d=tinyMCE.get(b),d&&(d.initialized?d.setContent(op_wpautop(c),{no_events:!0}):tinyMCE.majorVersion<4?d.onInit.add(function(){d.setContent(op_wpautop(c),{no_events:!0})}):d.on("init",function(a){d.setContent(op_wpautop(c),{no_events:!0})}))),za&&d||a("#"+b).val(op_unautop(c))}function W(b,c){if("op_assets_core_button_button_preview_container"!=b&&"op_assets_core_membership_order_button_button_preview_container"!=b&&"op_assets_core_optin_box_tabs_submit_button_button_preview_container"!=b&&"op_assets_core_optin_modal_tabs_submit_button_button_preview_container"!=b&&"op_assets_core_op_popup_button_preview_container"!=b){c="undefined"!=typeof c?c:"";var d,e,f=a("#"+b),g=f.parent().hasClass("op-disable-selected"),h=f.data("show_on_values"),i="img",j="alt";b.indexOf("_font_container")>-1&&(i=".op-font",j="data-font"),e=i+"["+j+'="'+c+'"]',""==c?g?(f.find(".selected").removeClass("selected"),c=null):(d=a("#"+b+" .op-asset-dropdown-list a:first").html(),c=a("#"+b+" a.selected-item").html(d).find(i).attr(j)):g?f.find(".selected").removeClass("selected").end().find(e).parent().trigger("click"):(d=f.find(e).parent().html(),f.find("a.selected-item").html(d)),NaN!=typeof h&&null!==c&&H.apply(f.closest(".op_asset_browser_slide"),[c,h])}}function X(b){var c=a("#"+b);return c=c.closest(".field-row").hasClass("op-disable-selected")?c.find(".selected img"):c.find(".selected-item img"),c.attr("alt")}function Y(b,c){a("#"+b).val(c).next("a.op-pick-color").css({backgroundColor:c})}function Z(b,c,d){var e=["size","font","style","color","spacing","shadow"];a.each(e,function(e,f){var g=b+"_"+f,h=c[g]||"";h=op_decodeURIComponent(h),"font"==f?W(d+"_container",h):a("#"+d+"_"+f).val(h).trigger("change")})}function $(b,c,d){d=d===!1?!1:!0;var e=a("#"+b),f=e.next().find(".content");if("undefined"==typeof c||""==c)return f.html(""),e.val(""),void(d&&e.trigger("change"));var g=c.match(/\.([^.]+)$/);e.val(c),d&&e.trigger("change"),g=null===g?!1:g[1],a.inArray(g,["jpg","jpeg","gif","png"])>-1?f.html('<a href="'+c+'" target="_blank" class="preview-image"><img src="'+c+'" alt="uploaded-image" /></a><a href="#remove" class="remove-file">'+T("remove_image")+"</a>"):f.html('<a href="'+c+'" target="_blank" class="preview-image">'+T("view_file")+'</a><a href="#remove" class="remove-file">'+T("remove_file")+"</a>")}function _(a){return a=a||"","undefined"!=typeof op_le_column_width?op_le_column_width():a}function aa(){za&&ya!==!0&&this.content.find(".wp-editor-area").each(function(b){var c=a(this).attr("id"),d=tinyMCE.get(c);d&&d.remove()})}function ba(b){var c=a("#op_asset_browser_slider");b=0===b?0:1,a.fancybox.open({type:"inline",scrolling:"no",autoSize:!1,fitToView:!1,openEffect:"none",closeEffect:"fade",openSpeed:0,closeSpeed:200,openOpacity:!0,closeOpacity:!0,scrollOutside:!1,helpers:{overlay:{closeClick:!1}},opLocked:!0,keys:!1,margin:0,padding:0,width:760,height:500,minHeight:500,maxHeight:500,href:"#op_asset_browser_container",beforeClose:function(){return Ja?!1:(OptimizePress.fancyboxBeforeCloseAnimation(this),Ja=!0,void aa.apply(this))},beforeShow:function(){e(),k(b,!1),OptimizePress.fancyboxBeforeShowAnimation(this),c.css({display:"none"}),a(window.parent.document).find(".fancybox-close").css({display:"none"})},afterShow:function(){c.css({display:"block"}),$fancyBoxOpened=a(".fancybox-opened").eq(-1),$fancyBoxIframe=$fancyBoxOpened.find("iframe"),$fancyBoxIframe.length>0?$fancyBoxIframe.focus():($assetBrowserContainer=$fancyBoxOpened.find("#op_asset_browser_container"),$assetBrowserContainer.length>0?($fancyBoxOpened.find(".op_asset_browser_slide").eq(b).addClass("op_asset_browser_slide_active").find(".op_asset_content").addClass("op_no_outline").attr("tabindex",0).focus(),m()):$fancyBoxOpened.find(".fancybox-inner").addClass("op_no_outline").attr("tabindex",0).focus())},afterClose:function(){Ja=!1,ya=!1,k(1);var b=ia.find(".multirow-container:not(.field-type-tabs)").find(".op-multirow-tabs li").remove().end().find(".op-multirow");v(b),b.remove(),a("#op_asset_browser_slider .op_asset_browser_slide_active").removeClass("op_asset_browser_slide_active"),a("#op_asset_browser_slider").find(".op-last-selected-asset-list-item").removeClass("op-last-selected-asset-list-item"),a(window.parent.document).find(".fancybox-close").css({display:"block"})}})}function ca(a){return a=a.replace(/(\r\n|\n)/g,"<br />");
}function da(a){return a=a.replace(/<br\s*\/?>/g,"\n",a)}function ea(a,b){var c,d,e=va[a][b];for(i=0;i<3;i++)c=e[i],d=sa[i+2].find(".help-vid-link"),""!=c?d.html(c):d.html(va.defaults[i])}function fa(a){return'<a href="'+a.url+'" tabindex="-1" class="help-me" title="'+T("help_video")+'" data-width="'+a.width+'" data-height="'+a.height+'"><span>?</span></a>'}function ga(){Ia["help-video"]=!0,ia.on("click","a.help-me",function(c){var d=a(this),e=parseInt(d.attr("data-width"),10),f=parseInt(d.attr("data-height"),10),g="";c.preventDefault();for(var h in Ia)pa.removeClass(h);pa.addClass("help-video"),g+='<div style="width:'+e+"px; height:"+f+'px; margin:0 auto;">',g+='<video autoplay controls width="'+e+'" height="'+f+'" src="'+d.attr("href")+'"></video>',g+="</div>",pa.html(g),b()})}function ha(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var ia,ja,ka,la,ma,na,oa,pa,qa,ra=[],sa=[],ta={core:{},addon:{},theme:{}},ua={core:{},addon:{},theme:{}},va={defaults:[],core:{},addon:{},theme:{}},wa=!1,xa=!1,ya=!1,za=!1,Aa=!1,Ba={},Ca={},Da={},Ea={},Fa="",Ga=[],Ha={},Ia={},Ja=!1;a(document).ready(function(){var e,f,g,i,j,l,o=0,p=a("body");for(za="undefined"!=typeof tinyMCE,Aa="undefined"!=typeof pagenow,ia=a("#op_asset_browser_container"),ja=a("#op_asset_browser_slider"),ka=a("#op_assets_waiting"),o=0;5>o;o++)ra.push(a("#op_asset_browser_slide"+o)),sa.push(ra[o].find(".op_asset_content"));for(e=sa[1].find("div.asset-list"),f=e.parent(),g=a("#op_asset_browser_no_assets"),i=function(b,c){var d,c=c,f=a.trim(c.val()),h=e.find("li");f&&""!==f?(f=f.toLowerCase(),l=!1,d=h.find("span.title"),d.each(function(){var b=a(this),c=b.text().toLowerCase(),d=c.indexOf(f)>-1,e="hidden",g="visible",h="hide";d&&(l=!0,e="visible",g="hidden",h="fadeIn",h="show"),b.closest("li").filter(d?":not(:visible)":":visible").addClass(e).removeClass(g).stop()[h]()}),l||d.each(function(){var b,c,d,e=a(this),g=e.text().toLowerCase(),h=!0;for(b=f.split(" "),c=b.length,d=0;c>d;d+=1)if(g.indexOf(b[d])<0){h=!1;break}h&&(l=!0,e.closest("li").addClass("visible").removeClass("hidden").stop().show())}),l?(e.show(),g.hide(),e.find("a:visible").length<=0&&(e.hide(),g.show())):(e.hide(),g.show())):(e.show(),h.filter(":not(:visible)").show(),g.hide())},a("#op_assets_filter").keydown(function(){clearTimeout(j)}).keyup(function(b){var c=a(this);j=setTimeout(function(){i(b,c)},60)}).change(function(){a(this).trigger("keyup")}),a(".op-insert-asset").click(function(a){OptimizePress.previousWpActiveEditor=wpActiveEditor,a.preventDefault(),ba()}),M(),a(".asset-list a",ra[1]).click(function(b){a("#op_asset_browser_slide1").find(".op-last-selected-asset-list-item").removeClass("op-last-selected-asset-list-item"),a(this).addClass("op-last-selected-asset-list-item"),ia.removeClass("edit-mode"),b.preventDefault();var c=a(this),e=a(this).get_hash();Fa=e,e=e.split("/"),2==e.length&&(ia.find(".op_asset_browser_slide .settings-container").css("display","none"),"undefined"!=typeof op_assets[e[0]]&&"undefined"!=typeof op_assets[e[0]][e[1]]&&(h(e),d(c),k(2)))}),a(window).on("keydown",function(b){var c,d=a(document.activeElement),e=d.parent(),f=n(),g=a("#op_asset_browser_slide2"),h=5,i=0;switch(b.which){case 83:case 111:case 55:if(d.is("#op_assets_filter")||1!==n())return;b.preventDefault(),a("#op_assets_filter").focus();break;case 900:3===f||4===f||2===f&&g.find(".op-settings-core-custom_html").is(":visible")||2===f&&g.find(".op-settings-core-img_alert").is(":visible")||2===f&&g.find(".op-settings-core-javascript").is(":visible")||2===f&&g.find(".op-settings-core-vertical_spacing").is(":visible")?(!d.hasClass("op-bsw-green-button")||d.next().is("a")||b.shiftKey||b.preventDefault(),b.shiftKey&&d.is(".op_asset_content.op_no_outline")&&b.preventDefault()):((1===f||2===f)&&(c=a.Event("keydown"),b.shiftKey?c.which=38:c.which=40,a(window).trigger(c)),b.preventDefault());break;case 27:f>1&&a(".fancybox-opened").eq(-1).find(".op_asset_browser_slide_active .op_asset_content").focus();break;case 33:if(1===f||2===f){for(c=a.Event("keydown"),c.which=38,i=0;h>i;i+=1)a(window).trigger(c);b.preventDefault()}break;case 34:if(1===f||2===f){for(c=a.Event("keydown"),c.which=40,i=0;h>i;i+=1)a(window).trigger(c);b.preventDefault()}break;case 40:1===f&&(b.preventDefault(),e.is(".op-asset-list-item")&&e.nextAll(".op-asset-list-item:visible").length>0?d.removeClass("op-last-selected-asset-list-item selected").parent().nextAll(".op-asset-list-item:visible").eq(0).find("a").addClass("op-last-selected-asset-list-item").focus():e.is(".op-asset-list-item")&&d.closest(".asset-list").next().is(".asset-list")&&d.closest(".asset-list").next().find(".op-asset-list-item:visible").length>0?d.removeClass("op-last-selected-asset-list-item selected").closest(".asset-list").next().find(".op-asset-list-item:visible").eq(0).find("a").addClass("op-last-selected-asset-list-item").focus():d.is("#op_assets_filter")?a(".asset-list .op-asset-list-item:visible").eq(0).find("a").focus():m()),2===f&&(d.is("textarea")||d.is("input")||b.preventDefault(),e.is(".op-asset-dropdown-list-item:visible")&&e.next(".op-asset-dropdown-list-item:visible").length>0?d.removeClass("op-last-selected-asset-dropdown-list-item selected").parent().next(".op-asset-dropdown-list-item").find("a").addClass("op-last-selected-asset-dropdown-list-item").focus():d.is("#op_assets_filter")?a(".op-asset-dropdown-list-item:visible").eq(0).find("a").focus():m());break;case 38:if(1===f){if(b.preventDefault(),d.is("#op_assets_filter"))return;e.is(".op-asset-list-item")&&e.prevAll(".op-asset-list-item:visible").length>0?d.removeClass("op-last-selected-asset-list-item").parent().prevAll(".op-asset-list-item:visible").eq(0).find("a").addClass("op-last-selected-asset-list-item").focus():e.is(".op-asset-list-item")&&d.closest(".asset-list").prev().is(".asset-list")&&d.closest(".asset-list").prev().find(".op-asset-list-item:visible").length>0?d.removeClass("op-last-selected-asset-list-item selected").closest(".asset-list").prev().find(".op-asset-list-item:visible").last().find("a").addClass("op-last-selected-asset-list-item").focus():e.is(".op-asset-list-item")?a("#op_assets_filter").focus():m()}2===f&&(d.is("textarea")||d.is("input")||b.preventDefault(),e.is(".op-asset-dropdown-list-item:visible")&&e.prev(".op-asset-dropdown-list-item:visible").length>0?d.removeClass("op-last-selected-asset-dropdown-list-item").parent().prev(".op-asset-dropdown-list-item").find("a").addClass("op-last-selected-asset-dropdown-list-item").focus():d.is("#op_assets_filter")?a(".op-asset-dropdown-list-item:visible").eq(0).find("a").focus():m());break;case 39:e.is(".op-asset-list-item")||e.is(".op-asset-dropdown-list-item")?d.trigger("click"):2!==f||d.is(".insert-media, a, input, textarea, select, .op-bsw-green-button")||g.find(".op-asset-dropdown-list-item .selected").trigger("click");break;case 37:f>1&&(e.hasClass("op-asset-dropdown-list-item")||!d.is(".insert-media, a, input, textarea, select, .op-bsw-green-button"))&&k(f-1,!0)}}),ia.on("click","a.op-slide-link",function(b){b.preventDefault(),k(a(this).get_hash()),a(b.target).parent().parent().hasClass("op-settings-core-membership_order_button")&&a("#op_assets_core_membership_order_button_gateway").trigger("change")}),oa=ia.find(".sneezing-panda").hide(),pa=oa.find(".content"),ra[3].add(ra[4]).on("click",".op-asset-dropdown .selected-item",function(c){c.preventDefault(),qa=a(this);var d=qa.closest(".op-asset-dropdown");for(var e in Ia)pa.removeClass(e),d.hasClass(e)&&pa.addClass(e);pa.html(qa.next().html()),b()}),oa.on("click",".hide-the-panda",function(a){a.preventDefault(),c()}),pa.on("click","li a",function(b){var d=a(this),e=d.find(".op-font").length>0?d.find(".op-font"):d.find("img");b.preventDefault(),"op_assets_core_button_button_preview_container"!=qa.parent().attr("id")&&"op_assets_core_optin_box_tabs_submit_button_button_preview_container"!=qa.parent().attr("id")&&"op_assets_core_optin_modal_tabs_submit_button_button_preview_container"!=qa.parent().attr("id")&&"op_assets_core_membership_order_button_button_preview_container"!=qa.parent().attr("id")&&"op_assets_core_op_popup_button_preview_container"!=qa.parent().attr("id")&&qa.html(d.html()).parent().find('li img[alt="'+d.find("img").attr("alt")+'"]').parent().trigger("click"),a("#op_asset_browser_slide3 .op-settings-"+Ga[0]+"-"+Ga[1]).trigger({type:"update_button_preview",id:qa.parent().attr("id"),value:e.attr("alt"),font_type:e.attr("data-type"),font_family:e.attr("data-family"),group:Ga[0],tag:Ga[1]}),c()}),a(document).mousedown(function(b){na.hide().css({top:"auto",left:"auto"}),0==a(b.target).closest(".sneezing-panda").length&&c()}).trigger("mousedown"),ra[2].on("click",".op-disable-selected a",function(b){b.preventDefault(),a(this).closest(".op-asset-dropdown-list").find("a.selected").removeClass("selected").end().end().addClass("selected"),k(3),b.originalEvent&&(OptimizePress.currentEditElement=!1)}),p.on("click",".wp-editor-wrap",function(){wpActiveEditor=a(this).find("textarea").attr("id")}),p.on("mousedown",".op-insert-buttons",function(){wpActiveEditor=OptimizePress.previousWpActiveEditor,OptimizePress.previousWpActiveEditor=void 0}),ia.on("click",".op-multirow-tabs li a",function(b){var c=a(this),d=c.closest("ul"),e=d.parent(),f=d.find("li").index(c.parent());d.find("li").removeClass("selected").filter(":eq("+f+")").addClass("selected"),e.find("> .op-multirow").hide().filter(":eq("+f+")").show(),a(".field-feature_title").parent().show(),b.preventDefault()}).on("click",'a[href$="#reset-font"]',function(b){var c=a(this).prev(),d=c.find(".font-view");c.find(":input").val("").trigger("change"),d.find(".selected-item").html(d.find("li:first a").html()),b.preventDefault()}),o=1;5>o;o++)va.defaults.push(a("#op_asset_browser_slide"+o+" .help-vid-link").html());ga()}),window.OptimizePress.LiveEditor=window.OptimizePress.LiveEditor||{},window.OptimizePress.LiveEditor.show_slide=k;var Ka=0;a.fn.get_hash=function(){return a.get_hash(this.attr("href"))},a.get_hash=function(a){return a=a.split("#"),a[1]},a.object_length=function(a){var b=0;for(var c in a)b++;return b},OptimizePress.epicboxBeforeCloseAnimation=function(b,c){b&&b.addClass("op-transform-fast"),c.addClass("op-transform-fast"),setTimeout(function(){c.addClass("op-transform-scale0"),b&&b.addClass("op-opacity-zero"),setTimeout(function(){c.removeClass("op-transform-scale0 op-transform-start op-transform op-transform-end op-transform-fast").css({display:"none"}),b.removeClass("op-opacity-zero").css({display:"none"}),a("html").removeClass("epicbox-lock epicbox-margin")},200)},100)},OptimizePress.epicboxBeforeShowAnimation=function(a,b){a&&a.css({display:"block"}).removeClass("op-transform-1 op-transform-1-end").addClass("op-transform-1-start"),b.css({display:"block"}).removeClass("op-hidden op-transform op-transform-end").addClass("op-transform-start"),setTimeout(function(){a&&a.addClass("op-transform-1 op-transform-1-end"),b.addClass("op-transform op-transform-end")},100),setTimeout(function(){b.removeClass("op-transform")},300)},window.OP_AB={autop:op_wpautop,br2nl:da,column_width:_,edit_element:P,reset_form:s,insert_content:N,get_selector_value:X,nl2br:ca,open_dialog:ba,resize_content_areas:e,set_font_settings:Z,set_selector_value:W,set_color_value:Y,set_wysiwyg_content:V,set_uploader_value:$,show_slide:k,get_active_slide:n,encode_html:ha,trigger_insert:function(){z(Ga[0],Ga[1])},translate:T,unautop:op_unautop,wysiwyg_content:U},a.expr[":"].icontains=function(b,c,d,e){return(b.textContent||b.innerText||a(b).text()||"").toLowerCase.indexOf(d[3].toLowerCase())>=0},a(document).on("update_button_preview",".op-settings-core-op_popup",function(a){return op_custom_popup.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-button",function(a){return op_custom_button.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-membership_order_button",function(a){return op_custom_membership_button.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-optin_box",function(a){return op_custom_optin_button.update(a),!1}),a(document).on("update_button_preview",".op-settings-core-optin_modal",function(a){return op_custom_optin_button.update(a),!1})}(opjq),/*!
 * HTML Parser By John Resig (ejohn.org)
 * Original code by Erik Arvidsson, Mozilla Public License
 * http://erik.eae.net/simplehtmlparser/simplehtmlparser.js
 *
 * // Use like so:
 * HTMLParser(htmlString, {
 *     start: function(tag, attrs, unary) {},
 *     end: function(tag) {},
 *     chars: function(text) {},
 *     comment: function(text) {}
 * });
 *
 * // or to get an XML string:
 * HTMLtoXML(htmlString);
 *
 * // or to get an XML DOM Document
 * HTMLtoDOM(htmlString);
 *
 * // or to inject into an existing document/DOM node
 * HTMLtoDOM(htmlString, document);
 * HTMLtoDOM(htmlString, document.body);
 *
 */
function(){function a(a){for(var b={},c=a.split(","),d=0;d<c.length;d++)b[c[d]]=!0;return b}var b=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,c=/^<\/([-A-Za-z0-9_]+)[^>]*>/,d=/([a-zA-Z_:][-a-zA-Z0-9_:.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,e=a("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),f=a("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),g=a("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),h=a("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),i=a("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),j=a("script,style"),k=this.HTMLParser=function(a,k){function l(a,b,c,j){if(b=b.toLowerCase(),f[b])for(;q.last()&&g[q.last()];)m("",q.last());if(h[b]&&q.last()==b&&m("",b),j=e[b]||!!j,j||q.push(b),k.start){var l=[];c.replace(d,function(a,b){var c=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:i[b]?b:"";l.push({name:b,value:c,escaped:c.replace(/(^|[^\\])"/g,'$1\\"')})}),k.start&&k.start(b,l,j)}}function m(a,b){if(b)for(var c=q.length-1;c>=0&&q[c]!=b;c--);else var c=0;if(c>=0){for(var d=q.length-1;d>=c;d--)k.end&&k.end(q[d]);q.length=c}}var n,o,p,q=[],r=a;for(q.last=function(){return this[this.length-1]};a;){if(o=!0,q.last()&&j[q.last()])a=a.replace(new RegExp("([.|\\w|\\W]*)</"+q.last()+"[^>]*>","im"),function(a,b){return b=b.replace(/<!--(.*?)-->/g,"$1").replace(/<!\[CDATA\[(.*?)]]>/g,"$1"),k.chars&&k.chars(b),""}),m("",q.last());else if(0==a.indexOf("<!--")?(n=a.indexOf("-->"),n>=0&&(k.comment&&k.comment(a.substring(4,n)),a=a.substring(n+3),o=!1)):0==a.indexOf("<?php")?(n=a.indexOf("?>"),n>=0&&(k.php&&k.php(a.substring(5,n)),a=a.substring(n+2),o=!1)):0==a.indexOf("</")?(p=a.match(c),p&&(a=a.substring(p[0].length),p[0].replace(c,m),o=!1)):a.search(/<($|\s)/i)>-1?(k.chars(a),a=""):0==a.indexOf("<")&&(p=a.match(b),p&&(a=a.substring(p[0].length),p[0].replace(b,l),o=!1)),o){n=a.indexOf("<");var s=0>n?a:a.substring(0,n);a=0>n?"":a.substring(n),k.chars&&k.chars(s)}if(a==r)throw alert("Sorry, it seems that you've entered malformed HTML.\n\nPlease verify that the code you entered is valid and try again.\n\nEnsure you are only using HTML form code and do not use javascript as it is not supported in this field."),"Parse Error: "+a;r=a}m()};this.HTMLtoXML=function(a){var b="";return k(a,{start:function(a,c,d){b+="<"+a;for(var e=0;e<c.length;e++)b+=" "+c[e].name+'="'+c[e].escaped+'"';b+=(d?"/":"")+">"},end:function(a){b+="</"+a+">"},chars:function(a){b+=a},comment:function(a){b+="<!--"+a+"-->"},php:function(a){b+="<?php"+a+"?>"}}),b},this.HTMLtoDOM=function(b,c){var d=a("html,head,body,title"),e={link:"head",base:"head"};c?c=c.ownerDocument||c.getOwnerDocument&&c.getOwnerDocument()||c:"undefined"!=typeof DOMDocument?c=new DOMDocument:"undefined"!=typeof document&&document.implementation&&document.implementation.createDocument?c=document.implementation.createDocument("","",null):"undefined"!=typeof ActiveX&&(c=new ActiveXObject("Msxml.DOMDocument"));var f=[],g=c.documentElement||c.getDocumentElement&&c.getDocumentElement();if(!g&&c.createElement&&function(){var a=c.createElement("html"),b=c.createElement("head");b.appendChild(c.createElement("title")),a.appendChild(b),a.appendChild(c.createElement("body")),c.appendChild(a)}(),c.getElementsByTagName)for(var h in d)d[h]=c.getElementsByTagName(h)[0];var i=d.body;return k(b,{start:function(a,b,g){if(d[a])return i=d[a],void(g||f.push(i));var h=c.createElement(a);for(var j in b)h.setAttribute(b[j].name,b[j].value);e[a]&&"boolean"!=typeof d[e[a]]?d[e[a]].appendChild(h):i&&i.appendChild&&i.appendChild(h),g||(f.push(h),i=h)},end:function(a){f.length-=1,i=f[f.length-1]},chars:function(a){i.appendChild(c.createTextNode(a))},comment:function(a){}}),c}}(),function(a){if(!a.fn.inputFileUglify||!a.fn.inputFileUglify){var b={labelLink:!0,textButton:"Browse...",textNoFiles:"No files selected.",textMoreFiles:"{count} files selected."},c="jquery-input-file-prettify",d=function(d){if(!a(this).data(c)&&a(this).is('input[type="file"]')){var e={};e.options=a.extend({},b,d),a(this).data(c,e),f.call(this,d)}},e=function(){var b=a(this).data(c);b&&(a(b.button).removeData(c).unbind().remove(),a(b.label).removeData(c).unbind().remove(),a(b.span).removeData(c).remove(),a(this).removeData(c).unwrap())},f=function(){var b=a(this).data(c);a(this).wrap("<div />"),b.wrapper=a(this).parent().attr("class",c).data(c,this),b.button=a("<a />").attr("href","#").html(b.options.textButton).on("click",g).on("mouseenter",i).on("mouseleave",j).data(c,this).appendTo(b.wrapper),b.span=a("<span />").css("left",b.button.outerWidth(!0)+"px").data(c,this).appendTo(b.wrapper),b.label=a("<label />").html(b.options.textNoFiles).data(c,this).appendTo(b.span),b.options.labelLink&&(a(b.wrapper).addClass(c+"-label-link"),a(b.label).on("mouseenter",i).on("mouseleave",j).on("click",function(a){g.call(this)})),a(this).data(c,b).on("change",h).trigger("change")},g=function(b){return a(a(this).data(c)).trigger("click"),!1},h=function(b){var d=a(this).data(c),e=a(this).get(0).files.length,f=d.options.textNoFiles;1==e&&(f=a(this).val().split("\\").pop()),e>1&&(f=d.options.textMoreFiles.replace(/{count}/g,e)),a(d.label).html(f),a(d.wrapper).removeClass(c+"-no-files").addClass(0==e?c+"-no-files":c+"-temp").removeClass(c+"-temp")},i=function(b){a(a(this).data(c)).data(c).wrapper.removeClass(c+"-hover").addClass(c+"-hover")},j=function(b){a(a(this).data(c)).data(c).wrapper.removeClass(c+"-hover")};a.fn.inputFilePrettify=function(b){return a.each(this,function(){d.call(this,b)})},a.fn.inputFileUglify=function(){return a.each(this,function(){e.call(this)})}}}(opjq),function(a){if(!a.fn.opForm){var b={},c="op-form",d=function(d){if(a(this).is("form")){var g={};g.options=a.extend({},b,d),g.submit=a(this).find('input[type="submit"],button[type="submit"]'),g.file=a(this).find('input[type="file"]'),a(this).unbind("submit."+c).on("submit."+c,f).data(c,g),a(g.file).inputFilePrettify().on("change",e).trigger("change")}},e=function(b){var d=a(this).closest("form").data(c);d&&d.submit&&(a(d.submit).removeAttr("disabled"),0==a(this).get(0).files.length&&a(d.submit).attr("disabled","disabled"))},f=function(b){var d=a(this).data(c);return d&&d.file&&0==a(d.file).get(0).files.length?!1:void 0};a.fn.opForm=function(b){return a.each(this,function(){d.call(this,b)})}}}(opjq),function(a){function b(){var b=a(this).val(),c="";c=b.replace(/\s/g,"-").replace(/[^a-zA-Z0-9\-]/g,"").replace(RegExp("-{2,}","g"),"-"),l.val(c.toLowerCase())}function c(){k.removeClass("error").val(""),l.removeClass("error").val(""),a(".op-msg").hide()}function d(b){var c=a(".op-msg-success"),d=a(".op-msg-error"),e=a("#op_ajax_checker"),f=e.find("img"),g=e.find(".op-check-availability"),i=e.find(".op-check-availability-cancel");return""===a.trim(l.val())?!1:(b.preventDefault(),m.addClass("op-loading"),g.fadeOut("fast",function(){d.add(c).hide(),f.add(i).fadeIn("fast")}),void(h=a.ajax(OptimizePress.ajaxurl,{data:{action:OptimizePress.SN+"-page-builder-slug",slug:l.val(),post_id:0},type:"post",dataType:"json",success:function(a){i.add(f).fadeOut("fast",function(){g.fadeIn("fast")}),a.valid===!0?(l.removeClass("error"),o=!0,n?(window.parent.OptimizePress.reload_page=!0,j.submit()):m.removeClass("op-loading"),d.hide(),c.show()):(l.addClass("error"),m.removeClass("op-loading"),n&&(alert(OptimizePress.create_new_page.slug_message),l.focus()),o=!1,n=!1,c.hide(),d.show())}})))}function e(b){var d=a(this).data("template-id"),e=a("#op_page_preset_option"),f="";i=d,0!==d?(e.val("content_layout"),a("#op_theme_type, #op_theme_id").remove()):(f='<input type="hidden" name="theme_type" id="op_theme_type" value="marketing" />',f+='<input type="hidden" name="theme_id" id="op_theme_id" value="'+a(this).data("themeId")+'" />',j.append(f),e.val("blank")),q="5",c(),a("#content_layout_id").val(d),a.fancybox({href:"#op-content-preview-container"},a.extend({},OptimizePress.fancybox_defaults,{type:"inline",beforeClose:function(){OptimizePress.fancyboxBeforeCloseAnimation(this)}})),setTimeout(function(){a("#op_page_name").focus()},300)}function f(b,c,d){return op_show_loading(),c&&""!==c?(g(c,d),!1):void a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-preview-content-layout",template:b},function(a){g(a)})}function g(b,c){OptimizePress.disable_alert=!0,a.fancybox({href:b},a.extend({},OptimizePress.fancybox_defaults,{autoSize:!1,type:c?"image":"iframe"})),c&&op_hide_loading()}var h,i,j,k,l,m,n=!1,o=!1,p=!1,q="2";return OptimizePress.op_create_new_page?(a(document).ready(function(){var c=a("body");k=a("#op_page_name"),l=a("#op_page_slug"),m=a("#op-create-page-btn"),j=a("#op_asset_browser_container"),c.on("click",".op-info-box-list-icons .op-icon",function(b){var c=a(a(this).attr("href"));return c.length>0&&a("html, body").animate({scrollTop:c.offset().top},"normal"),!1}),c.on("click",".op-template-section-template-img-btn-alt",function(){var b=a(this);return f(b.data("template-id"),b.data("preview-url"),b.data("is-image")),!1}),c.on("click",".op-create-from-preset",function(){var b=a(this).parent(),c=b.find("select.op-presets").val();window.parent.createPageFromPreset();var d=a(window.parent.document);d.find("#op_page_preset_option").val("preset"),d.find(".op_page_preset_val").length>0?d.find(".op_page_preset_val").val(c):d.find("#op_page_preset_option").after('<input class="op_page_preset_val" type="hidden" name="op[page][preset]" value="'+c+'">')}),c.on("click",".op-template-section-template-img-btn",e),c.on("click",".check-availability",function(a){n=!1,d(a)}),k.keyup(b).change(b),m.on("click",function(a){p=a.shiftKey?!0:!1});var g,h=a("#op-js-back-to-top"),i=a(window),r=0,s=0,t=!1;i.on("scroll",function(a){return t?!1:(clearTimeout(g),s=i.scrollTop(),s>750&&r>s?h.addClass("op-back-to-top--shown op-back-to-top--pointer-events"):g=setTimeout(function(){h.removeClass("op-back-to-top--shown"),setTimeout(function(){h.removeClass("op-back-to-top--pointer-events")},400)},600),void(r=i.scrollTop()))}),c.on("click","#op-js-back-to-top",function(){return t=!0,a("html, body").animate({scrollTop:0},"normal",function(){t=!1}),h.removeClass("op-back-to-top--shown"),!1}),j.submit(function(b){m.addClass("op-loading"),""==a.trim(k.val())?(alert(OptimizePress.create_new_page.name_message),k.addClass("error").focus(),m.removeClass("op-loading"),b.preventDefault()):o?(k.removeClass("error"),a.ajax({type:"POST",url:j.attr("action"),data:j.serialize(),success:function(b){p?(window.location=OptimizePress.OP_PAGE_BUILDER_URL+"&step="+q+"&page_id="+b,a.fancybox.close(),op_show_loading()):(a.fancybox.close(),setTimeout(function(){a.fancybox.open(a.extend({},OptimizePress.fancybox_defaults,{type:"iframe",href:OptimizePress.OP_PAGE_BUILDER_URL+"&step="+q+"&page_id="+b}))},500)),m.removeClass("op-loading")}}),b.preventDefault()):(k.removeClass("error"),n=!0,d(b),b.preventDefault())}),a("#js-op-info-box-getting-started-link").on("click",function(){return a(this).parent().next().toggleClass("op-video-container--opened"),!1})}),window.createPageFromPreset=function(){e()},void(window.op_refresh_content_layouts=function(){a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-create-new-page-content-layouts",_wpnonce:a("#op_le_wpnonce").val()},function(b){a("#op_template_sections_container").html(b)})})):!1}(opjq);